(()=>{var e={};e.id=554,e.ids=[554],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},7790:e=>{"use strict";e.exports=require("assert")},8893:e=>{"use strict";e.exports=require("buffer")},1282:e=>{"use strict";e.exports=require("child_process")},4770:e=>{"use strict";e.exports=require("crypto")},7702:e=>{"use strict";e.exports=require("events")},2048:e=>{"use strict";e.exports=require("fs")},2615:e=>{"use strict";e.exports=require("http")},5240:e=>{"use strict";e.exports=require("https")},8216:e=>{"use strict";e.exports=require("net")},9801:e=>{"use strict";e.exports=require("os")},5315:e=>{"use strict";e.exports=require("path")},6162:e=>{"use strict";e.exports=require("stream")},2452:e=>{"use strict";e.exports=require("tls")},4175:e=>{"use strict";e.exports=require("tty")},7360:e=>{"use strict";e.exports=require("url")},1764:e=>{"use strict";e.exports=require("util")},1568:e=>{"use strict";e.exports=require("zlib")},4895:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>n.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>d,routeModule:()=>h,tree:()=>c}),r(8507),r(497),r(2874);var a=r(7105),s=r(5265),i=r(157),n=r.n(i),o=r(4665),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);r.d(t,l);let c=["",{children:["room",{children:["[roomId]",{children:["editor",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,8507)),"/Users/piyush/Projects/CodeMitra/frontend/src/app/room/[roomId]/editor/page.tsx"]}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,497)),"/Users/piyush/Projects/CodeMitra/frontend/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,2874,23)),"next/dist/client/components/not-found-error"]}],d=["/Users/piyush/Projects/CodeMitra/frontend/src/app/room/[roomId]/editor/page.tsx"],u="/room/[roomId]/editor/page",m={require:r,loadChunk:()=>Promise.resolve()},h=new a.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/room/[roomId]/editor/page",pathname:"/room/[roomId]/editor",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},8098:(e,t,r)=>{Promise.resolve().then(r.bind(r,7438))},7438:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>tv});var a=r(9899),s=r(5507),i=r(6153),n=r(9312),o=r(9411);function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=Array(t);r<t;r++)a[r]=e[r];return a}function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach(function(t){var a;a=r[t],t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function u(e){return function t(){for(var r=this,a=arguments.length,s=Array(a),i=0;i<a;i++)s[i]=arguments[i];return s.length>=e.length?e.apply(this,s):function(){for(var e=arguments.length,a=Array(e),i=0;i<e;i++)a[i]=arguments[i];return t.apply(r,[].concat(s,a))}}}function m(e){return({}).toString.call(e).includes("Object")}function h(e){return"function"==typeof e}var p=u(function(e,t){throw Error(e[t]||e.default)})({initialIsRequired:"initial state is required",initialType:"initial state should be an object",initialContent:"initial state shouldn't be an empty object",handlerType:"handler should be an object or a function",handlersType:"all handlers should be a functions",selectorType:"selector should be a function",changeType:"provided value of changes should be an object",changeField:'it seams you want to change a field in the state which is not specified in the "initial" state',default:"an unknown error accured in `state-local` package"}),x={changes:function(e,t){return m(t)||p("changeType"),Object.keys(t).some(function(t){return!Object.prototype.hasOwnProperty.call(e,t)})&&p("changeField"),t},selector:function(e){h(e)||p("selectorType")},handler:function(e){h(e)||m(e)||p("handlerType"),m(e)&&Object.values(e).some(function(e){return!h(e)})&&p("handlersType")},initial:function(e){e||p("initialIsRequired"),m(e)||p("initialType"),Object.keys(e).length||p("initialContent")}};function g(e,t){return h(t)?t(e.current):t}function y(e,t){return e.current=d(d({},e.current),t),t}function f(e,t,r){return h(t)?t(e.current):Object.keys(r).forEach(function(r){var a;return null===(a=t[r])||void 0===a?void 0:a.call(t,e.current[r])}),r}(function(e){return function t(){for(var r=this,a=arguments.length,s=Array(a),i=0;i<a;i++)s[i]=arguments[i];return s.length>=e.length?e.apply(this,s):function(){for(var e=arguments.length,a=Array(e),i=0;i<e;i++)a[i]=arguments[i];return t.apply(r,[].concat(s,a))}}})(function(e,t){throw Error(e[t]||e.default)})({configIsRequired:"the configuration object is required",configType:"the configuration object should be an object",default:"an unknown error accured in `@monaco-editor/loader` package",deprecation:"Deprecation warning!\n    You are using deprecated way of configuration.\n\n    Instead of using\n      monaco.config({ urls: { monacoBase: '...' } })\n    use\n      monaco.config({ paths: { vs: '...' } })\n\n    For more please check the link https://github.com/suren-atoyan/monaco-loader#config\n  "});let b=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(e){return t.reduceRight(function(e,t){return t(e)},e)}};var v={type:"cancelation",msg:"operation is manually canceled"};let j=function(e){var t=!1,r=new Promise(function(r,a){e.then(function(e){return t?a(v):r(e)}),e.catch(a)});return r.cancel=function(){return t=!0},r};var w=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],a=!0,s=!1,i=void 0;try{for(var n,o=e[Symbol.iterator]();!(a=(n=o.next()).done)&&(r.push(n.value),2!==r.length);a=!0);}catch(e){s=!0,i=e}finally{try{a||null==o.return||o.return()}finally{if(s)throw i}}return r}}(e,2)||function(e,t){if(e){if("string"==typeof e)return l(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return l(e,t)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(({create:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};x.initial(e),x.handler(t);var r={current:e},a=u(f)(r,t),s=u(y)(r),i=u(x.changes)(e),n=u(g)(r);return[function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(e){return e};return x.selector(e),e(r.current)},function(e){(function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(e){return t.reduceRight(function(e,t){return t(e)},e)}})(a,s,i,n)(e)}]}}).create({config:{paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@0.52.2/min/vs"}},isInitialized:!1,resolve:null,reject:null,monaco:null}),0),D=w[0],N=w[1];function k(e){return document.body.appendChild(e)}function C(e){var t,r,a=D(function(e){return{config:e.config,reject:e.reject}}),s=(t="".concat(a.config.paths.vs,"/loader.js"),r=document.createElement("script"),t&&(r.src=t),r);return s.onload=function(){return e()},s.onerror=a.reject,s}function E(){var e=D(function(e){return{config:e.config,resolve:e.resolve,reject:e.reject}}),t=window.require;t.config(e.config),t(["vs/editor/editor.main"],function(t){S(t),e.resolve(t)},function(t){e.reject(t)})}function S(e){D().monaco||N({monaco:e})}var M=new Promise(function(e,t){return N({resolve:e,reject:t})});let z={init:function(){var e=D(function(e){return{monaco:e.monaco,isInitialized:e.isInitialized,resolve:e.resolve}});if(!e.isInitialized){if(N({isInitialized:!0}),e.monaco)return e.resolve(e.monaco),j(M);if(window.monaco&&window.monaco.editor)return S(window.monaco),e.resolve(window.monaco),j(M);b(k,C)(E)}return j(M)}};var R={wrapper:{display:"flex",position:"relative",textAlign:"initial"},fullWidth:{width:"100%"},hide:{display:"none"}},O={container:{display:"flex",height:"100%",width:"100%",justifyContent:"center",alignItems:"center"}},A=function({children:e}){return s.createElement("div",{style:O.container},e)},P=(0,s.memo)(function({width:e,height:t,isEditorReady:r,loading:a,_ref:i,className:n,wrapperProps:o}){return s.createElement("section",{style:{...R.wrapper,width:e,height:t},...o},!r&&s.createElement(A,null,a),s.createElement("div",{ref:i,style:{...R.fullWidth,...!r&&R.hide},className:n}))}),I=function(e){(0,s.useEffect)(e,[])},T=function(e,t,r=!0){let a=(0,s.useRef)(!0);(0,s.useEffect)(a.current||!r?()=>{a.current=!1}:e,t)};function L(){}function $(e,t,r,a){return e.editor.getModel(F(e,a))||e.editor.createModel(t,r,a?F(e,a):void 0)}function F(e,t){return e.Uri.parse(t)}(0,s.memo)(function({original:e,modified:t,language:r,originalLanguage:a,modifiedLanguage:i,originalModelPath:n,modifiedModelPath:o,keepCurrentOriginalModel:l=!1,keepCurrentModifiedModel:c=!1,theme:d="light",loading:u="Loading...",options:m={},height:h="100%",width:p="100%",className:x,wrapperProps:g={},beforeMount:y=L,onMount:f=L}){let[b,v]=(0,s.useState)(!1),[j,w]=(0,s.useState)(!0),D=(0,s.useRef)(null),N=(0,s.useRef)(null),k=(0,s.useRef)(null),C=(0,s.useRef)(f),E=(0,s.useRef)(y),S=(0,s.useRef)(!1);I(()=>{let e=z.init();return e.then(e=>(N.current=e)&&w(!1)).catch(e=>e?.type!=="cancelation"&&console.error("Monaco initialization: error:",e)),()=>{let t;return D.current?(t=D.current?.getModel(),void(l||t?.original?.dispose(),c||t?.modified?.dispose(),D.current?.dispose())):e.cancel()}}),T(()=>{if(D.current&&N.current){let t=D.current.getOriginalEditor(),s=$(N.current,e||"",a||r||"text",n||"");s!==t.getModel()&&t.setModel(s)}},[n],b),T(()=>{if(D.current&&N.current){let e=D.current.getModifiedEditor(),a=$(N.current,t||"",i||r||"text",o||"");a!==e.getModel()&&e.setModel(a)}},[o],b),T(()=>{let e=D.current.getModifiedEditor();e.getOption(N.current.editor.EditorOption.readOnly)?e.setValue(t||""):t!==e.getValue()&&(e.executeEdits("",[{range:e.getModel().getFullModelRange(),text:t||"",forceMoveMarkers:!0}]),e.pushUndoStop())},[t],b),T(()=>{D.current?.getModel()?.original.setValue(e||"")},[e],b),T(()=>{let{original:e,modified:t}=D.current.getModel();N.current.editor.setModelLanguage(e,a||r||"text"),N.current.editor.setModelLanguage(t,i||r||"text")},[r,a,i],b),T(()=>{N.current?.editor.setTheme(d)},[d],b),T(()=>{D.current?.updateOptions(m)},[m],b);let M=(0,s.useCallback)(()=>{if(!N.current)return;E.current(N.current);let s=$(N.current,e||"",a||r||"text",n||""),l=$(N.current,t||"",i||r||"text",o||"");D.current?.setModel({original:s,modified:l})},[r,t,i,e,a,n,o]),R=(0,s.useCallback)(()=>{!S.current&&k.current&&(D.current=N.current.editor.createDiffEditor(k.current,{automaticLayout:!0,...m}),M(),N.current?.editor.setTheme(d),v(!0),S.current=!0)},[m,d,M]);return(0,s.useEffect)(()=>{b&&C.current(D.current,N.current)},[b]),(0,s.useEffect)(()=>{j||b||R()},[j,b,R]),s.createElement(P,{width:p,height:h,isEditorReady:b,loading:u,_ref:k,className:x,wrapperProps:g})});var Z=function(e){let t=(0,s.useRef)();return(0,s.useEffect)(()=>{t.current=e},[e]),t.current},V=new Map,q=(0,s.memo)(function({defaultValue:e,defaultLanguage:t,defaultPath:r,value:a,language:i,path:n,theme:o="light",line:l,loading:c="Loading...",options:d={},overrideServices:u={},saveViewState:m=!0,keepCurrentModel:h=!1,width:p="100%",height:x="100%",className:g,wrapperProps:y={},beforeMount:f=L,onMount:b=L,onChange:v,onValidate:j=L}){let[w,D]=(0,s.useState)(!1),[N,k]=(0,s.useState)(!0),C=(0,s.useRef)(null),E=(0,s.useRef)(null),S=(0,s.useRef)(null),M=(0,s.useRef)(b),R=(0,s.useRef)(f),O=(0,s.useRef)(),A=(0,s.useRef)(a),F=Z(n),q=(0,s.useRef)(!1),_=(0,s.useRef)(!1);I(()=>{let e=z.init();return e.then(e=>(C.current=e)&&k(!1)).catch(e=>e?.type!=="cancelation"&&console.error("Monaco initialization: error:",e)),()=>E.current?void(O.current?.dispose(),h?m&&V.set(n,E.current.saveViewState()):E.current.getModel()?.dispose(),E.current.dispose()):e.cancel()}),T(()=>{let s=$(C.current,e||a||"",t||i||"",n||r||"");s!==E.current?.getModel()&&(m&&V.set(F,E.current?.saveViewState()),E.current?.setModel(s),m&&E.current?.restoreViewState(V.get(n)))},[n],w),T(()=>{E.current?.updateOptions(d)},[d],w),T(()=>{E.current&&void 0!==a&&(E.current.getOption(C.current.editor.EditorOption.readOnly)?E.current.setValue(a):a===E.current.getValue()||(_.current=!0,E.current.executeEdits("",[{range:E.current.getModel().getFullModelRange(),text:a,forceMoveMarkers:!0}]),E.current.pushUndoStop(),_.current=!1))},[a],w),T(()=>{let e=E.current?.getModel();e&&i&&C.current?.editor.setModelLanguage(e,i)},[i],w),T(()=>{void 0!==l&&E.current?.revealLine(l)},[l],w),T(()=>{C.current?.editor.setTheme(o)},[o],w);let U=(0,s.useCallback)(()=>{if(!(!S.current||!C.current)&&!q.current){R.current(C.current);let s=n||r,c=$(C.current,a||e||"",t||i||"",s||"");E.current=C.current?.editor.create(S.current,{model:c,automaticLayout:!0,...d},u),m&&E.current.restoreViewState(V.get(s)),C.current.editor.setTheme(o),void 0!==l&&E.current.revealLine(l),D(!0),q.current=!0}},[e,t,r,a,i,n,d,u,m,o,l]);return(0,s.useEffect)(()=>{w&&M.current(E.current,C.current)},[w]),(0,s.useEffect)(()=>{N||w||U()},[N,w,U]),A.current=a,(0,s.useEffect)(()=>{w&&v&&(O.current?.dispose(),O.current=E.current?.onDidChangeModelContent(e=>{_.current||v(E.current.getValue(),e)}))},[w,v]),(0,s.useEffect)(()=>{if(w){let e=C.current.editor.onDidChangeMarkers(e=>{let t=E.current.getModel()?.uri;if(t&&e.find(e=>e.path===t.path)){let e=C.current.editor.getModelMarkers({resource:t});j?.(e)}});return()=>{e?.dispose()}}return()=>{}},[w,j]),s.createElement(P,{width:p,height:x,isEditorReady:w,loading:c,_ref:S,className:g,wrapperProps:y})}),_=r(7009);class U{transform(e,t){return e.timestamp<=t.timestamp?this.transformOperation(e,t):this.transformOperation(t,e)}transformOperation(e,t){let r={operations:[e],transformed:[]};switch(e.type){case"insert":r.transformed=this.transformInsert(e,t);break;case"delete":r.transformed=this.transformDelete(e,t);break;case"retain":r.transformed=this.transformRetain(e,t)}return r}transformInsert(e,t){return"insert"===t.type?e.position<t.position?[e]:e.position>t.position?[{...e,position:e.position+(t.text?.length||0)}]:e.timestamp<t.timestamp?[e]:[{...e,position:e.position+(t.text?.length||0)}]:"delete"===t.type?e.position<t.position?[e]:e.position>t.position+(t.length||0)?[{...e,position:e.position-(t.length||0)}]:[{...e,position:t.position}]:e.position<=t.position?[e]:[{...e,position:e.position+(t.length||0)}]}transformDelete(e,t){if("insert"===t.type)return e.position<t.position?[e]:e.position>t.position?[{...e,position:e.position+(t.text?.length||0)}]:[{...e,position:e.position,length:(e.length||0)+(t.text?.length||0)}];if("delete"===t.type){if(e.position+(e.length||0)<=t.position)return[e];if(e.position>=t.position+(t.length||0))return[{...e,position:e.position-(t.length||0)}];{let r=Math.min(e.position,t.position),a=Math.max(e.position+(e.length||0),t.position+(t.length||0));return[{...e,position:r,length:a-r}]}}if(e.position+(e.length||0)<=t.position)return[e];if(e.position>=t.position+(t.length||0))return[{...e,position:e.position-(t.length||0)}];{let r=Math.min(e.length||0,t.position+(t.length||0)-e.position);return[{...e,length:(e.length||0)-r}]}}transformRetain(e,t){if("insert"===t.type)return e.position<t.position?[e]:[{...e,position:e.position+(t.text?.length||0)}];if("delete"===t.type){if(e.position+(e.length||0)<=t.position)return[e];if(e.position>=t.position+(t.length||0))return[{...e,position:e.position-(t.length||0)}];{let r=t.position-e.position,a=e.position+(e.length||0)-(t.position+(t.length||0)),s=[];return r>0&&s.push({...e,length:r}),a>0&&s.push({...e,position:t.position,length:a}),s}}if(e.position+(e.length||0)<=t.position)return[e];if(e.position>=t.position+(t.length||0))return[{...e,position:e.position-(t.length||0)}];{let r=Math.min(e.length||0,t.position+(t.length||0)-e.position);return[{...e,length:(e.length||0)-r}]}}applyOperations(e,t){let r=e,a=0;for(let e of[...t].sort((e,t)=>e.position-t.position)){let t=e.position+a;switch(e.type){case"insert":e.text&&(r=r.slice(0,t)+e.text+r.slice(t),a+=e.text.length);break;case"delete":e.length&&(r=r.slice(0,t)+r.slice(t+e.length),a-=e.length);break;case"retain":if(t+(e.length||0)>r.length)throw Error("Invalid retain operation: position out of bounds")}}return r}createOperation(e,t,r,a){let s=[],i=0,n=0;for(;i<e.length||n<t.length;)if(i<e.length&&n<t.length&&e[i]===t[n]){let o=0;for(;i<e.length&&n<t.length&&e[i]===t[n];)o++,i++,n++;o>0&&s.push({type:"retain",position:i-o,length:o,userId:r,timestamp:a})}else n<t.length?(s.push({type:"insert",position:i,text:t[n],userId:r,timestamp:a}),n++):i<e.length&&(s.push({type:"delete",position:i,length:1,userId:r,timestamp:a}),i++);return s}getVersion(){return this.version}incrementVersion(){this.version++}constructor(){this.version=0,this.pendingOperations=[]}}let B=new U;var W=r(832);function H({roomId:e,initialCode:t="",language:r="javascript",readOnly:i=!1,onCodeChange:l}){let c=(0,s.useRef)(null),d=(0,s.useRef)(null),{user:u}=(0,n.aC)(),{code:m,cursors:h,handleCodeChange:p,updateCursorPosition:x}=function(e,t="",r="javascript"){let{socket:a,isConnected:i}=(0,_.s)(),{user:l}=(0,n.aC)(),{currentRoom:c}=(0,o.N)(),[d,u]=(0,s.useState)(t),[m,h]=(0,s.useState)(r),[p,x]=(0,s.useState)([]),[g,y]=(0,s.useState)(!1),[f,b]=(0,s.useState)(Date.now()),[v,j]=(0,s.useState)([]),[w,D]=(0,s.useState)(0),N=(0,s.useRef)(t),k=(0,s.useRef)();(0,s.useRef)([]);let C=(0,s.useCallback)(e=>{k.current&&clearTimeout(k.current),k.current=setTimeout(()=>{E(e)},300)},[]),E=(0,s.useCallback)(async e=>{if(!a||!i||!l||!c)return;let t=N.current;if(t===e)return;let r=[];try{y(!0);let s=B.createOperation(t,e,l.id,Date.now());for(let e of(r=s,v))r=B.transform(s[0],e).transformed;a.emit("codeChange",{roomId:c.id,operations:r,version:w,userId:l.id,timestamp:Date.now()}),D(e=>e+1),b(Date.now()),N.current=e,j([])}catch(e){console.error("Failed to sync code changes:",e),r.length>0&&j(e=>[...e,...r])}finally{y(!1)}},[a,i,l,c,v,w]),S=(0,s.useCallback)(e=>{u(e),C(e)},[C]),M=(0,s.useCallback)(e=>{h(e),a&&i&&c&&a.emit("languageChange",{roomId:c.id,language:e,userId:l?.id,timestamp:Date.now()})},[a,i,c,l?.id]),z=(0,s.useCallback)((e,t)=>{if(!a||!i||!l||!c)return;let r={userId:l.id,userName:l.name||"Anonymous",userColor:R(l.id),position:e,selection:t};a.emit("cursorUpdate",{roomId:c.id,cursor:r,timestamp:Date.now()})},[a,i,l,c]),R=(0,s.useCallback)(e=>{let t=["#FF6B6B","#4ECDC4","#45B7D1","#96CEB4","#FFEAA7","#DDA0DD","#98D8C8","#F7DC6F","#BB8FCE","#85C1E9","#F8C471","#82E0AA"],r=e.split("").reduce((e,t)=>e+t.charCodeAt(0),0)%t.length;return t[r]},[]);return{code:d,language:m,cursors:p,isConnected:i,isSyncing:g,lastSyncTime:f,version:w,handleCodeChange:S,handleLanguageChange:M,updateCursorPosition:z,getUserColor:R}}(0,t,r),[g,y]=(0,s.useState)(!0),{socket:f}=(0,_.s)(),b=(0,s.useCallback)((e,t)=>{if(c.current=e,d.current=t,y(!1),e.updateOptions({fontSize:14,minimap:{enabled:!0,side:"right",size:"proportional"},wordWrap:"off",readOnly:i,automaticLayout:!0,scrollBeyondLastLine:!1,renderLineHighlight:"all",cursorBlinking:"smooth",cursorSmoothCaretAnimation:"on",multiCursorModifier:"ctrlCmd",suggestOnTriggerCharacters:!0,quickSuggestions:!0,parameterHints:{enabled:!0},hover:{enabled:!0},contextmenu:!0,mouseWheelZoom:!0,lineNumbers:"on",roundedSelection:!1,formatOnPaste:!0,formatOnType:!0,bracketPairColorization:{enabled:!0},guides:{bracketPairs:!0,indentation:!0,highlightActiveIndentation:!0},renderValidationDecorations:"on",find:{addExtraSpaceOnTop:!1,autoFindInSelection:"never",caseSensitive:"off",findInSelection:!1,globalFindInSelection:!1,isRegex:!1,matchCase:!1,matchWholeWord:!1,regex:!1,searchScope:null,seedSearchStringFromSelection:"never",useGlobalFindInSelection:!1}}),f)return f.on("code-change",e=>{e.userId,u?.id}),f.on("cursor-position",e=>{e.userId!==u?.id&&x({lineNumber:e.position.lineNumber,column:e.position.column})}),f.on("user-left",()=>{}),f.on("language-change",e=>{e.userId,u?.id}),()=>{f&&(f.off("code-change"),f.off("cursor-position"),f.off("user-left"),f.off("language-change"))}},[f,u,x,i]),v=(0,s.useCallback)(e=>{void 0!==e&&(p(e),l?.(e))},[p,l]);return a.jsx("div",{className:"flex flex-col h-full bg-gray-50 dark:bg-gray-900",children:(0,a.jsxs)("div",{className:"flex-1 relative overflow-hidden",children:[g&&a.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-white dark:bg-gray-900 z-10",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-6 h-2 w-6 border-2 border-blue-600 border-t-transparent rounded-full animate-spin"}),a.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Loading editor..."})]})}),a.jsx(q,{height:"100%",language:r,theme:"vs-dark",value:m,onChange:v,onMount:b,options:{readOnly:i,fontSize:14,minimap:{enabled:!0,side:"right",size:"proportional"},wordWrap:"off",automaticLayout:!0,scrollBeyondLastLine:!1,renderLineHighlight:"all",cursorBlinking:"smooth",cursorSmoothCaretAnimation:"on",multiCursorModifier:"ctrlCmd",suggestOnTriggerCharacters:!0,quickSuggestions:!0,parameterHints:{enabled:!0},hover:{enabled:!0},contextmenu:!0,mouseWheelZoom:!0,lineNumbers:"on",roundedSelection:!1,formatOnPaste:!0,formatOnType:!0,bracketPairColorization:{enabled:!0},guides:{bracketPairs:!0,indentation:!0,highlightActiveIndentation:!0},renderValidationDecorations:"on",find:{addExtraSpaceOnTop:!1,autoFindInSelection:"never",caseSensitive:"off",findInSelection:!1,globalFindInSelection:!1,isRegex:!1,matchCase:!1,matchWholeWord:!1,regex:!1,searchScope:null,seedSearchStringFromSelection:"never",useGlobalFindInSelection:!1}}}),h.map(e=>(0,a.jsxs)("div",{className:"absolute z-30 pointer-events-none",style:{top:`${20*e.position.lineNumber}px`,left:`${8*e.position.column}px`},children:[a.jsx("div",{className:"w-0.5 h-5 animate-pulse",style:{backgroundColor:e.userColor}}),a.jsx("div",{className:"absolute top-0 left-1 px-2 py-1 text-xs text-white rounded whitespace-nowrap shadow-sm",style:{backgroundColor:e.userColor},children:e.userName}),e.selection&&a.jsx("div",{className:"absolute bg-opacity-20 rounded",style:{backgroundColor:e.userColor,top:`${20*e.selection.startLineNumber}px`,left:`${8*e.selection.startColumn}px`,width:`${(e.selection.endColumn-e.selection.startColumn)*8}px`,height:`${(e.selection.endLineNumber-e.selection.startLineNumber+1)*20}px`}})]},e.userId))]})})}var J=r(9614),G=r(3086),Q=r(3217),Y=r(4516);let X=(0,Y.Z)("Terminal",[["polyline",{points:"4 17 10 11 4 5",key:"akl6gq"}],["line",{x1:"12",x2:"20",y1:"19",y2:"19",key:"q2wloq"}]]),K=(0,Y.Z)("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]),ee=(0,Y.Z)("Bug",[["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M9 7.13v-1a3.003 3.003 0 1 1 6 0v1",key:"d7y7pr"}],["path",{d:"M12 20c-3.3 0-6-2.7-6-6v-3a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v3c0 3.3-2.7 6-6 6",key:"xs1cw7"}],["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M6.53 9C4.6 8.8 3 7.1 3 5",key:"32zzws"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"M3 21c0-2.1 1.7-3.9 3.8-4",key:"4p0ekp"}],["path",{d:"M20.97 5c0 2.1-1.6 3.8-3.5 4",key:"18gb23"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M17.2 17c2.1.1 3.8 1.9 3.8 4",key:"k3fwyw"}]]),et=(0,Y.Z)("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);var er=r(856);let ea=(0,Y.Z)("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);var es=r(2070);let ei=(0,Y.Z)("HardDrive",[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]]),en=(0,Y.Z)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);var eo=r(7657);let el=(0,Y.Z)("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]),ec=(0,Y.Z)("Cpu",[["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"9",y:"9",width:"6",height:"6",key:"o3kz5p"}],["path",{d:"M15 2v2",key:"13l42r"}],["path",{d:"M15 20v2",key:"15mkzm"}],["path",{d:"M2 15h2",key:"1gxd5l"}],["path",{d:"M2 9h2",key:"1bbxkp"}],["path",{d:"M20 15h2",key:"19e6y8"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M9 2v2",key:"165o2o"}],["path",{d:"M9 20v2",key:"i2bqo8"}]]);var ed=r(243);let eu=(0,Y.Z)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);var em=r(8600);function eh(){let e=(0,s.useRef)(!1);return(0,em.L)(()=>(e.current=!0,()=>{e.current=!1}),[]),e}var ep=r(7448),ex=r(7517),eg=r(2609);class ey extends s.Component{getSnapshotBeforeUpdate(e){let t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){let e=this.props.sizeRef.current;e.height=t.offsetHeight||0,e.width=t.offsetWidth||0,e.top=t.offsetTop,e.left=t.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function ef({children:e,isPresent:t}){let r=(0,s.useId)(),a=(0,s.useRef)(null),i=(0,s.useRef)({width:0,height:0,top:0,left:0});return(0,s.useInsertionEffect)(()=>{let{width:e,height:s,top:n,left:o}=i.current;if(t||!a.current||!e||!s)return;a.current.dataset.motionPopId=r;let l=document.createElement("style");return document.head.appendChild(l),l.sheet&&l.sheet.insertRule(`
          [data-motion-pop-id="${r}"] {
            position: absolute !important;
            width: ${e}px !important;
            height: ${s}px !important;
            top: ${n}px !important;
            left: ${o}px !important;
          }
        `),()=>{document.head.removeChild(l)}},[t]),s.createElement(ey,{isPresent:t,childRef:a,sizeRef:i},s.cloneElement(e,{ref:a}))}let eb=({children:e,initial:t,isPresent:r,onExitComplete:a,custom:i,presenceAffectsLayout:n,mode:o})=>{let l=(0,eg.h)(ev),c=(0,s.useId)(),d=(0,s.useMemo)(()=>({id:c,initial:t,isPresent:r,custom:i,onExitComplete:e=>{for(let t of(l.set(e,!0),l.values()))if(!t)return;a&&a()},register:e=>(l.set(e,!1),()=>l.delete(e))}),n?void 0:[r]);return(0,s.useMemo)(()=>{l.forEach((e,t)=>l.set(t,!1))},[r]),s.useEffect(()=>{r||l.size||!a||a()},[r]),"popLayout"===o&&(e=s.createElement(ef,{isPresent:r},e)),s.createElement(ex.O.Provider,{value:d},e)};function ev(){return new Map}var ej=r(6947),ew=r(2382);let eD=e=>e.key||"",eN=({children:e,custom:t,initial:r=!0,onExitComplete:a,exitBeforeEnter:i,presenceAffectsLayout:n=!0,mode:o="sync"})=>{var l;(0,ew.k)(!i,"Replace exitBeforeEnter with mode='wait'");let c=(0,s.useContext)(ej.p).forceRender||function(){let e=eh(),[t,r]=(0,s.useState)(0),a=(0,s.useCallback)(()=>{e.current&&r(t+1)},[t]);return[(0,s.useCallback)(()=>ep.Wi.postRender(a),[a]),t]}()[0],d=eh(),u=function(e){let t=[];return s.Children.forEach(e,e=>{(0,s.isValidElement)(e)&&t.push(e)}),t}(e),m=u,h=(0,s.useRef)(new Map).current,p=(0,s.useRef)(m),x=(0,s.useRef)(new Map).current,g=(0,s.useRef)(!0);if((0,em.L)(()=>{g.current=!1,function(e,t){e.forEach(e=>{let r=eD(e);t.set(r,e)})}(u,x),p.current=m}),l=()=>{g.current=!0,x.clear(),h.clear()},(0,s.useEffect)(()=>()=>l(),[]),g.current)return s.createElement(s.Fragment,null,m.map(e=>s.createElement(eb,{key:eD(e),isPresent:!0,initial:!!r&&void 0,presenceAffectsLayout:n,mode:o},e)));m=[...m];let y=p.current.map(eD),f=u.map(eD),b=y.length;for(let e=0;e<b;e++){let t=y[e];-1!==f.indexOf(t)||h.has(t)||h.set(t,void 0)}return"wait"===o&&h.size&&(m=[]),h.forEach((e,r)=>{if(-1!==f.indexOf(r))return;let i=x.get(r);if(!i)return;let l=y.indexOf(r),g=e;g||(g=s.createElement(eb,{key:eD(i),isPresent:!1,onExitComplete:()=>{h.delete(r);let e=Array.from(x.keys()).filter(e=>!f.includes(e));if(e.forEach(e=>x.delete(e)),p.current=u.filter(t=>{let a=eD(t);return a===r||e.includes(a)}),!h.size){if(!1===d.current)return;c(),a&&a()}},custom:t,presenceAffectsLayout:n,mode:o},i),h.set(r,g)),m.splice(l,0,g)}),m=m.map(e=>{let t=e.key;return h.has(t)?e:s.createElement(eb,{key:eD(e),isPresent:!0,presenceAffectsLayout:n,mode:o},e)}),s.createElement(s.Fragment,null,h.size?m:m.map(e=>(0,s.cloneElement)(e)))};var ek=r(5767);class eC{constructor(){this.executionQueue=new Map}static getInstance(){return eC.instance||(eC.instance=new eC),eC.instance}async executeCode(e){let{code:t,language:r,input:a,roomId:s,userId:i}=e;if(!t.trim())return{success:!1,error:"Please write some code before executing.",status:"system_error",timestamp:new Date,language:r,codeSize:0};let n=new AbortController,o=`${s}-${i}-${Date.now()}`;this.executionQueue.set(o,n);try{let e=await fetch("/api/code/execute",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({code:t.trim(),language:r,input:a||"",roomId:s,userId:i}),signal:n.signal});if(!e.ok)throw Error(`Execution failed: ${e.status} ${e.statusText}`);let l=await e.json();return this.executionQueue.delete(o),{success:l.success,output:l.output,error:l.error,executionTime:l.executionTime,memoryUsed:l.memoryUsed,compilationTime:l.compilationTime,status:l.status,timestamp:new Date,language:r,codeSize:t.length}}catch(e){if(this.executionQueue.delete(o),e instanceof Error){if("AbortError"===e.name)return{success:!1,error:"Code execution was cancelled.",status:"system_error",timestamp:new Date,language:r,codeSize:t.length};return{success:!1,error:e.message,status:"system_error",timestamp:new Date,language:r,codeSize:t.length}}return{success:!1,error:"An unexpected error occurred during execution.",status:"system_error",timestamp:new Date,language:r,codeSize:t.length}}}cancelExecution(e){let t=this.executionQueue.get(e);return!!t&&(t.abort(),this.executionQueue.delete(e),!0)}cancelRoomExecutions(e){for(let[t,r]of Array.from(this.executionQueue.entries()))t.startsWith(e)&&(r.abort(),this.executionQueue.delete(t))}getExecutionStatus(e){return this.executionQueue.has(e)?{isExecuting:!0,progress:50,currentStep:"Executing code...",estimatedTime:5}:null}validateCodeSyntax(e,t){let r=[];if(!e.trim())return r.push("Code cannot be empty"),{isValid:!1,errors:r};switch(t){case"javascript":return this.validateJavaScript(e);case"typescript":return this.validateTypeScript(e);case"python":return this.validatePython(e);case"java":return this.validateJava(e);case"cpp":return this.validateCpp(e);case"c":return this.validateC(e);case"go":return this.validateGo(e);case"rust":return this.validateRust(e);case"php":return this.validatePhp(e);case"html":return this.validateHtml(e);case"css":return this.validateCss(e);case"sql":return this.validateSql(e);default:return{isValid:!0,errors:[]}}}validateJavaScript(e){let t=[];try{return Function(e),(e.includes("while(true)")||e.includes("for(;;)"))&&t.push("Potential infinite loop detected"),(e.includes("process.exit")||e.includes("window.close"))&&t.push("System exit commands are not allowed"),{isValid:0===t.length,errors:t}}catch(e){return{isValid:!1,errors:["JavaScript syntax error"]}}}validateTypeScript(e){return this.validateJavaScript(e)}validatePython(e){let t=[];return(e.includes("while True:")||e.includes("for i in range(9999999)"))&&t.push("Potential infinite loop detected"),(e.includes("os.system")||e.includes("subprocess.call"))&&t.push("System commands are not allowed"),(e.includes("import os")||e.includes("import subprocess"))&&t.push("System modules are not allowed"),{isValid:0===t.length,errors:t}}validateJava(e){let t=[];return e.includes("public class")||t.push("Java code must contain a public class"),e.includes("public static void main")||t.push("Java code must contain a main method"),(e.includes("System.exit")||e.includes("Runtime.getRuntime()"))&&t.push("System exit commands are not allowed"),{isValid:0===t.length,errors:t}}validateCpp(e){let t=[];return e.includes("int main()")||t.push("C++ code must contain a main function"),(e.includes("system(")||e.includes("exit("))&&t.push("System commands are not allowed"),{isValid:0===t.length,errors:t}}validateC(e){let t=[];return e.includes("int main(")||t.push("C code must contain a main function"),(e.includes("system(")||e.includes("exit("))&&t.push("System commands are not allowed"),{isValid:0===t.length,errors:t}}validateGo(e){let t=[];return e.includes("package main")||t.push("Go code must contain package main"),e.includes("func main()")||t.push("Go code must contain a main function"),(e.includes("os.Exit")||e.includes("syscall.Exec"))&&t.push("System exit commands are not allowed"),{isValid:0===t.length,errors:t}}validateRust(e){let t=[];return e.includes("fn main()")||t.push("Rust code must contain a main function"),(e.includes("std::process::exit")||e.includes("std::env::set_var"))&&t.push("System commands are not allowed"),{isValid:0===t.length,errors:t}}validatePhp(e){let t=[];return(e.includes("exec(")||e.includes("shell_exec(")||e.includes("system("))&&t.push("System commands are not allowed"),(e.includes("file_get_contents")||e.includes("fopen"))&&t.push("File operations are not allowed"),{isValid:0===t.length,errors:t}}validateHtml(e){let t=[];return e.includes("<html")&&e.includes("</html>")||t.push("HTML code must contain html tags"),e.includes("<body")&&e.includes("</body>")||t.push("HTML code must contain body tags"),{isValid:0===t.length,errors:t}}validateCss(e){let t=[];return e.includes("{")&&e.includes("}")||t.push("CSS code must contain style rules"),{isValid:0===t.length,errors:t}}validateSql(e){let t=[],r=e.toUpperCase();for(let e of["DROP","DELETE","UPDATE","INSERT","ALTER","CREATE"])r.includes(e)&&t.push(`${e} operations are not allowed in demo mode`);return{isValid:0===t.length,errors:t}}}let eE=eC.getInstance();function eS({code:e,language:t,roomId:r,onExecutionStart:i,onExecutionComplete:l}){var c;let{user:d}=(0,n.aC)(),{currentRoom:u}=(0,o.N)(),[m,h]=(0,s.useState)(!1),[p,x]=(0,s.useState)(null),[g,y]=(0,s.useState)(null),[f,b]=(0,s.useState)(""),[v,j]=(0,s.useState)("output"),[w,D]=(0,s.useState)([]),[N,k]=(0,s.useState)(!1),C=[{id:"output",label:"Output",icon:X},{id:"input",label:"Input",icon:K},{id:"debug",label:"Debug",icon:ee},{id:"history",label:"History",icon:et}],E=new Set(["python","java","cpp"]).has(t),S=(0,s.useCallback)(async()=>{if(d&&u&&e.trim()){h(!0),y({isExecuting:!0,progress:0,currentStep:"Validating code...",estimatedTime:5}),i?.();try{let a=eE.validateCodeSyntax(e,t);if(!a.isValid){let r={success:!1,error:a.errors.join("\n"),status:"compilation_error",timestamp:new Date,language:t,codeSize:e.length};x(r),D(e=>[r,...e.slice(0,9)]),l?.(r);return}let s=await eE.executeCode({code:e,language:t,input:f.trim(),roomId:r,userId:d.id});x(s),D(e=>[s,...e.slice(0,9)]),l?.(s),"success"===s.status?y({isExecuting:!1,progress:100,currentStep:"Execution completed successfully",estimatedTime:0}):y({isExecuting:!1,progress:100,currentStep:`Execution failed: ${s.status}`,estimatedTime:0})}catch(a){let r={success:!1,error:a instanceof Error?a.message:"Execution failed",status:"system_error",timestamp:new Date,language:t,codeSize:e.length};x(r),D(e=>[r,...e.slice(0,9)]),l?.(r)}finally{h(!1),setTimeout(()=>y(null),3e3)}}},[e,t,f,r,d,u,i,l]),M=(0,s.useCallback)(()=>{u&&(eE.cancelRoomExecutions(u.id),h(!1),y(null))},[u]),z=(0,s.useCallback)(()=>{x(null),D([])},[]),R=(0,s.useCallback)(()=>{p?.output&&navigator.clipboard.writeText(p.output)},[p]),O=(0,s.useCallback)(()=>{if(p?.output){let e=new Blob([p.output],{type:"text/plain"}),r=URL.createObjectURL(e),a=document.createElement("a");a.href=r,a.download=`output-${t}.txt`,a.click(),URL.revokeObjectURL(r)}},[p,t]),A=e=>{switch(e){case"success":return a.jsx(er.Z,{className:"w-4 h-4 text-green-500"});case"compilation_error":return a.jsx(ea,{className:"w-4 h-4 text-red-500"});case"runtime_error":return a.jsx(ee,{className:"w-4 h-4 text-orange-500"});case"timeout":return a.jsx(es.Z,{className:"w-4 h-4 text-yellow-500"});case"memory_limit":return a.jsx(ei,{className:"w-4 h-4 text-purple-500"});default:return a.jsx(ea,{className:"w-4 h-4 text-gray-500"})}},P=e=>{switch(e){case"success":return"Execution Successful";case"compilation_error":return"Compilation Error";case"runtime_error":return"Runtime Error";case"timeout":return"Execution Timeout";case"memory_limit":return"Memory Limit Exceeded";default:return"System Error"}},I=e=>e<1e3?`${e}ms`:`${(e/1e3).toFixed(2)}s`;return(0,a.jsxs)(Q.Zb,{className:"h-full flex flex-col",children:[a.jsx(Q.Ol,{className:"pb-3",children:(0,a.jsxs)(Q.ll,{className:"flex items-center justify-between text-lg",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx(X,{className:"w-5 h-5"}),a.jsx("span",{children:"Code Execution"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsxs)(J.z,{onClick:S,disabled:m||!e.trim(),size:"lg",className:"bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 text-white font-semibold px-8 py-3 h-12 text-base shadow-lg hover:shadow-xl transition-all duration-200 transform hover:scale-105 disabled:transform-none disabled:opacity-50",children:[m?a.jsx(en,{className:"w-5 h-5 animate-spin mr-3"}):a.jsx(eo.Z,{className:"w-5 h-5 mr-3"}),m?"Running...":"▶ Run Code"]}),m&&(0,a.jsxs)(J.z,{onClick:M,variant:"outline",size:"lg",className:"text-red-600 border-red-200 hover:bg-red-50 h-12 px-6",children:[a.jsx(el,{className:"w-5 h-5 mr-2"}),"Stop"]})]})]})}),(0,a.jsxs)(Q.aY,{className:"flex-1 flex flex-col space-y-4",children:[a.jsx(eN,{children:g&&(0,a.jsxs)(ek.E.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"p-3 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx(en,{className:"w-4 h-4 animate-spin text-blue-600"}),a.jsx("span",{className:"text-sm text-blue-800 dark:text-blue-200",children:g.currentStep})]}),g.estimatedTime&&g.estimatedTime>0&&(0,a.jsxs)("span",{className:"text-xs text-blue-600 dark:text-blue-400",children:["~",g.estimatedTime,"s"]})]}),void 0!==g.progress&&a.jsx("div",{className:"mt-2 w-full bg-blue-200 dark:bg-blue-800 rounded-full h-2",children:a.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${g.progress}%`}})})]})}),E&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Input (stdin)"}),(0,a.jsxs)(J.z,{variant:"ghost",size:"sm",onClick:()=>k(!N),className:"h-6 px-2 text-xs",children:[N?"Hide":"Show"," Input"]})]}),N&&a.jsx("textarea",{value:f,onChange:e=>b(e.target.value),placeholder:"Enter input for your program...",className:"w-full p-3 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 font-mono text-sm resize-none",rows:3})]}),a.jsx("div",{className:"flex space-x-1 border-b border-gray-200 dark:border-gray-700",children:C.map(e=>(0,a.jsxs)("button",{onClick:()=>j(e.id),className:`px-3 py-2 text-sm font-medium rounded-t-md transition-colors flex items-center space-x-2 ${v===e.id?"bg-blue-100 text-blue-700 dark:bg-blue-900/20 dark:text-blue-400 border-b-2 border-blue-500":"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200"}`,children:[a.jsx(e.icon,{className:"w-4 h-4"}),a.jsx("span",{children:e.label})]},e.id))}),(0,a.jsxs)("div",{className:"flex-1 overflow-hidden",children:["output"===v&&a.jsx("div",{className:"h-full flex flex-col",children:p?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 rounded-t-lg border-b border-gray-200 dark:border-gray-700",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[A(p.status),a.jsx("span",{className:`text-sm font-medium px-2 py-1 rounded border ${(e=>{switch(e){case"success":return"border-green-200 bg-green-50 text-green-800 dark:border-green-800 dark:bg-green-900/20 dark:text-green-400";case"compilation_error":return"border-red-200 bg-red-50 text-red-800 dark:border-red-800 dark:bg-red-900/20 dark:text-red-400";case"runtime_error":return"border-orange-200 bg-orange-50 text-orange-800 dark:border-orange-800 dark:bg-orange-900/20 dark:text-orange-400";case"timeout":return"border-yellow-200 bg-yellow-50 text-yellow-800 dark:border-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-400";case"memory_limit":return"border-purple-200 bg-purple-50 text-purple-800 dark:border-purple-800 dark:bg-purple-900/20 dark:text-purple-400";default:return"border-gray-200 bg-gray-50 text-gray-800 dark:border-gray-800 dark:bg-gray-900/20 dark:text-gray-400"}})(p.status)}`,children:P(p.status)})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-4 text-xs text-gray-500 dark:text-gray-400",children:[p.executionTime&&(0,a.jsxs)("span",{className:"flex items-center space-x-1",children:[a.jsx(es.Z,{className:"w-3 h-3"}),a.jsx("span",{children:I(p.executionTime)})]}),p.memoryUsed&&(0,a.jsxs)("span",{className:"flex items-center space-x-1",children:[a.jsx(ei,{className:"w-3 h-3"}),a.jsx("span",{children:(c=p.memoryUsed)<1024?`${c} KB`:`${(c/1024).toFixed(2)} MB`})]}),p.compilationTime&&(0,a.jsxs)("span",{className:"flex items-center space-x-1",children:[a.jsx(ec,{className:"w-3 h-3"}),a.jsx("span",{children:I(p.compilationTime)})]})]})]}),a.jsx("div",{className:"flex-1 overflow-auto p-3 bg-gray-900 text-green-400 font-mono text-sm",children:p.success?a.jsx("pre",{className:"whitespace-pre-wrap",children:p.output}):a.jsx("pre",{className:"whitespace-pre-wrap text-red-400",children:p.error})}),(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 rounded-b-lg border-t border-gray-200 dark:border-gray-700",children:[a.jsx("div",{className:"flex items-center space-x-2",children:(0,a.jsxs)(J.z,{onClick:z,variant:"outline",size:"sm",className:"h-8 px-3 text-xs",children:[a.jsx(et,{className:"w-3 h-3 mr-1"}),"Clear"]})}),a.jsx("div",{className:"flex items-center space-x-2",children:p.output&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(J.z,{onClick:R,variant:"outline",size:"sm",className:"h-8 px-3 text-xs",children:[a.jsx(ed.Z,{className:"w-3 h-3 mr-1"}),"Copy"]}),(0,a.jsxs)(J.z,{onClick:O,variant:"outline",size:"sm",className:"h-8 px-3 text-xs",children:[a.jsx(eu,{className:"w-3 h-3 mr-1"}),"Download"]})]})})]})]}):a.jsx("div",{className:"h-full flex items-center justify-center text-gray-500 dark:text-gray-400",children:(0,a.jsxs)("div",{className:"text-center",children:[a.jsx(X,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),a.jsx("p",{className:"text-sm",children:"No output yet. Run your code to see results."})]})})}),"input"===v&&a.jsx("div",{className:"h-full p-3",children:(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Standard Input (stdin)"}),a.jsx("textarea",{value:f,onChange:e=>b(e.target.value),placeholder:"Enter input that your program will read from stdin...",className:"w-full h-32 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 font-mono text-sm resize-none"}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"This input will be provided to your program when it runs."})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Command Line Arguments"}),a.jsx(G.I,{placeholder:"arg1 arg2 arg3",className:"font-mono text-sm"}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Space-separated command line arguments."})]})]})}),"debug"===v&&a.jsx("div",{className:"h-full p-3",children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[a.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Code Analysis"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-2 bg-gray-50 dark:bg-gray-800 rounded",children:[a.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Code Size"}),(0,a.jsxs)("span",{className:"text-sm font-medium",children:[e.length," characters"]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between p-2 bg-gray-50 dark:bg-gray-800 rounded",children:[a.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Language"}),a.jsx("span",{className:"text-sm font-medium capitalize",children:t})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between p-2 bg-gray-50 dark:bg-gray-800 rounded",children:[a.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Lines"}),a.jsx("span",{className:"text-sm font-medium",children:e.split("\n").length})]})]})]}),(0,a.jsxs)("div",{children:[a.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Execution Settings"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-2 bg-gray-50 dark:bg-gray-800 rounded",children:[a.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Timeout"}),a.jsx("span",{className:"text-sm font-medium",children:"10 seconds"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between p-2 bg-gray-50 dark:bg-gray-800 rounded",children:[a.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Memory Limit"}),a.jsx("span",{className:"text-sm font-medium",children:"256 MB"})]})]})]})]})}),"history"===v&&a.jsx("div",{className:"h-full p-3",children:(0,a.jsxs)("div",{className:"space-y-3",children:[a.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Recent Executions"}),w.length>0?a.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:w.map((e,t)=>(0,a.jsxs)("div",{className:`p-3 rounded-lg border cursor-pointer transition-colors ${e.success?"border-green-200 bg-green-50 dark:border-green-800 dark:bg-green-900/20":"border-red-200 bg-red-50 dark:border-red-800 dark:bg-red-900/20"}`,onClick:()=>x(e),children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[A(e.status),a.jsx("span",{className:"text-sm font-medium",children:P(e.status)})]}),a.jsx("span",{className:"text-xs text-gray-500",children:e.timestamp.toLocaleTimeString()})]}),a.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:e.output?e.output.substring(0,100)+"...":e.error?.substring(0,100)+"..."})]},t))}):(0,a.jsxs)("div",{className:"text-center text-gray-500 dark:text-gray-400 py-8",children:[a.jsx(et,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),a.jsx("p",{className:"text-sm",children:"No execution history yet."})]})]})})]})]})]})}var eM=r(9345),ez=r(5359),eR=r(7282),eO=r(1175);let eA=(0,Y.Z)("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);function eP({onRunCode:e,isExecuting:t=!1,currentLanguage:r="javascript",onLeaveRoom:i}){let{user:l,logout:c}=(0,n.aC)(),{currentRoom:d}=(0,o.N)(),[u,m]=(0,s.useState)(!1),[h,p]=(0,s.useState)(!1),x=(0,s.useRef)(null),g=async()=>{if(d?.id)try{await navigator.clipboard.writeText(d.id),p(!0),W.ZP.success("Room ID copied to clipboard!"),setTimeout(()=>p(!1),2e3)}catch(e){W.ZP.error("Failed to copy room ID")}},y=d?.users?.length||0,f=d?.isPublic||!1,b={javascript:{name:"JavaScript",icon:"⚡",color:"bg-yellow-500"},python:{name:"Python",icon:"\uD83D\uDC0D",color:"bg-green-500"},java:{name:"Java",icon:"☕",color:"bg-orange-500"},cpp:{name:"C++",icon:"⚙️",color:"bg-blue-500"}}[r]||{name:r,icon:"\uD83D\uDCDD",color:"bg-gray-500"};return a.jsx(ek.E.header,{className:"navbar-fixed bg-gray-900 shadow-lg border-b border-gray-700 z-50 h-16",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.3},children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-6",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-purple-600 rounded-xl flex items-center justify-center",children:a.jsx(eM.Z,{className:"w-6 h-6 text-white"})}),a.jsx("span",{className:"text-xl font-bold text-white",children:"CodeMitra"})]}),(0,a.jsxs)("div",{className:"flex flex-col",children:[a.jsx("h1",{className:"text-lg font-semibold text-white",children:d?.name||"Loading Room..."}),(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsxs)("p",{className:"text-sm text-gray-300",children:[f?"Public Room":"Private Room"," • ",y," users"]}),(0,a.jsxs)("span",{className:"text-xs text-gray-400",children:["ID: ",d?.id||"..."]}),a.jsx(J.z,{variant:"outline",size:"sm",onClick:g,className:"h-6 px-2 bg-gray-800 border-gray-600 text-white hover:bg-gray-700 hover:border-gray-500",children:h?a.jsx(ez.Z,{className:"w-3 h-3"}):a.jsx(ed.Z,{className:"w-3 h-3"})})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 px-3 py-1 bg-gray-800 rounded-lg border border-gray-600",children:[a.jsx("span",{className:"text-lg",children:b.icon}),a.jsx("span",{className:"text-sm font-medium text-white",children:b.name}),a.jsx("div",{className:`w-2 h-2 rounded-full ${b.color}`})]})]}),a.jsx("div",{className:"flex items-center",children:(0,a.jsxs)(J.z,{onClick:e,disabled:t,size:"lg",className:"bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 text-white font-semibold px-8 py-3 h-12 text-base shadow-lg hover:shadow-xl transition-all duration-200 transform hover:scale-105 disabled:transform-none disabled:opacity-50",children:[t?a.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin mr-3"}):a.jsx(eo.Z,{className:"w-5 h-5 mr-3"}),t?"Running...":"▶ RUN CODE"]})}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)(J.z,{variant:"outline",size:"sm",onClick:i,className:"bg-red-600 border-red-500 text-white hover:bg-red-700 hover:border-red-600",children:[a.jsx(eR.Z,{className:"w-4 h-4 mr-2"}),"Leave Room"]}),(0,a.jsxs)("div",{className:"relative",ref:x,children:[(0,a.jsxs)(J.z,{variant:"outline",size:"sm",onClick:()=>m(!u),className:"bg-gray-800 border-gray-600 text-white hover:bg-gray-700 hover:border-gray-500",children:[a.jsx(eO.Z,{className:"w-4 h-4 mr-2"}),(0,a.jsxs)("span",{children:[y," users"]}),a.jsx(eA,{className:`w-4 h-4 ml-2 transition-transform duration-200 ${u?"rotate-180":""}`})]}),a.jsx(eN,{children:u&&(0,a.jsxs)(ek.E.div,{initial:{opacity:0,y:-10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.95},transition:{duration:.2},className:"absolute right-0 mt-2 w-64 bg-gray-800 border border-gray-600 rounded-lg shadow-xl z-50",children:[a.jsx("div",{className:"p-3 border-b border-gray-600",children:a.jsx("h3",{className:"text-sm font-medium text-white",children:"Connected Users"})}),a.jsx("div",{className:"max-h-48 overflow-y-auto",children:d?.users&&d.users.length>0?d.users.map(e=>(0,a.jsxs)("div",{className:"flex items-center space-x-3 p-3 hover:bg-gray-700 transition-colors duration-150",children:[a.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-sm font-medium text-white",children:e.user.name?.charAt(0).toUpperCase()||"U"})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-medium text-white truncate",children:e.user.name||"Anonymous User"}),a.jsx("p",{className:"text-xs text-gray-400 truncate",children:e.user.email||"No email"})]}),a.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"})]},e.id)):a.jsx("div",{className:"p-3 text-center text-gray-400",children:a.jsx("p",{className:"text-sm",children:"No users connected"})})}),l&&(0,a.jsxs)(a.Fragment,{children:[a.jsx("div",{className:"border-t border-gray-600"}),(0,a.jsxs)("div",{className:"p-3",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3 p-2 hover:bg-gray-700 rounded-md transition-colors duration-150",children:[a.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-red-500 to-pink-600 rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-sm font-medium text-white",children:l.name?.charAt(0).toUpperCase()||l.email?.charAt(0).toUpperCase()||"U"})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-medium text-white truncate",children:l.name||"You"}),a.jsx("p",{className:"text-xs text-gray-400 truncate",children:l.email||"No email"})]})]}),(0,a.jsxs)(J.z,{onClick:()=>{c(),m(!1)},variant:"outline",size:"sm",className:"w-full mt-2 bg-red-600 border-red-500 text-white hover:bg-red-700 hover:border-red-600",children:[a.jsx(eR.Z,{className:"w-4 h-4 mr-2"}),"Logout"]})]})]})]})})]})]})]})})})}let eI=(0,Y.Z)("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]),eT=(0,Y.Z)("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),eL=(0,Y.Z)("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]),e$=(0,Y.Z)("GripHorizontal",[["circle",{cx:"12",cy:"9",r:"1",key:"124mty"}],["circle",{cx:"19",cy:"9",r:"1",key:"1ruzo2"}],["circle",{cx:"5",cy:"9",r:"1",key:"1a8b28"}],["circle",{cx:"12",cy:"15",r:"1",key:"1e56xg"}],["circle",{cx:"19",cy:"15",r:"1",key:"1a92ep"}],["circle",{cx:"5",cy:"15",r:"1",key:"5r1jwy"}]]),eF={editor:{width:70,height:60},output:{width:30,height:40},chat:{width:30,height:30},video:{width:30,height:30}};function eZ({children:e,onLayoutChange:t,initialLayout:r}){let[i,n]=(0,s.useState)({...eF,...r}),[o,l]=(0,s.useState)(!1),[c,d]=(0,s.useState)(null),[u,m]=(0,s.useState)({x:0,y:0}),h=(0,s.useRef)(null),p=(0,s.useCallback)(e=>{try{localStorage.setItem("codemitra-layout",JSON.stringify(e))}catch(e){console.warn("Failed to save layout to localStorage:",e)}},[]);(0,s.useCallback)(()=>{try{let e=localStorage.getItem("codemitra-layout");if(e){let r=JSON.parse(e);n(r),t?.(r)}}catch(e){console.warn("Failed to load layout from localStorage:",e)}},[t]);let x=(0,s.useCallback)(()=>{n(eF),t?.(eF),p(eF)},[t,p]),g=(0,s.useCallback)(()=>{let e={editor:{width:70,height:60},output:{width:30,height:40},chat:{width:30,height:30},video:{width:30,height:30}};n(e),t?.(e),p(e)},[t,p]),y=(0,s.useCallback)((e,t)=>{t.preventDefault(),l(!0),d(e),m({x:t.clientX,y:t.clientY})},[]);return(0,s.useCallback)(e=>{if(!o||!h.current)return;let t=h.current.getBoundingClientRect(),r=e.clientX-u.x,a=e.clientY-u.y;if("horizontal"===c){let e=r/t.width*100;n(t=>{let r={...t},a=Math.max(15,Math.min(85,t.editor.width+e)),s=100-a;return r.editor.width=a,r.output.width=s,r.chat.width=s,r.video.width=s,r})}else if("vertical"===c){let e=a/t.height*100;n(t=>{let r={...t},a=Math.max(15,Math.min(85,t.editor.height+e)),s=(100-a)/(t.output.height+t.chat.height+t.video.height);return r.editor.height=a,r.output.height=t.output.height*s,r.chat.height=t.chat.height*s,r.video.height=t.video.height*s,r})}},[o,c,u]),(0,s.useCallback)(()=>{o&&(l(!1),d(null),p(i),t?.(i))},[o,i,p,t]),(0,s.useCallback)((e,t)=>{if(!h.current)return;let r=t/h.current.getBoundingClientRect().height*100;n(t=>{let a={...t},s=100-t.editor.height,i=["output","chat","video"],n=i.map(e=>t[e].height);n.reduce((e,t)=>e+t,0);let o=i.indexOf(e),l=Math.max(15,Math.min(85,n[o]+r)),c=i.filter((e,t)=>t!==o),d=c.map(e=>t[e].height).reduce((e,t)=>e+t,0);if(d>0){let e=(s-l)/d;c.forEach(r=>{a[r].height=t[r].height*e})}return a[e].height=l,a})},[]),(0,a.jsxs)("div",{ref:h,className:"h-full w-full bg-gray-900 relative overflow-hidden",style:{cursor:o?"horizontal"===c?"ew-resize":"ns-resize":"default"},children:[(0,a.jsxs)("div",{className:"absolute top-4 right-4 z-50 flex items-center space-x-2",children:[a.jsx(J.z,{variant:"outline",size:"sm",onClick:g,className:"bg-gray-800 border-gray-600 text-white hover:bg-gray-700",title:"Auto-fit Layout",children:a.jsx(eI,{className:"w-4 h-4"})}),a.jsx(J.z,{variant:"outline",size:"sm",onClick:x,className:"bg-gray-800 border-gray-600 text-white hover:bg-gray-700",title:"Reset to Default",children:a.jsx(et,{className:"w-4 h-4"})}),a.jsx(J.z,{variant:"outline",size:"sm",onClick:()=>p(i),className:"bg-gray-800 border-gray-600 text-white hover:bg-gray-700",title:"Save Layout",children:a.jsx(eT,{className:"w-4 h-4"})})]}),(0,a.jsxs)("div",{className:"h-full flex",children:[a.jsx("div",{className:"bg-gray-800 border-r border-gray-700 relative",style:{width:`${i.editor.width}%`},children:e.editor}),a.jsx("div",{className:"w-1 bg-gray-600 hover:bg-blue-500 cursor-ew-resize relative group",onMouseDown:e=>y("horizontal",e),children:a.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:a.jsx(eL,{className:"w-4 h-4 text-gray-400 group-hover:text-blue-400 opacity-0 group-hover:opacity-100 transition-opacity"})})}),(0,a.jsxs)("div",{className:"flex-1 flex flex-col",style:{width:`${100-i.editor.width}%`},children:[a.jsx("div",{className:"bg-gray-800 border-b border-gray-700 relative",style:{height:`${i.output.height}%`},children:e.output}),a.jsx("div",{className:"h-1 bg-gray-600 hover:bg-blue-500 cursor-ns-resize relative group",onMouseDown:e=>y("vertical",e),children:a.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:a.jsx(e$,{className:"w-4 h-4 text-gray-400 group-hover:text-blue-400 opacity-0 group-hover:opacity-100 transition-opacity"})})}),a.jsx("div",{className:"bg-gray-800 border-b border-gray-700 relative",style:{height:`${i.chat.height}%`},children:e.chat}),a.jsx("div",{className:"h-1 bg-gray-600 hover:bg-blue-500 cursor-ns-resize relative group",onMouseDown:e=>y("vertical",e),children:a.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:a.jsx(e$,{className:"w-4 h-4 text-gray-400 group-hover:text-blue-400 opacity-0 group-hover:opacity-100 transition-opacity"})})}),a.jsx("div",{className:"bg-gray-800 flex-1 relative",style:{height:`${i.video.height}%`},children:e.video})]})]}),o&&a.jsx(ek.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-20 z-40 pointer-events-none"})]})}var eV=r(4767),eq=r(8004);let e_=(0,Y.Z)("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]),eU=(0,Y.Z)("Tablet",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["line",{x1:"12",x2:"12.01",y1:"18",y2:"18",key:"1dp563"}]]),eB=(0,Y.Z)("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);var eW=r(6437);let eH=[{id:"coding-focus",name:"Coding Focus",description:"Maximize editor space for intensive coding",icon:a.jsx(eM.Z,{className:"w-4 h-4"}),layout:{editor:{width:80,height:70},output:{width:20,height:50},chat:{width:20,height:25},video:{width:20,height:25}},category:"workflow"},{id:"debugging",name:"Debugging",description:"Large output panel for debugging and logs",icon:a.jsx(X,{className:"w-4 h-4"}),layout:{editor:{width:65,height:60},output:{width:35,height:60},chat:{width:35,height:20},video:{width:35,height:20}},category:"workflow"},{id:"collaboration",name:"Collaboration",description:"Balanced layout for team coding",icon:a.jsx(eV.Z,{className:"w-4 h-4"}),layout:{editor:{width:70,height:60},output:{width:30,height:40},chat:{width:30,height:30},video:{width:30,height:30}},category:"workflow"},{id:"presentation",name:"Presentation",description:"Large video panel for screen sharing",icon:a.jsx(eq.Z,{className:"w-4 h-4"}),layout:{editor:{width:60,height:50},output:{width:40,height:30},chat:{width:40,height:20},video:{width:40,height:50}},category:"workflow"},{id:"desktop",name:"Desktop",description:"Optimized for large screens",icon:a.jsx(e_,{className:"w-4 h-4"}),layout:{editor:{width:70,height:60},output:{width:30,height:40},chat:{width:30,height:30},video:{width:30,height:30}},category:"device"},{id:"tablet",name:"Tablet",description:"Optimized for medium screens",icon:a.jsx(eU,{className:"w-4 h-4"}),layout:{editor:{width:75,height:65},output:{width:25,height:45},chat:{width:25,height:25},video:{width:25,height:30}},category:"device"},{id:"mobile",name:"Mobile",description:"Optimized for small screens",icon:a.jsx(eB,{className:"w-4 h-4"}),layout:{editor:{width:85,height:70},output:{width:15,height:50},chat:{width:15,height:25},video:{width:15,height:25}},category:"device"}];function eJ({currentLayout:e,onLayoutChange:t,onLoadPreset:r}){let[i,n]=(0,s.useState)(!1),[o,l]=(0,s.useState)("all"),c=e=>{t(e.layout),r?.(e),n(!1)},d=eH.filter(e=>"all"===o||e.category===o),u=[{id:"all",name:"All",count:eH.length},{id:"workflow",name:"Workflow",count:eH.filter(e=>"workflow"===e.category).length},{id:"device",name:"Device",count:eH.filter(e=>"device"===e.category).length}];return(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)(J.z,{variant:"outline",size:"sm",onClick:()=>n(!i),className:"bg-gray-800 border-gray-600 text-white hover:bg-gray-700",children:[a.jsx(eW.Z,{className:"w-4 h-4 mr-2"}),"Layout Presets",a.jsx(eA,{className:`w-4 h-4 ml-2 transition-transform duration-200 ${i?"rotate-180":""}`})]}),a.jsx(eN,{children:i&&(0,a.jsxs)(ek.E.div,{initial:{opacity:0,y:-10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.95},transition:{duration:.2},className:"absolute top-full right-0 mt-2 w-80 bg-gray-800 border border-gray-600 rounded-lg shadow-xl z-50",children:[a.jsx("div",{className:"p-3 border-b border-gray-600",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[a.jsx("h3",{className:"text-sm font-medium text-white",children:"Layout Presets"}),a.jsx("span",{className:"text-xs text-gray-400",children:"Quick layout switching"})]})}),a.jsx("div",{className:"flex border-b border-gray-600",children:u.map(e=>(0,a.jsxs)("button",{onClick:()=>l(e.id),className:`flex-1 px-3 py-2 text-xs font-medium transition-colors duration-200 ${o===e.id?"bg-blue-600 text-white":"text-gray-400 hover:text-white hover:bg-gray-700"}`,children:[e.name," (",e.count,")"]},e.id))}),a.jsx("div",{className:"max-h-64 overflow-y-auto",children:d.map(e=>(0,a.jsxs)("div",{className:"p-3 hover:bg-gray-700 transition-colors duration-150 cursor-pointer border-b border-gray-600 last:border-b-0",onClick:()=>c(e),children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"text-blue-400",children:e.icon}),(0,a.jsxs)("div",{children:[a.jsx("h4",{className:"text-sm font-medium text-white",children:e.name}),a.jsx("p",{className:"text-xs text-gray-400",children:e.description})]})]}),(0,a.jsxs)("div",{className:"mt-2 flex space-x-1",children:[a.jsx("div",{className:"h-2 bg-blue-500 rounded",style:{width:`${e.layout.editor.width}%`},title:`Editor: ${e.layout.editor.width}% \xd7 ${e.layout.editor.height}%`}),a.jsx("div",{className:"h-2 bg-green-500 rounded",style:{width:`${e.layout.output.width}%`},title:`Output: ${e.layout.output.width}% \xd7 ${e.layout.output.height}%`}),a.jsx("div",{className:"h-2 bg-purple-500 rounded",style:{width:`${e.layout.chat.width}%`},title:`Chat: ${e.layout.chat.width}% \xd7 ${e.layout.chat.height}%`}),a.jsx("div",{className:"h-2 bg-orange-500 rounded",style:{width:`${e.layout.video.width}%`},title:`Video: ${e.layout.video.width}% \xd7 ${e.layout.video.height}%`})]})]},e.id))})]})})]})}let eG=[{id:"javascript",name:"JavaScript",extension:"js",category:"basic",description:"Basic JavaScript function with console output",code:`// Welcome to CodeMitra JavaScript Editor!
// This is a basic JavaScript template to get you started

function greetUser(name) {
  return \`Hello, \${name}! Welcome to collaborative coding.\`;
}

// Example usage
const userName = "Developer";
const message = greetUser(userName);
console.log(message);

// You can add more functions and logic here
function calculateSum(a, b) {
  return a + b;
}

console.log("Sum of 5 + 3 =", calculateSum(5, 3));

// Try running this code to see the output!`},{id:"python",name:"Python",extension:"py",category:"basic",description:"Basic Python function with print output",code:`# Welcome to CodeMitra Python Editor!
# This is a basic Python template to get you started

def greet_user(name):
    return f"Hello, {name}! Welcome to collaborative coding."

# Example usage
user_name = "Developer"
message = greet_user(user_name)
print(message)

# You can add more functions and logic here
def calculate_sum(a, b):
    return a + b

print("Sum of 5 + 3 =", calculate_sum(5, 3))

# List comprehension example
numbers = [1, 2, 3, 4, 5]
squares = [x**2 for x in numbers]
print("Squares:", squares)

# Try running this code to see the output!`},{id:"java",name:"Java",extension:"java",category:"basic",description:"Basic Java class with main method",code:`// Welcome to CodeMitra Java Editor!
// This is a basic Java template to get you started

public class Main {
    public static void main(String[] args) {
        System.out.println("Hello, Developer! Welcome to collaborative coding.");
        
        // Example method calls
        String message = greetUser("Developer");
        System.out.println(message);
        
        int result = calculateSum(5, 3);
        System.out.println("Sum of 5 + 3 = " + result);
        
        // Array example
        int[] numbers = {1, 2, 3, 4, 5};
        System.out.println("Array elements:");
        for (int num : numbers) {
            System.out.print(num + " ");
        }
        System.out.println();
    }
    
    public static String greetUser(String name) {
        return "Hello, " + name + "! Welcome to collaborative coding.";
    }
    
    public static int calculateSum(int a, int b) {
        return a + b;
    }
}`},{id:"cpp",name:"C++",extension:"cpp",category:"basic",description:"Basic C++ program with main function",code:`// Welcome to CodeMitra C++ Editor!
// This is a basic C++ template to get you started

#include <iostream>
#include <vector>
#include <string>
using namespace std;

// Function declarations
string greetUser(string name);
int calculateSum(int a, int b);
void printArray(vector<int>& arr);

int main() {
    cout << "Hello, Developer! Welcome to collaborative coding." << endl;
    
    // Example method calls
    string message = greetUser("Developer");
    cout << message << endl;
    
    int result = calculateSum(5, 3);
    cout << "Sum of 5 + 3 = " << result << endl;
    
    // Vector example
    vector<int> numbers = {1, 2, 3, 4, 5};
    cout << "Vector elements: ";
    printArray(numbers);
    
    return 0;
}

string greetUser(string name) {
    return "Hello, " + name + "! Welcome to collaborative coding.";
}

int calculateSum(int a, int b) {
    return a + b;
}

void printArray(vector<int>& arr) {
    for (int num : arr) {
        cout << num << " ";
    }
    cout << endl;
}`}];function eQ(e){return eG.find(t=>t.id===e)||null}var eY=globalThis?.document?s.useLayoutEffect:()=>{};function eX(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}r(5408);var eK=Symbol("radix.slottable");function e0(e){return s.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===eK}var e1=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,t)=>{let r=function(e){let t=function(e){let t=s.forwardRef((e,t)=>{let{children:r,...a}=e;if(s.isValidElement(r)){let e,i;let n=(e=Object.getOwnPropertyDescriptor(r.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning?r.ref:(e=Object.getOwnPropertyDescriptor(r,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning?r.props.ref:r.props.ref||r.ref,o=function(e,t){let r={...t};for(let a in t){let s=e[a],i=t[a];/^on[A-Z]/.test(a)?s&&i?r[a]=(...e)=>{let t=i(...e);return s(...e),t}:s&&(r[a]=s):"style"===a?r[a]={...s,...i}:"className"===a&&(r[a]=[s,i].filter(Boolean).join(" "))}return{...e,...r}}(a,r.props);return r.type!==s.Fragment&&(o.ref=t?function(...e){return t=>{let r=!1,a=e.map(e=>{let a=eX(e,t);return r||"function"!=typeof a||(r=!0),a});if(r)return()=>{for(let t=0;t<a.length;t++){let r=a[t];"function"==typeof r?r():eX(e[t],null)}}}}(t,n):n),s.cloneElement(r,o)}return s.Children.count(r)>1?s.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}(e),r=s.forwardRef((e,r)=>{let{children:i,...n}=e,o=s.Children.toArray(i),l=o.find(e0);if(l){let e=l.props.children,i=o.map(t=>t!==l?t:s.Children.count(e)>1?s.Children.only(null):s.isValidElement(e)?e.props.children:null);return(0,a.jsx)(t,{...n,ref:r,children:s.isValidElement(e)?s.cloneElement(e,void 0,i):null})}return(0,a.jsx)(t,{...n,ref:r,children:i})});return r.displayName=`${e}.Slot`,r}(`Primitive.${t}`),i=s.forwardRef((e,s)=>{let{asChild:i,...n}=e,o=i?r:t;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,a.jsx)(o,{...n,ref:s})});return i.displayName=`Primitive.${t}`,{...e,[t]:i}},{}),e2=r(2873);function e3(){return()=>{}}var e8="Avatar",[e4,e5]=function(e,t=[]){let r=[],i=()=>{let t=r.map(e=>s.createContext(e));return function(r){let a=r?.[e]||t;return s.useMemo(()=>({[`__scope${e}`]:{...r,[e]:a}}),[r,a])}};return i.scopeName=e,[function(t,i){let n=s.createContext(i),o=r.length;r=[...r,i];let l=t=>{let{scope:r,children:i,...l}=t,c=r?.[e]?.[o]||n,d=s.useMemo(()=>l,Object.values(l));return(0,a.jsx)(c.Provider,{value:d,children:i})};return l.displayName=t+"Provider",[l,function(r,a){let l=a?.[e]?.[o]||n,c=s.useContext(l);if(c)return c;if(void 0!==i)return i;throw Error(`\`${r}\` must be used within \`${t}\``)}]},function(...e){let t=e[0];if(1===e.length)return t;let r=()=>{let r=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){let a=r.reduce((t,{useScope:r,scopeName:a})=>{let s=r(e)[`__scope${a}`];return{...t,...s}},{});return s.useMemo(()=>({[`__scope${t.scopeName}`]:a}),[a])}};return r.scopeName=t.scopeName,r}(i,...t)]}(e8),[e6,e7]=e4(e8),e9=s.forwardRef((e,t)=>{let{__scopeAvatar:r,...i}=e,[n,o]=s.useState("idle");return(0,a.jsx)(e6,{scope:r,imageLoadingStatus:n,onImageLoadingStatusChange:o,children:(0,a.jsx)(e1.span,{...i,ref:t})})});e9.displayName=e8;var te="AvatarImage",tt=s.forwardRef((e,t)=>{let{__scopeAvatar:r,src:i,onLoadingStatusChange:n=()=>{},...o}=e,l=e7(te,r),c=function(e,{referrerPolicy:t,crossOrigin:r}){let a=(0,e2.useSyncExternalStore)(e3,()=>!0,()=>!1),i=s.useRef(null),n=a?(i.current||(i.current=new window.Image),i.current):null,[o,l]=s.useState(()=>ts(n,e));return eY(()=>{l(ts(n,e))},[n,e]),eY(()=>{let e=e=>()=>{l(e)};if(!n)return;let a=e("loaded"),s=e("error");return n.addEventListener("load",a),n.addEventListener("error",s),t&&(n.referrerPolicy=t),"string"==typeof r&&(n.crossOrigin=r),()=>{n.removeEventListener("load",a),n.removeEventListener("error",s)}},[n,r,t]),o}(i,o),d=function(e){let t=s.useRef(e);return s.useEffect(()=>{t.current=e}),s.useMemo(()=>(...e)=>t.current?.(...e),[])}(e=>{n(e),l.onImageLoadingStatusChange(e)});return eY(()=>{"idle"!==c&&d(c)},[c,d]),"loaded"===c?(0,a.jsx)(e1.img,{...o,ref:t,src:i}):null});tt.displayName=te;var tr="AvatarFallback",ta=s.forwardRef((e,t)=>{let{__scopeAvatar:r,delayMs:i,...n}=e,o=e7(tr,r),[l,c]=s.useState(void 0===i);return s.useEffect(()=>{if(void 0!==i){let e=window.setTimeout(()=>c(!0),i);return()=>window.clearTimeout(e)}},[i]),l&&"loaded"!==o.imageLoadingStatus?(0,a.jsx)(e1.span,{...n,ref:t}):null});function ts(e,t){return e?t?(e.src!==t&&(e.src=t),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}ta.displayName=tr;var ti=r(3096);let tn=s.forwardRef(({className:e,...t},r)=>a.jsx(e9,{ref:r,className:(0,ti.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",e),...t}));tn.displayName=e9.displayName;let to=s.forwardRef(({className:e,...t},r)=>a.jsx(tt,{ref:r,className:(0,ti.cn)("aspect-square h-full w-full",e),...t}));to.displayName=tt.displayName;let tl=s.forwardRef(({className:e,...t},r)=>a.jsx(ta,{ref:r,className:(0,ti.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",e),...t}));tl.displayName=ta.displayName;let tc=(0,Y.Z)("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]),td=(0,Y.Z)("Smile",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]),tu=(0,Y.Z)("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);function tm({}){let{socket:e,isConnected:t}=(0,_.s)(),{user:r}=(0,n.aC)(),{currentRoom:i}=(0,o.N)(),[l,c]=(0,s.useState)([]),[d,u]=(0,s.useState)(""),[m,h]=(0,s.useState)([]),[p,x]=(0,s.useState)(!1),[g,y]=(0,s.useState)(!1),[f,b]=(0,s.useState)(!1),[v,j]=(0,s.useState)(!1),[w,D]=(0,s.useState)(""),[N,k]=(0,s.useState)("javascript"),[C,E]=(0,s.useState)(null),[S,M]=(0,s.useState)(!1),[z,R]=(0,s.useState)(0),O=(0,s.useRef)(null),A=(0,s.useRef)(),P=()=>{if(!d.trim()||!e||!t||!i)return;let a={id:`temp-${Date.now()}`,text:d.trim(),sender:{id:r?.id||"",name:r?.name||"Unknown",avatar:r?.avatar},timestamp:new Date,type:"text",status:"sending"};c(e=>[...e,a]),u(""),e.emit("chat:send-message",{roomId:i.id,content:a.text,type:"text"}),A.current&&clearTimeout(A.current),e.emit("chat:typing-stop",{roomId:i.id}),x(!1)},I=r=>{u(r),e&&t&&i&&(p||(x(!0),e.emit("chat:typing-start",{roomId:i.id})),A.current&&clearTimeout(A.current),A.current=setTimeout(()=>{x(!1),e.emit("chat:typing-stop",{roomId:i.id})},1e3))},T=async()=>{if(C&&e&&t&&i&&r)try{M(!0),R(0);let e=Math.ceil(C.size/1048576);for(let t=0;t<e;t++){await new Promise(e=>setTimeout(e,100));let r=(t+1)/e*100;R(r)}let t=`📎 ${C.name}`;u(t),P(),E(null),b(!1),R(0)}catch(e){console.error("File upload failed:",e),alert("File upload failed")}finally{M(!1)}},L=e=>{u(t=>t+e),y(!1)},$=e=>{switch(e){case"sending":return a.jsx("div",{className:"w-3 h-3 border-2 border-gray-300 border-t-blue-500 rounded-full animate-spin"});case"sent":return a.jsx("div",{className:"w-3 h-3 border-2 border-gray-300 border-t-blue-500 rounded-full"});case"delivered":return a.jsx("div",{className:"w-3 h-3 border-2 border-blue-500 rounded-full"});case"read":return a.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full"});default:return null}},F=e=>e.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});return(0,a.jsxs)("div",{className:"flex flex-col h-full",children:[(0,a.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 custom-scrollbar",children:[a.jsx(eN,{children:l.map(e=>a.jsx(ek.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},className:`flex ${e.sender.id===r?.id?"justify-end":"justify-start"}`,children:a.jsx("div",{className:`max-w-[80%] ${e.sender.id===r?.id?"order-2":"order-1"}`,children:(0,a.jsxs)("div",{className:`flex items-end space-x-2 ${e.sender.id===r?.id?"flex-row-reverse space-x-reverse":""}`,children:[e.sender.id!==r?.id&&(0,a.jsxs)(tn,{className:"w-6 h-6",children:[a.jsx(to,{src:e.sender.avatar}),a.jsx(tl,{className:"text-xs",children:e.sender.name.charAt(0).toUpperCase()})]}),(0,a.jsxs)("div",{className:`px-3 py-2 rounded-lg ${e.sender.id===r?.id?"bg-blue-600 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-900 dark:text-gray-100"}`,children:[e.sender.id!==r?.id&&a.jsx("div",{className:"text-xs font-medium mb-1 opacity-75",children:e.sender.name}),"code"===e.type?a.jsx("pre",{className:"text-sm whitespace-pre-wrap font-mono",children:a.jsx("code",{children:e.text})}):a.jsx("div",{className:"text-sm",children:e.text}),(0,a.jsxs)("div",{className:`flex items-center justify-between mt-1 text-xs opacity-75 ${e.sender.id===r?.id?"text-blue-100":"text-gray-500"}`,children:[a.jsx("span",{children:F(e.timestamp)}),e.sender.id===r?.id&&$(e.status)]})]})]})})},e.id))}),m.filter(e=>e.isTyping&&e.id!==r?.id).map(e=>a.jsx(ek.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"flex justify-start",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2 px-3 py-2 bg-gray-100 dark:bg-gray-700 rounded-lg",children:[(0,a.jsxs)(tn,{className:"w-6 h-6",children:[a.jsx(to,{src:e.avatar}),a.jsx(tl,{className:"text-xs",children:e.name.charAt(0).toUpperCase()})]}),(0,a.jsxs)("div",{className:"flex space-x-1",children:[a.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"}),a.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),a.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})]})},e.id)),a.jsx("div",{ref:O})]}),v&&(0,a.jsxs)(ek.E.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"border-t border-gray-200 dark:border-gray-700 p-3 space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsxs)("select",{value:N,onChange:e=>k(e.target.value),className:"px-2 py-1 text-xs border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-800",children:[a.jsx("option",{value:"javascript",children:"JavaScript"}),a.jsx("option",{value:"python",children:"Python"}),a.jsx("option",{value:"java",children:"Java"}),a.jsx("option",{value:"cpp",children:"C++"})]}),a.jsx(J.z,{size:"sm",onClick:()=>{w.trim()&&(u(`\`\`\`${N}
${w}
\`\`\``),P(),D(""),j(!1))},className:"px-3 py-1 text-xs",children:"Send Code"}),a.jsx(J.z,{size:"sm",variant:"outline",onClick:()=>j(!1),className:"px-3 py-1 text-xs",children:"Cancel"})]}),a.jsx("textarea",{value:w,onChange:e=>D(e.target.value),placeholder:"Enter your code here...",className:"w-full h-20 px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-800 font-mono resize-none"})]}),(0,a.jsxs)("div",{className:"border-t border-gray-200 dark:border-gray-700 p-3",children:[(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),d.trim()&&P()},className:"flex items-center space-x-2",children:[(0,a.jsxs)("div",{className:"flex-1 relative",children:[a.jsx(G.I,{value:d,onChange:e=>{I(e.target.value)},placeholder:"Type a message...",className:"pr-20"}),(0,a.jsxs)("div",{className:"absolute right-2 top-1/2 transform -translate-y-1/2 flex items-center space-x-1",children:[a.jsx(J.z,{type:"button",size:"sm",variant:"ghost",onClick:()=>j(!v),className:"h-6 w-6 p-0 hover:bg-gray-100 dark:hover:bg-gray-700",children:a.jsx(eM.Z,{className:"w-3 h-3"})}),a.jsx(J.z,{type:"button",size:"sm",variant:"ghost",onClick:()=>b(!f),className:"h-6 w-6 p-0 hover:bg-gray-100 dark:hover:bg-gray-700",children:a.jsx(tc,{className:"w-3 h-3"})}),a.jsx(J.z,{type:"button",size:"sm",variant:"ghost",onClick:()=>y(!g),className:"h-6 w-6 p-0 hover:bg-gray-100 dark:hover:bg-gray-700",children:a.jsx(td,{className:"w-3 h-3"})})]})]}),a.jsx(J.z,{type:"submit",size:"sm",disabled:!d.trim(),children:a.jsx(tu,{className:"w-4 h-4"})})]}),f&&a.jsx("input",{type:"file",onChange:e=>{let t=e.target.files?.[0];if(t){if(t.size>10485760){alert("File size must be less than 10MB");return}if(!["image/jpeg","image/png","image/gif","image/webp","text/plain","text/markdown","text/css","text/javascript","application/json","application/xml","application/pdf","video/mp4","video/webm","audio/mpeg","audio/wav"].includes(t.type)){alert("File type not supported");return}E(t),b(!0)}},className:"mt-2 w-full text-sm",accept:"image/*,.pdf,.doc,.docx,.txt,.js,.py,.java,.cpp"})]}),f&&C&&a.jsx(ek.E.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:()=>b(!1),children:(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 max-w-md w-full mx-4",onClick:e=>e.stopPropagation(),children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Upload File"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3 p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[a.jsx("div",{className:"w-10 h-10 bg-blue-100 dark:bg-blue-900/20 rounded-lg flex items-center justify-center",children:"\uD83D\uDCCE"}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-medium truncate",children:C.name}),(0,a.jsxs)("p",{className:"text-xs text-gray-500",children:[(C.size/1024/1024).toFixed(2)," MB"]})]})]}),S&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{children:"Uploading..."}),(0,a.jsxs)("span",{children:[z.toFixed(0),"%"]})]}),a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${z}%`}})})]}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[a.jsx(J.z,{onClick:T,disabled:S,className:"flex-1",children:S?"Uploading...":"Upload"}),a.jsx(J.z,{variant:"outline",onClick:()=>{b(!1),E(null)},children:"Cancel"})]})]})]})}),g&&a.jsx(ek.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:10},className:"absolute bottom-full right-0 mb-2 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg p-3 z-10",children:a.jsx("div",{className:"grid grid-cols-8 gap-1 max-h-48 overflow-y-auto",children:["\uD83D\uDE00","\uD83D\uDE03","\uD83D\uDE04","\uD83D\uDE01","\uD83D\uDE06","\uD83D\uDE05","\uD83D\uDE02","\uD83E\uDD23","\uD83D\uDE0A","\uD83D\uDE07","\uD83D\uDE42","\uD83D\uDE43","\uD83D\uDE09","\uD83D\uDE0C","\uD83D\uDE0D","\uD83E\uDD70","\uD83D\uDE18","\uD83D\uDE17","\uD83D\uDE19","\uD83D\uDE1A","\uD83D\uDE0B","\uD83D\uDE1B","\uD83D\uDE1D","\uD83D\uDE1C","\uD83E\uDD2A","\uD83E\uDD28","\uD83E\uDDD0","\uD83E\uDD13","\uD83D\uDE0E","\uD83E\uDD29","\uD83E\uDD73","\uD83D\uDE0F","\uD83D\uDE12","\uD83D\uDE1E","\uD83D\uDE14","\uD83D\uDE1F","\uD83D\uDE15","\uD83D\uDE41","☹️","\uD83D\uDE23","\uD83D\uDE16","\uD83D\uDE2B","\uD83D\uDE29","\uD83E\uDD7A","\uD83D\uDE22","\uD83D\uDE2D","\uD83D\uDE24","\uD83D\uDE20","\uD83D\uDE21","\uD83E\uDD2C","\uD83E\uDD2F","\uD83D\uDE33","\uD83E\uDD75","\uD83E\uDD76","\uD83D\uDE31","\uD83D\uDE28","\uD83D\uDE30","\uD83D\uDE25","\uD83D\uDE13","\uD83E\uDD17","\uD83E\uDD14","\uD83E\uDD2D","\uD83E\uDD2B","\uD83E\uDD25","\uD83D\uDE36","\uD83D\uDE10","\uD83D\uDE11","\uD83D\uDE2F","\uD83D\uDE26","\uD83D\uDE27","\uD83D\uDE2E","\uD83D\uDE32","\uD83D\uDE34","\uD83E\uDD24","\uD83D\uDE2A","\uD83D\uDE35","\uD83E\uDD10","\uD83E\uDD74","\uD83E\uDD22","\uD83E\uDD2E","\uD83E\uDD27","\uD83D\uDE37","\uD83E\uDD12","\uD83E\uDD15","\uD83E\uDD11","\uD83E\uDD20","\uD83D\uDCA9","\uD83D\uDC7B","\uD83D\uDC7D","\uD83D\uDC7E","\uD83E\uDD16","\uD83D\uDE3A","\uD83D\uDE38","\uD83D\uDE39","\uD83D\uDE3B","\uD83D\uDE3C","\uD83D\uDE3D","\uD83D\uDE40","\uD83D\uDE3F","\uD83D\uDE3E","\uD83D\uDE48","\uD83D\uDE49","\uD83D\uDE4A","\uD83D\uDC8C","\uD83D\uDC98","\uD83D\uDC9D","\uD83D\uDC96","\uD83D\uDC97","\uD83D\uDC93","\uD83D\uDC9E","\uD83D\uDC95","\uD83D\uDC9F","❣️","\uD83D\uDC94","❤️","\uD83E\uDDE1","\uD83D\uDC9B","\uD83D\uDC9A","\uD83D\uDC99","\uD83D\uDC9C","\uD83D\uDDA4","\uD83D\uDCAF","\uD83D\uDCA2","\uD83D\uDCA5","\uD83D\uDCAB","\uD83D\uDCA6","\uD83D\uDCA8","\uD83D\uDD73️","\uD83D\uDCAC","\uD83D\uDDE8️","\uD83D\uDDEF️","\uD83D\uDCAD","\uD83D\uDCA4","\uD83C\uDF1F","✨","⭐"].map(e=>a.jsx("button",{onClick:()=>L(e),className:"w-8 h-8 flex items-center justify-center hover:bg-gray-100 dark:hover:bg-gray-700 rounded text-lg transition-colors",children:e},e))})})]})}let th=(0,Y.Z)("PhoneOff",[["path",{d:"M10.68 13.31a16 16 0 0 0 3.41 2.6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7 2 2 0 0 1 1.72 2v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.42 19.42 0 0 1-3.33-2.67m-2.67-3.34a19.79 19.79 0 0 1-3.07-8.63A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91",key:"z86iuo"}],["line",{x1:"22",x2:"2",y1:"2",y2:"22",key:"11kh81"}]]),tp=(0,Y.Z)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]),tx=(0,Y.Z)("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]),tg=(0,Y.Z)("VideoOff",[["path",{d:"M10.66 6H14a2 2 0 0 1 2 2v2.34l1 1L22 8v8",key:"ubwiq0"}],["path",{d:"M16 16a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h2l10 10Z",key:"1l10zd"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]),ty=(0,Y.Z)("MicOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);function tf(){let{socket:e,isConnected:t}=(0,_.s)(),{user:r}=(0,n.aC)(),{currentRoom:i}=(0,o.N)(),[l,c]=(0,s.useState)([]),[d,u]=(0,s.useState)(!0),[m,h]=(0,s.useState)(!0),[p,x]=(0,s.useState)(!1),[g,y]=(0,s.useState)(null),[f,b]=(0,s.useState)(null),v=(0,s.useRef)(null),j=(0,s.useRef)(new Map),w=(0,s.useRef)(null),D=(0,s.useCallback)(async()=>{try{let e=await navigator.mediaDevices.getUserMedia({video:!0,audio:!0});y(e),w.current=e,v.current&&(v.current.srcObject=e),r&&c([{id:r.id,name:r.name,avatar:r.avatar,stream:e,isVideoOn:!0,isAudioOn:!0,isLocal:!0}])}catch(e){console.error("Failed to get user media:",e),b("Failed to access camera/microphone. Please check permissions.")}},[r]),N=(0,s.useCallback)(async()=>{if(e&&t&&i)try{await D(),x(!0),e.emit("video:join",{roomId:i.id}),e.emit("video:call-started",{roomId:i.id})}catch(e){console.error("Failed to start call:",e),b("Failed to start video call")}},[e,t,i,D]),k=(0,s.useCallback)(()=>{e&&t&&i&&(w.current&&(w.current.getTracks().forEach(e=>e.stop()),y(null),w.current=null),j.current.forEach(e=>e.close()),j.current.clear(),e.emit("video:leave",{roomId:i.id}),e.emit("video:call-ended",{roomId:i.id}),x(!1),c([]))},[e,t,i]),C=(0,s.useCallback)(()=>{if(w.current){let e=w.current.getVideoTracks()[0];e&&(e.enabled=!e.enabled,u(e.enabled),c(t=>t.map(t=>t.isLocal?{...t,isVideoOn:e.enabled}:t)))}},[]),E=(0,s.useCallback)(()=>{if(w.current){let e=w.current.getAudioTracks()[0];e&&(e.enabled=!e.enabled,h(e.enabled),c(t=>t.map(t=>t.isLocal?{...t,isAudioOn:e.enabled}:t)))}},[]);return(0,a.jsxs)("div",{className:"h-full bg-gray-900 flex flex-col",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 border-b border-gray-700",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx(eq.Z,{className:"w-5 h-5 text-blue-400"}),a.jsx("span",{className:"text-white font-medium",children:"Video Call"}),l.length>0&&(0,a.jsxs)("span",{className:"text-gray-400 text-sm",children:["(",l.length," participants)"]})]}),a.jsx("div",{className:"flex items-center space-x-2",children:(0,a.jsxs)(J.z,{variant:"outline",size:"sm",onClick:p?k:N,className:p?"bg-red-600 border-red-500 text-white hover:bg-red-700":"bg-green-600 border-green-500 text-white hover:bg-green-700",children:[p?a.jsx(th,{className:"w-4 h-4 mr-2"}):a.jsx(tp,{className:"w-4 h-4 mr-2"}),p?"End Call":"Start Call"]})})]}),f&&a.jsx("div",{className:"p-3 bg-red-900/20 border border-red-700 text-red-400 text-sm",children:f}),a.jsx("div",{className:"flex-1 p-3 overflow-auto",children:p?(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 h-full",children:[g&&(0,a.jsxs)("div",{className:"relative bg-gray-800 rounded-lg overflow-hidden",children:[a.jsx("video",{ref:v,autoPlay:!0,muted:!0,playsInline:!0,className:"w-full h-full object-cover"}),(0,a.jsxs)("div",{className:"absolute bottom-2 left-2 bg-black/50 px-2 py-1 rounded text-white text-xs",children:[r?.name," (You)"]}),!d&&a.jsx("div",{className:"absolute inset-0 bg-gray-800 flex items-center justify-center",children:a.jsx(tn,{className:"w-16 h-16",children:a.jsx(tl,{className:"text-2xl",children:r?.name?.charAt(0)||"U"})})})]}),l.filter(e=>!e.isLocal).map(e=>(0,a.jsxs)("div",{className:"relative bg-gray-800 rounded-lg overflow-hidden",children:[e.stream?a.jsx("video",{autoPlay:!0,playsInline:!0,className:"w-full h-full object-cover",ref:t=>{t&&e.stream&&(t.srcObject=e.stream)}}):a.jsx("div",{className:"w-full h-full bg-gray-800 flex items-center justify-center",children:a.jsx(tn,{className:"w-16 h-16",children:a.jsx(tl,{className:"text-2xl",children:e.name?.charAt(0)||"U"})})}),a.jsx("div",{className:"absolute bottom-2 left-2 bg-black/50 px-2 py-1 rounded text-white text-xs",children:e.name})]},e.id))]}):(0,a.jsxs)("div",{className:"h-full flex flex-col items-center justify-center text-center p-6",children:[a.jsx("div",{className:"w-20 h-20 bg-gray-800 rounded-full flex items-center justify-center mb-4",children:a.jsx(eq.Z,{className:"w-10 h-10 text-gray-400"})}),a.jsx("h3",{className:"text-lg font-medium text-white mb-2",children:"Start Video Call"}),a.jsx("p",{className:"text-gray-400 text-sm mb-6",children:"Click the green button above to start a video call with other participants in this room."}),(0,a.jsxs)("div",{className:"flex items-center space-x-4 text-gray-500 text-sm",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx(eq.Z,{className:"w-4 h-4"}),a.jsx("span",{children:"Video ON by default"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx(tx,{className:"w-4 h-4"}),a.jsx("span",{children:"Audio ON by default"})]})]})]})}),p&&a.jsx("div",{className:"p-3 border-t border-gray-700 bg-gray-800",children:(0,a.jsxs)("div",{className:"flex items-center justify-center space-x-3",children:[(0,a.jsxs)(J.z,{variant:"outline",size:"sm",onClick:C,className:d?"bg-gray-700 border-gray-600 text-white":"bg-red-600 border-red-500 text-white",children:[d?a.jsx(eq.Z,{className:"w-4 h-4 mr-2"}):a.jsx(tg,{className:"w-4 h-4 mr-2"}),d?"Video":"Video Off"]}),(0,a.jsxs)(J.z,{variant:"outline",size:"sm",onClick:E,className:m?"bg-gray-700 border-gray-600 text-white":"bg-red-600 border-red-500 text-white",children:[m?a.jsx(tx,{className:"w-4 h-4 mr-2"}):a.jsx(ty,{className:"w-4 h-4 mr-2"}),m?"Audio":"Audio Off"]}),(0,a.jsxs)(J.z,{variant:"outline",size:"sm",onClick:k,className:"bg-red-600 border-red-500 text-white hover:bg-red-700",children:[a.jsx(th,{className:"w-4 h-4 mr-2"}),"End Call"]})]})})]})}function tb({roomId:e,initialLanguage:t="javascript",initialCode:r="",onCodeChange:l,onLanguageChange:c}){let{user:d}=(0,n.aC)(),{currentRoom:u,leaveRoom:m}=(0,o.N)(),{socket:h,isConnected:p}=(0,_.s)(),x=(0,i.useRouter)(),[g,y]=(0,s.useState)(r),[f,b]=(0,s.useState)(t),[v,j]=(0,s.useState)(!1),[w,D]=(0,s.useState)({editor:{width:70,height:60},output:{width:30,height:40},chat:{width:30,height:30},video:{width:30,height:30}}),N=(0,s.useCallback)(e=>{y(e),l?.(e),h&&p&&u&&h.emit("code:update",{roomId:u.id,code:e,language:f})},[h,p,u,f,l]);(0,s.useCallback)(e=>{b(e),c?.(e);let t=eQ(e);t&&(y(t.code),l?.(t.code)),h&&p&&u&&h.emit("code:language-change",{roomId:u.id,language:e})},[h,p,u,d?.id,c,l]);let k=(0,s.useCallback)(()=>{j(!0),h&&p&&u&&h.emit("code:execute",{roomId:u.id,code:g,language:f,userId:d?.id})},[h,p,u,d?.id,f,g]),C=(0,s.useCallback)(()=>{k()},[k]),E=(0,s.useCallback)(async()=>{try{u&&h&&(h.emit("room:leave",{roomId:u.id}),await m(u.id)),x.push("/")}catch(e){console.error("Error leaving room:",e),x.push("/")}},[u,h,m,x]),S=(0,s.useCallback)(e=>{D(e),h&&p&&u&&h.emit("layoutChange",{roomId:u.id,layout:e,userId:d?.id})},[h,p,u,d?.id]),M=(0,s.useCallback)(e=>{console.log("Layout preset loaded:",e.name)},[]);return(0,a.jsxs)("div",{className:"h-screen bg-gray-900 flex flex-col collaborative-editor-layout",children:[a.jsx(eP,{onRunCode:C,isExecuting:v,currentLanguage:f,onLeaveRoom:E}),(0,a.jsxs)("div",{className:"flex-1 overflow-hidden main-content-area",style:{marginTop:"4rem"},children:[" ",(0,a.jsxs)("div",{className:"flex items-center justify-between px-4 py-2 bg-gray-800 border-b border-gray-700 layout-controls",children:[a.jsx("div",{className:"flex items-center space-x-4",children:a.jsx(eJ,{currentLayout:w,onLayoutChange:S,onLoadPreset:M})}),a.jsx("div",{className:"flex items-center space-x-2 text-sm text-gray-400",children:a.jsx("span",{children:"Drag borders to resize • Double-click to reset"})})]}),a.jsx("div",{className:"flex-1 overflow-hidden resizable-layout-container",children:a.jsx(eZ,{onLayoutChange:S,initialLayout:w,children:{editor:a.jsx("div",{className:"h-full flex flex-col editor-container",children:a.jsx("div",{className:"flex-1 monaco-editor-container",style:{minHeight:"0"},children:a.jsx(H,{roomId:u?.id||"",language:f,initialCode:g,onCodeChange:N})})}),output:a.jsx("div",{className:"h-full bg-gray-800 border-l border-gray-700",children:a.jsx(eS,{code:g,language:f,roomId:u?.id||"",onExecutionStart:k,onExecutionComplete:()=>j(!1)})}),chat:a.jsx("div",{className:"h-full bg-gray-800 border-l border-gray-700",children:a.jsx(tm,{roomId:u?.id||""})}),video:a.jsx("div",{className:"h-full bg-gray-800 border-l border-gray-700",children:a.jsx(tf,{})})}})})]})]})}function tv(){let e=(0,i.useParams)(),t=(0,i.useRouter)(),{user:r,isLoading:l}=(0,n.aC)(),{currentRoom:c,joinRoom:d,isLoading:u}=(0,o.N)(),[m,h]=(0,s.useState)(!1),[p,x]=(0,s.useState)(null),[g,y]=(0,s.useState)(""),[f,b]=(0,s.useState)("javascript"),v=e.roomId,j=(0,s.useCallback)(async()=>{if(r&&v)try{h(!0),x(null),await d(v,"",t);let e=eQ(f);e&&y(e.code)}catch(e){console.error("Failed to join room:",e),x(e instanceof Error?e.message:"Failed to join room")}finally{h(!1)}},[r,v,d,t,f]),w=(0,s.useCallback)(e=>{y(e)},[]),D=(0,s.useCallback)(e=>{b(e)},[]);return l||u?a.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-50 dark:bg-gray-900",children:(0,a.jsxs)("div",{className:"text-center space-y-4",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Loading collaborative environment..."})]})}):r?p?a.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 max-w-md w-full",children:[a.jsx("h2",{className:"text-xl font-semibold text-red-600 mb-4",children:"Error Joining Room"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:p}),(0,a.jsxs)("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:j,disabled:m,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50",children:m?"Joining...":"Retry"}),a.jsx("button",{onClick:()=>t.push("/dashboard"),className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50",children:"Back to Dashboard"})]})]})}):c&&c.id===v?a.jsx("div",{className:"h-screen",children:a.jsx(tb,{roomId:c.id,initialLanguage:f,initialCode:g,onCodeChange:w,onLanguageChange:D})}):a.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 max-w-md w-full",children:[a.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Joining Room..."}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"Attempting to join room..."}),a.jsx("button",{onClick:j,disabled:m,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50",children:m?"Joining...":"Join Room"})]})}):null}},9614:(e,t,r)=>{"use strict";r.d(t,{z:()=>i});var a=r(9899);r(5507);var s=r(3096);function i({className:e,variant:t="default",size:r="md",isLoading:i=!1,children:n,disabled:o,...l}){return(0,a.jsxs)("button",{className:(0,s.cn)("inline-flex items-center justify-center rounded-md font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none ring-offset-background",{default:"bg-gray-900 text-white hover:bg-gray-800 dark:bg-gray-50 dark:text-gray-900 dark:hover:bg-gray-200",primary:"bg-blue-600 text-white hover:bg-blue-700 focus:ring-blue-500",secondary:"bg-gray-100 text-gray-900 hover:bg-gray-200 dark:bg-gray-800 dark:text-gray-100 dark:hover:bg-gray-700",outline:"border border-gray-300 bg-transparent text-gray-700 hover:bg-gray-50 dark:border-gray-700 dark:text-gray-300 dark:hover:bg-gray-800",ghost:"bg-transparent text-gray-700 hover:bg-gray-100 dark:text-gray-300 dark:hover:bg-gray-800",danger:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500"}[t],{sm:"h-8 px-3 text-sm",md:"h-10 px-4 py-2",lg:"h-12 px-6 text-lg"}[r],e),disabled:o||i,...l,children:[i&&a.jsx("div",{className:"mr-2 h-4 w-4 animate-spin rounded-full border-2 border-current border-t-transparent"}),n]})}},3217:(e,t,r)=>{"use strict";r.d(t,{Ol:()=>o,Zb:()=>n,aY:()=>c,ll:()=>l});var a=r(9899),s=r(5507),i=r(3096);let n=s.forwardRef(({className:e,...t},r)=>a.jsx("div",{ref:r,className:(0,i.cn)("rounded-lg border border-gray-200 bg-white shadow-sm dark:border-gray-800 dark:bg-gray-900",e),...t}));n.displayName="Card";let o=s.forwardRef(({className:e,...t},r)=>a.jsx("div",{ref:r,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",e),...t}));o.displayName="CardHeader";let l=s.forwardRef(({className:e,...t},r)=>a.jsx("h3",{ref:r,className:(0,i.cn)("text-lg font-semibold leading-none tracking-tight",e),...t}));l.displayName="CardTitle",s.forwardRef(({className:e,...t},r)=>a.jsx("p",{ref:r,className:(0,i.cn)("text-sm text-gray-500 dark:text-gray-400",e),...t})).displayName="CardDescription";let c=s.forwardRef(({className:e,...t},r)=>a.jsx("div",{ref:r,className:(0,i.cn)("p-6 pt-0",e),...t}));c.displayName="CardContent";let d=s.forwardRef(({className:e,...t},r)=>a.jsx("div",{ref:r,className:(0,i.cn)("flex items-center p-6 pt-0",e),...t}));d.displayName="CardFooter",d.displayName="CardFooter"},3086:(e,t,r)=>{"use strict";r.d(t,{I:()=>n});var a=r(9899),s=r(5507),i=r(3096);let n=s.forwardRef(({className:e,type:t,error:r,...s},n)=>(0,a.jsxs)("div",{className:"space-y-1",children:[a.jsx("input",{type:t,className:(0,i.cn)("flex h-10 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm placeholder:text-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:cursor-not-allowed disabled:opacity-50 dark:border-gray-700 dark:bg-gray-800 dark:text-white dark:placeholder:text-gray-500",r&&"border-red-500 focus:ring-red-500",e),ref:n,...s}),r&&a.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:r})]}));n.displayName="Input"},3096:(e,t,r)=>{"use strict";r.d(t,{cn:()=>i});var a=r(3332),s=r(4231);function i(...e){return(0,s.m6)((0,a.W)(e))}},3569:(e,t,r)=>{"use strict";var a=r(5507),s="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},i=a.useState,n=a.useEffect,o=a.useLayoutEffect,l=a.useDebugValue;function c(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!s(e,r)}catch(e){return!0}}var d="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var r=t(),a=i({inst:{value:r,getSnapshot:t}}),s=a[0].inst,d=a[1];return o(function(){s.value=r,s.getSnapshot=t,c(s)&&d({inst:s})},[e,r,t]),n(function(){return c(s)&&d({inst:s}),e(function(){c(s)&&d({inst:s})})},[e]),l(r),r};t.useSyncExternalStore=void 0!==a.useSyncExternalStore?a.useSyncExternalStore:d},2873:(e,t,r)=>{"use strict";e.exports=r(3569)},8507:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});let a=(0,r(2772).createProxy)(String.raw`/Users/piyush/Projects/CodeMitra/frontend/src/app/room/[roomId]/editor/page.tsx#default`)}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[375,850,233,24],()=>r(4895));module.exports=a})();