(()=>{var e={};e.id=554,e.ids=[554],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},7790:e=>{"use strict";e.exports=require("assert")},8893:e=>{"use strict";e.exports=require("buffer")},1282:e=>{"use strict";e.exports=require("child_process")},4770:e=>{"use strict";e.exports=require("crypto")},7702:e=>{"use strict";e.exports=require("events")},2048:e=>{"use strict";e.exports=require("fs")},2615:e=>{"use strict";e.exports=require("http")},5240:e=>{"use strict";e.exports=require("https")},8216:e=>{"use strict";e.exports=require("net")},9801:e=>{"use strict";e.exports=require("os")},5315:e=>{"use strict";e.exports=require("path")},6162:e=>{"use strict";e.exports=require("stream")},2452:e=>{"use strict";e.exports=require("tls")},4175:e=>{"use strict";e.exports=require("tty")},7360:e=>{"use strict";e.exports=require("url")},1764:e=>{"use strict";e.exports=require("util")},1568:e=>{"use strict";e.exports=require("zlib")},4895:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>i.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>d,routeModule:()=>x,tree:()=>c}),r(8507),r(497),r(2874);var a=r(7105),s=r(5265),n=r(157),i=r.n(n),l=r(4665),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);r.d(t,o);let c=["",{children:["room",{children:["[roomId]",{children:["editor",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,8507)),"/Users/piyush/Projects/CodeMitra/frontend/src/app/room/[roomId]/editor/page.tsx"]}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,497)),"/Users/piyush/Projects/CodeMitra/frontend/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,2874,23)),"next/dist/client/components/not-found-error"]}],d=["/Users/piyush/Projects/CodeMitra/frontend/src/app/room/[roomId]/editor/page.tsx"],u="/room/[roomId]/editor/page",m={require:r,loadChunk:()=>Promise.resolve()},x=new a.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/room/[roomId]/editor/page",pathname:"/room/[roomId]/editor",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},8098:(e,t,r)=>{Promise.resolve().then(r.bind(r,9080))},9080:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>tg});var a=r(9899),s=r(5507),n=r(6153),i=r(9312),l=r(9411),o=r(5767);function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=Array(t);r<t;r++)a[r]=e[r];return a}function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach(function(t){var a;a=r[t],t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function m(e){return function t(){for(var r=this,a=arguments.length,s=Array(a),n=0;n<a;n++)s[n]=arguments[n];return s.length>=e.length?e.apply(this,s):function(){for(var e=arguments.length,a=Array(e),n=0;n<e;n++)a[n]=arguments[n];return t.apply(r,[].concat(s,a))}}}function x(e){return({}).toString.call(e).includes("Object")}function p(e){return"function"==typeof e}var h=m(function(e,t){throw Error(e[t]||e.default)})({initialIsRequired:"initial state is required",initialType:"initial state should be an object",initialContent:"initial state shouldn't be an empty object",handlerType:"handler should be an object or a function",handlersType:"all handlers should be a functions",selectorType:"selector should be a function",changeType:"provided value of changes should be an object",changeField:'it seams you want to change a field in the state which is not specified in the "initial" state',default:"an unknown error accured in `state-local` package"}),g={changes:function(e,t){return x(t)||h("changeType"),Object.keys(t).some(function(t){return!Object.prototype.hasOwnProperty.call(e,t)})&&h("changeField"),t},selector:function(e){p(e)||h("selectorType")},handler:function(e){p(e)||x(e)||h("handlerType"),x(e)&&Object.values(e).some(function(e){return!p(e)})&&h("handlersType")},initial:function(e){e||h("initialIsRequired"),x(e)||h("initialType"),Object.keys(e).length||h("initialContent")}};function y(e,t){return p(t)?t(e.current):t}function f(e,t){return e.current=u(u({},e.current),t),t}function b(e,t,r){return p(t)?t(e.current):Object.keys(r).forEach(function(r){var a;return null===(a=t[r])||void 0===a?void 0:a.call(t,e.current[r])}),r}(function(e){return function t(){for(var r=this,a=arguments.length,s=Array(a),n=0;n<a;n++)s[n]=arguments[n];return s.length>=e.length?e.apply(this,s):function(){for(var e=arguments.length,a=Array(e),n=0;n<e;n++)a[n]=arguments[n];return t.apply(r,[].concat(s,a))}}})(function(e,t){throw Error(e[t]||e.default)})({configIsRequired:"the configuration object is required",configType:"the configuration object should be an object",default:"an unknown error accured in `@monaco-editor/loader` package",deprecation:"Deprecation warning!\n    You are using deprecated way of configuration.\n\n    Instead of using\n      monaco.config({ urls: { monacoBase: '...' } })\n    use\n      monaco.config({ paths: { vs: '...' } })\n\n    For more please check the link https://github.com/suren-atoyan/monaco-loader#config\n  "});let v=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(e){return t.reduceRight(function(e,t){return t(e)},e)}};var j={type:"cancelation",msg:"operation is manually canceled"};let w=function(e){var t=!1,r=new Promise(function(r,a){e.then(function(e){return t?a(j):r(e)}),e.catch(a)});return r.cancel=function(){return t=!0},r};var N=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],a=!0,s=!1,n=void 0;try{for(var i,l=e[Symbol.iterator]();!(a=(i=l.next()).done)&&(r.push(i.value),2!==r.length);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==l.return||l.return()}finally{if(s)throw n}}return r}}(e,2)||function(e,t){if(e){if("string"==typeof e)return c(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return c(e,t)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(({create:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};g.initial(e),g.handler(t);var r={current:e},a=m(b)(r,t),s=m(f)(r),n=m(g.changes)(e),i=m(y)(r);return[function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(e){return e};return g.selector(e),e(r.current)},function(e){(function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(e){return t.reduceRight(function(e,t){return t(e)},e)}})(a,s,n,i)(e)}]}}).create({config:{paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@0.52.2/min/vs"}},isInitialized:!1,resolve:null,reject:null,monaco:null}),0),k=N[0],C=N[1];function S(e){return document.body.appendChild(e)}function E(e){var t,r,a=k(function(e){return{config:e.config,reject:e.reject}}),s=(t="".concat(a.config.paths.vs,"/loader.js"),r=document.createElement("script"),t&&(r.src=t),r);return s.onload=function(){return e()},s.onerror=a.reject,s}function M(){var e=k(function(e){return{config:e.config,resolve:e.resolve,reject:e.reject}}),t=window.require;t.config(e.config),t(["vs/editor/editor.main"],function(t){T(t),e.resolve(t)},function(t){e.reject(t)})}function T(e){k().monaco||C({monaco:e})}var R=new Promise(function(e,t){return C({resolve:e,reject:t})});let L={init:function(){var e=k(function(e){return{monaco:e.monaco,isInitialized:e.isInitialized,resolve:e.resolve}});if(!e.isInitialized){if(C({isInitialized:!0}),e.monaco)return e.resolve(e.monaco),w(R);if(window.monaco&&window.monaco.editor)return T(window.monaco),e.resolve(window.monaco),w(R);v(S,E)(M)}return w(R)}};var z={wrapper:{display:"flex",position:"relative",textAlign:"initial"},fullWidth:{width:"100%"},hide:{display:"none"}},P={container:{display:"flex",height:"100%",width:"100%",justifyContent:"center",alignItems:"center"}},I=function({children:e}){return s.createElement("div",{style:P.container},e)},O=(0,s.memo)(function({width:e,height:t,isEditorReady:r,loading:a,_ref:n,className:i,wrapperProps:l}){return s.createElement("section",{style:{...z.wrapper,width:e,height:t},...l},!r&&s.createElement(I,null,a),s.createElement("div",{ref:n,style:{...z.fullWidth,...!r&&z.hide},className:i}))}),A=function(e){(0,s.useEffect)(e,[])},q=function(e,t,r=!0){let a=(0,s.useRef)(!0);(0,s.useEffect)(a.current||!r?()=>{a.current=!1}:e,t)};function _(){}function Z(e,t,r,a){return e.editor.getModel(V(e,a))||e.editor.createModel(t,r,a?V(e,a):void 0)}function V(e,t){return e.Uri.parse(t)}(0,s.memo)(function({original:e,modified:t,language:r,originalLanguage:a,modifiedLanguage:n,originalModelPath:i,modifiedModelPath:l,keepCurrentOriginalModel:o=!1,keepCurrentModifiedModel:c=!1,theme:d="light",loading:u="Loading...",options:m={},height:x="100%",width:p="100%",className:h,wrapperProps:g={},beforeMount:y=_,onMount:f=_}){let[b,v]=(0,s.useState)(!1),[j,w]=(0,s.useState)(!0),N=(0,s.useRef)(null),k=(0,s.useRef)(null),C=(0,s.useRef)(null),S=(0,s.useRef)(f),E=(0,s.useRef)(y),M=(0,s.useRef)(!1);A(()=>{let e=L.init();return e.then(e=>(k.current=e)&&w(!1)).catch(e=>e?.type!=="cancelation"&&console.error("Monaco initialization: error:",e)),()=>{let t;return N.current?(t=N.current?.getModel(),void(o||t?.original?.dispose(),c||t?.modified?.dispose(),N.current?.dispose())):e.cancel()}}),q(()=>{if(N.current&&k.current){let t=N.current.getOriginalEditor(),s=Z(k.current,e||"",a||r||"text",i||"");s!==t.getModel()&&t.setModel(s)}},[i],b),q(()=>{if(N.current&&k.current){let e=N.current.getModifiedEditor(),a=Z(k.current,t||"",n||r||"text",l||"");a!==e.getModel()&&e.setModel(a)}},[l],b),q(()=>{let e=N.current.getModifiedEditor();e.getOption(k.current.editor.EditorOption.readOnly)?e.setValue(t||""):t!==e.getValue()&&(e.executeEdits("",[{range:e.getModel().getFullModelRange(),text:t||"",forceMoveMarkers:!0}]),e.pushUndoStop())},[t],b),q(()=>{N.current?.getModel()?.original.setValue(e||"")},[e],b),q(()=>{let{original:e,modified:t}=N.current.getModel();k.current.editor.setModelLanguage(e,a||r||"text"),k.current.editor.setModelLanguage(t,n||r||"text")},[r,a,n],b),q(()=>{k.current?.editor.setTheme(d)},[d],b),q(()=>{N.current?.updateOptions(m)},[m],b);let T=(0,s.useCallback)(()=>{if(!k.current)return;E.current(k.current);let s=Z(k.current,e||"",a||r||"text",i||""),o=Z(k.current,t||"",n||r||"text",l||"");N.current?.setModel({original:s,modified:o})},[r,t,n,e,a,i,l]),R=(0,s.useCallback)(()=>{!M.current&&C.current&&(N.current=k.current.editor.createDiffEditor(C.current,{automaticLayout:!0,...m}),T(),k.current?.editor.setTheme(d),v(!0),M.current=!0)},[m,d,T]);return(0,s.useEffect)(()=>{b&&S.current(N.current,k.current)},[b]),(0,s.useEffect)(()=>{j||b||R()},[j,b,R]),s.createElement(O,{width:p,height:x,isEditorReady:b,loading:u,_ref:C,className:h,wrapperProps:g})});var D=function(e){let t=(0,s.useRef)();return(0,s.useEffect)(()=>{t.current=e},[e]),t.current},$=new Map,H=(0,s.memo)(function({defaultValue:e,defaultLanguage:t,defaultPath:r,value:a,language:n,path:i,theme:l="light",line:o,loading:c="Loading...",options:d={},overrideServices:u={},saveViewState:m=!0,keepCurrentModel:x=!1,width:p="100%",height:h="100%",className:g,wrapperProps:y={},beforeMount:f=_,onMount:b=_,onChange:v,onValidate:j=_}){let[w,N]=(0,s.useState)(!1),[k,C]=(0,s.useState)(!0),S=(0,s.useRef)(null),E=(0,s.useRef)(null),M=(0,s.useRef)(null),T=(0,s.useRef)(b),R=(0,s.useRef)(f),z=(0,s.useRef)(),P=(0,s.useRef)(a),I=D(i),V=(0,s.useRef)(!1),H=(0,s.useRef)(!1);A(()=>{let e=L.init();return e.then(e=>(S.current=e)&&C(!1)).catch(e=>e?.type!=="cancelation"&&console.error("Monaco initialization: error:",e)),()=>E.current?void(z.current?.dispose(),x?m&&$.set(i,E.current.saveViewState()):E.current.getModel()?.dispose(),E.current.dispose()):e.cancel()}),q(()=>{let s=Z(S.current,e||a||"",t||n||"",i||r||"");s!==E.current?.getModel()&&(m&&$.set(I,E.current?.saveViewState()),E.current?.setModel(s),m&&E.current?.restoreViewState($.get(i)))},[i],w),q(()=>{E.current?.updateOptions(d)},[d],w),q(()=>{E.current&&void 0!==a&&(E.current.getOption(S.current.editor.EditorOption.readOnly)?E.current.setValue(a):a===E.current.getValue()||(H.current=!0,E.current.executeEdits("",[{range:E.current.getModel().getFullModelRange(),text:a,forceMoveMarkers:!0}]),E.current.pushUndoStop(),H.current=!1))},[a],w),q(()=>{let e=E.current?.getModel();e&&n&&S.current?.editor.setModelLanguage(e,n)},[n],w),q(()=>{void 0!==o&&E.current?.revealLine(o)},[o],w),q(()=>{S.current?.editor.setTheme(l)},[l],w);let W=(0,s.useCallback)(()=>{if(!(!M.current||!S.current)&&!V.current){R.current(S.current);let s=i||r,c=Z(S.current,a||e||"",t||n||"",s||"");E.current=S.current?.editor.create(M.current,{model:c,automaticLayout:!0,...d},u),m&&E.current.restoreViewState($.get(s)),S.current.editor.setTheme(l),void 0!==o&&E.current.revealLine(o),N(!0),V.current=!0}},[e,t,r,a,n,i,d,u,m,l,o]);return(0,s.useEffect)(()=>{w&&T.current(E.current,S.current)},[w]),(0,s.useEffect)(()=>{k||w||W()},[k,w,W]),P.current=a,(0,s.useEffect)(()=>{w&&v&&(z.current?.dispose(),z.current=E.current?.onDidChangeModelContent(e=>{H.current||v(E.current.getValue(),e)}))},[w,v]),(0,s.useEffect)(()=>{if(w){let e=S.current.editor.onDidChangeMarkers(e=>{let t=E.current.getModel()?.uri;if(t&&e.find(e=>e.path===t.path)){let e=S.current.editor.getModelMarkers({resource:t});j?.(e)}});return()=>{e?.dispose()}}return()=>{}},[w,j]),s.createElement(O,{width:p,height:h,isEditorReady:w,loading:c,_ref:M,className:g,wrapperProps:y})}),W=r(7009),F=r(4516);let U=(0,F.Z)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),J=(0,F.Z)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),B=(0,F.Z)("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);var Y=r(7657),G=r(5359),Q=r(243),K=r(6437),X=r(1175);let ee=[{value:"javascript",label:"JavaScript"},{value:"typescript",label:"TypeScript"},{value:"python",label:"Python"},{value:"java",label:"Java"},{value:"cpp",label:"C++"},{value:"c",label:"C"},{value:"csharp",label:"C#"},{value:"go",label:"Go"},{value:"rust",label:"Rust"},{value:"php",label:"PHP"},{value:"html",label:"HTML"},{value:"css",label:"CSS"},{value:"json",label:"JSON"},{value:"xml",label:"XML"},{value:"markdown",label:"Markdown"},{value:"sql",label:"SQL"},{value:"yaml",label:"YAML"},{value:"dockerfile",label:"Dockerfile"}],et=[{value:"vs",label:"Light"},{value:"vs-dark",label:"Dark"},{value:"hc-black",label:"High Contrast"}];function er({roomId:e,initialCode:t="",language:r="javascript",theme:n="dark",readOnly:c=!1,onCodeChange:d,onSave:u}){let m=(0,s.useRef)(null),x=(0,s.useRef)(null),[p,h]=(0,s.useState)(t),[g,y]=(0,s.useState)(r),[f,b]=(0,s.useState)("dark"===n?"vs-dark":"vs"),[v,j]=(0,s.useState)(!0),[w,N]=(0,s.useState)([]),[k,C]=(0,s.useState)(!1),[S,E]=(0,s.useState)(!1),[M,T]=(0,s.useState)(c),[R,L]=(0,s.useState)(!1),[z,P]=(0,s.useState)(14),[I,O]=(0,s.useState)(!0),[A,q]=(0,s.useState)(!1),[_,Z]=(0,s.useState)(!0),{socket:V}=(0,W.s)(),{currentRoom:D}=(0,l.N)(),{user:$}=(0,i.aC)(),F=(0,s.useCallback)((t,r)=>{m.current=t,x.current=r,j(!1),t.updateOptions({fontSize:z,minimap:{enabled:I},wordWrap:A?"on":"off",readOnly:M,automaticLayout:!0,scrollBeyondLastLine:!1,renderLineHighlight:"all",cursorBlinking:"smooth",cursorSmoothCaretAnimation:"on",multiCursorModifier:"ctrlCmd",suggestOnTriggerCharacters:!0,quickSuggestions:!0,parameterHints:{enabled:!0},hover:{enabled:!0},contextmenu:!0,mouseWheelZoom:!0}),t.addCommand(r.KeyMod.CtrlCmd|r.KeyCode.KeyS,()=>{es()}),t.addCommand(r.KeyMod.CtrlCmd|r.KeyCode.KeyR,()=>{en()}),t.onDidChangeCursorPosition(t=>{if(V&&$){let r={lineNumber:t.position.lineNumber,column:t.position.column};V.emit("cursor-position",{roomId:e,userId:$.id,userName:$.name,userColor:ea($.id),position:r,selection:t.selection?{startLineNumber:t.selection.startLineNumber,startColumn:t.selection.startColumn,endLineNumber:t.selection.endLineNumber,endColumn:t.selection.endColumn}:void 0})}}),t.onDidChangeCursorSelection(t=>{V&&$&&t.selection&&V.emit("cursor-selection",{roomId:e,userId:$.id,userName:$.name,userColor:ea($.id),selection:{startLineNumber:t.selection.startLineNumber,startColumn:t.selection.startColumn,endLineNumber:t.selection.endLineNumber,endColumn:t.selection.endColumn}})})},[V,$,e,z,I,A,M]),er=(0,s.useCallback)(t=>{void 0!==t&&(h(t),d?.(t),V&&$&&V.emit("code-change",{roomId:e,userId:$.id,userName:$.name,code:t,timestamp:Date.now()}),_&&setTimeout(()=>{es()},1e3))},[V,$,e,d,_]),ea=e=>{let t=["#FF6B6B","#4ECDC4","#45B7D1","#FFA07A","#98D8C8","#F7DC6F"];return t[e.split("").reduce((e,t)=>e+t.charCodeAt(0),0)%t.length]},es=(0,s.useCallback)(()=>{u&&u(p)},[p,u]),en=(0,s.useCallback)(()=>{console.log("Running code:",p)},[p]),ei=(0,s.useCallback)(async()=>{try{await navigator.clipboard.writeText(p),L(!0),setTimeout(()=>L(!1),2e3)}catch(e){console.error("Failed to copy code:",e)}},[p]),el=t=>{y(t),V&&$&&V.emit("language-change",{roomId:e,userId:$.id,language:t})},eo=e=>{b(e),x.current&&x.current.editor.setTheme(e)};return(0,a.jsxs)("div",{className:"flex flex-col h-full bg-gray-50 dark:bg-gray-900",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[a.jsx("select",{value:g,onChange:e=>el(e.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-sm",children:ee.map(e=>a.jsx("option",{value:e.value,children:e.label},e.value))}),a.jsx("select",{value:f,onChange:e=>eo(e.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-sm",children:et.map(e=>a.jsx("option",{value:e.value,children:e.label},e.value))})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsxs)("button",{onClick:()=>{let e=document.createElement("a"),t=new Blob([p],{type:"text/plain"});e.href=URL.createObjectURL(t),e.download=`code.${g}`,document.body.appendChild(e),e.click(),document.body.removeChild(e)},className:"flex items-center px-3 py-2 text-sm bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:[a.jsx(U,{className:"w-4 h-4 mr-1"}),"Download"]}),(0,a.jsxs)("label",{className:"flex items-center px-3 py-2 text-sm bg-gray-600 text-white rounded-md hover:bg-gray-700 transition-colors cursor-pointer",children:[a.jsx(J,{className:"w-4 h-4 mr-1"}),"Upload",a.jsx("input",{type:"file",accept:".js,.ts,.py,.java,.cpp,.c,.cs,.go,.rs,.php,.html,.css,.json,.xml,.md,.sql,.yml,.yaml",onChange:e=>{let t=e.target.files?.[0];if(t){let e=new FileReader;e.onload=e=>{let t=e.target?.result;h(t),m.current&&m.current.setValue(t)},e.readAsText(t)}},className:"hidden"})]}),(0,a.jsxs)("button",{onClick:es,className:"flex items-center px-3 py-2 text-sm bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors",children:[a.jsx(B,{className:"w-4 h-4 mr-1"}),"Save"]}),(0,a.jsxs)("button",{onClick:en,className:"flex items-center px-3 py-2 text-sm bg-purple-600 text-white rounded-md hover:bg-purple-700 transition-colors",children:[a.jsx(Y.Z,{className:"w-4 h-4 mr-1"}),"Run"]}),(0,a.jsxs)("button",{onClick:ei,className:"flex items-center px-3 py-2 text-sm bg-gray-600 text-white rounded-md hover:bg-gray-700 transition-colors",children:[R?a.jsx(G.Z,{className:"w-4 h-4 mr-1"}):a.jsx(Q.Z,{className:"w-4 h-4 mr-1"}),R?"Copied!":"Copy"]}),(0,a.jsxs)("button",{onClick:()=>C(!k),className:"flex items-center px-3 py-2 text-sm bg-gray-600 text-white rounded-md hover:bg-gray-700 transition-colors",children:[a.jsx(K.Z,{className:"w-4 h-4 mr-1"}),"Settings"]}),(0,a.jsxs)("button",{onClick:()=>E(!S),className:"flex items-center px-3 py-2 text-sm bg-gray-600 text-white rounded-md hover:bg-gray-700 transition-colors",children:[a.jsx(X.Z,{className:"w-4 h-4 mr-1"}),"Users (",D?.users?.length||0,")"]})]})]}),k&&a.jsx(o.E.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"p-4 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700",children:(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Font Size"}),a.jsx("input",{type:"range",min:"12",max:"24",value:z,onChange:e=>P(Number(e.target.value)),className:"w-full"}),(0,a.jsxs)("span",{className:"text-xs text-gray-500",children:[z,"px"]})]}),a.jsx("div",{children:(0,a.jsxs)("label",{className:"flex items-center space-x-2",children:[a.jsx("input",{type:"checkbox",checked:I,onChange:e=>O(e.target.checked),className:"rounded"}),a.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Show Minimap"})]})}),a.jsx("div",{children:(0,a.jsxs)("label",{className:"flex items-center space-x-2",children:[a.jsx("input",{type:"checkbox",checked:A,onChange:e=>q(e.target.checked),className:"rounded"}),a.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Word Wrap"})]})}),a.jsx("div",{children:(0,a.jsxs)("label",{className:"flex items-center space-x-2",children:[a.jsx("input",{type:"checkbox",checked:_,onChange:e=>Z(e.target.checked),className:"rounded"}),a.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Auto Save"})]})})]})}),S&&a.jsx(o.E.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"p-4 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700",children:a.jsx("div",{className:"flex flex-wrap gap-2",children:D?.users?.map(e=>a.jsxs("div",{className:"flex items-center px-3 py-1 bg-gray-100 dark:bg-gray-700 rounded-full",children:[a.jsx("div",{className:"w-3 h-3 rounded-full mr-2",style:{backgroundColor:ea(e.user.id)}}),a.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:e.user.name})]},e.user.id))})}),(0,a.jsxs)("div",{className:"flex-1 relative",children:[v&&a.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-white dark:bg-gray-900 z-10",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-6 h-6 border-2 border-blue-600 border-t-transparent rounded-full animate-spin"}),a.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Loading editor..."})]})}),a.jsx(H,{height:"100%",language:g,theme:f,value:p,onChange:er,onMount:F,options:{readOnly:M,fontSize:z,minimap:{enabled:I},wordWrap:A?"on":"off",automaticLayout:!0,scrollBeyondLastLine:!1,renderLineHighlight:"all",cursorBlinking:"smooth",cursorSmoothCaretAnimation:"on",multiCursorModifier:"ctrlCmd",suggestOnTriggerCharacters:!0,quickSuggestions:!0,parameterHints:{enabled:!0},hover:{enabled:!0},contextmenu:!0,mouseWheelZoom:!0}}),w.map(e=>(0,a.jsxs)("div",{className:"absolute z-10 pointer-events-none",style:{top:`${20*e.position.lineNumber}px`,left:`${8*e.position.column}px`},children:[a.jsx("div",{className:"w-0.5 h-5 animate-pulse",style:{backgroundColor:e.userColor}}),a.jsx("div",{className:"absolute top-0 left-1 px-2 py-1 text-xs text-white rounded whitespace-nowrap",style:{backgroundColor:e.userColor},children:e.userName})]},e.userId))]})]})}var ea=r(9614),es=r(3086),en=r(3217);let ei=(0,F.Z)("Terminal",[["polyline",{points:"4 17 10 11 4 5",key:"akl6gq"}],["line",{x1:"12",x2:"20",y1:"19",y2:"19",key:"q2wloq"}]]),el=(0,F.Z)("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]),eo=(0,F.Z)("Bug",[["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M9 7.13v-1a3.003 3.003 0 1 1 6 0v1",key:"d7y7pr"}],["path",{d:"M12 20c-3.3 0-6-2.7-6-6v-3a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v3c0 3.3-2.7 6-6 6",key:"xs1cw7"}],["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M6.53 9C4.6 8.8 3 7.1 3 5",key:"32zzws"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"M3 21c0-2.1 1.7-3.9 3.8-4",key:"4p0ekp"}],["path",{d:"M20.97 5c0 2.1-1.6 3.8-3.5 4",key:"18gb23"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M17.2 17c2.1.1 3.8 1.9 3.8 4",key:"k3fwyw"}]]),ec=(0,F.Z)("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);var ed=r(856);let eu=(0,F.Z)("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);var em=r(2070);let ex=(0,F.Z)("HardDrive",[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]]),ep=(0,F.Z)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),eh=(0,F.Z)("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]),eg=(0,F.Z)("Cpu",[["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"9",y:"9",width:"6",height:"6",key:"o3kz5p"}],["path",{d:"M15 2v2",key:"13l42r"}],["path",{d:"M15 20v2",key:"15mkzm"}],["path",{d:"M2 15h2",key:"1gxd5l"}],["path",{d:"M2 9h2",key:"1bbxkp"}],["path",{d:"M20 15h2",key:"19e6y8"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M9 2v2",key:"165o2o"}],["path",{d:"M9 20v2",key:"i2bqo8"}]]);var ey=r(8600);function ef(){let e=(0,s.useRef)(!1);return(0,ey.L)(()=>(e.current=!0,()=>{e.current=!1}),[]),e}var eb=r(7448),ev=r(7517),ej=r(2609);class ew extends s.Component{getSnapshotBeforeUpdate(e){let t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){let e=this.props.sizeRef.current;e.height=t.offsetHeight||0,e.width=t.offsetWidth||0,e.top=t.offsetTop,e.left=t.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function eN({children:e,isPresent:t}){let r=(0,s.useId)(),a=(0,s.useRef)(null),n=(0,s.useRef)({width:0,height:0,top:0,left:0});return(0,s.useInsertionEffect)(()=>{let{width:e,height:s,top:i,left:l}=n.current;if(t||!a.current||!e||!s)return;a.current.dataset.motionPopId=r;let o=document.createElement("style");return document.head.appendChild(o),o.sheet&&o.sheet.insertRule(`
          [data-motion-pop-id="${r}"] {
            position: absolute !important;
            width: ${e}px !important;
            height: ${s}px !important;
            top: ${i}px !important;
            left: ${l}px !important;
          }
        `),()=>{document.head.removeChild(o)}},[t]),s.createElement(ew,{isPresent:t,childRef:a,sizeRef:n},s.cloneElement(e,{ref:a}))}let ek=({children:e,initial:t,isPresent:r,onExitComplete:a,custom:n,presenceAffectsLayout:i,mode:l})=>{let o=(0,ej.h)(eC),c=(0,s.useId)(),d=(0,s.useMemo)(()=>({id:c,initial:t,isPresent:r,custom:n,onExitComplete:e=>{for(let t of(o.set(e,!0),o.values()))if(!t)return;a&&a()},register:e=>(o.set(e,!1),()=>o.delete(e))}),i?void 0:[r]);return(0,s.useMemo)(()=>{o.forEach((e,t)=>o.set(t,!1))},[r]),s.useEffect(()=>{r||o.size||!a||a()},[r]),"popLayout"===l&&(e=s.createElement(eN,{isPresent:r},e)),s.createElement(ev.O.Provider,{value:d},e)};function eC(){return new Map}var eS=r(6947),eE=r(2382);let eM=e=>e.key||"",eT=({children:e,custom:t,initial:r=!0,onExitComplete:a,exitBeforeEnter:n,presenceAffectsLayout:i=!0,mode:l="sync"})=>{var o;(0,eE.k)(!n,"Replace exitBeforeEnter with mode='wait'");let c=(0,s.useContext)(eS.p).forceRender||function(){let e=ef(),[t,r]=(0,s.useState)(0),a=(0,s.useCallback)(()=>{e.current&&r(t+1)},[t]);return[(0,s.useCallback)(()=>eb.Wi.postRender(a),[a]),t]}()[0],d=ef(),u=function(e){let t=[];return s.Children.forEach(e,e=>{(0,s.isValidElement)(e)&&t.push(e)}),t}(e),m=u,x=(0,s.useRef)(new Map).current,p=(0,s.useRef)(m),h=(0,s.useRef)(new Map).current,g=(0,s.useRef)(!0);if((0,ey.L)(()=>{g.current=!1,function(e,t){e.forEach(e=>{let r=eM(e);t.set(r,e)})}(u,h),p.current=m}),o=()=>{g.current=!0,h.clear(),x.clear()},(0,s.useEffect)(()=>()=>o(),[]),g.current)return s.createElement(s.Fragment,null,m.map(e=>s.createElement(ek,{key:eM(e),isPresent:!0,initial:!!r&&void 0,presenceAffectsLayout:i,mode:l},e)));m=[...m];let y=p.current.map(eM),f=u.map(eM),b=y.length;for(let e=0;e<b;e++){let t=y[e];-1!==f.indexOf(t)||x.has(t)||x.set(t,void 0)}return"wait"===l&&x.size&&(m=[]),x.forEach((e,r)=>{if(-1!==f.indexOf(r))return;let n=h.get(r);if(!n)return;let o=y.indexOf(r),g=e;g||(g=s.createElement(ek,{key:eM(n),isPresent:!1,onExitComplete:()=>{x.delete(r);let e=Array.from(h.keys()).filter(e=>!f.includes(e));if(e.forEach(e=>h.delete(e)),p.current=u.filter(t=>{let a=eM(t);return a===r||e.includes(a)}),!x.size){if(!1===d.current)return;c(),a&&a()}},custom:t,presenceAffectsLayout:i,mode:l},n),x.set(r,g)),m.splice(o,0,g)}),m=m.map(e=>{let t=e.key;return x.has(t)?e:s.createElement(ek,{key:eM(e),isPresent:!0,presenceAffectsLayout:i,mode:l},e)}),s.createElement(s.Fragment,null,x.size?m:m.map(e=>(0,s.cloneElement)(e)))};class eR{constructor(){this.executionQueue=new Map}static getInstance(){return eR.instance||(eR.instance=new eR),eR.instance}async executeCode(e){let{code:t,language:r,input:a,roomId:s,userId:n}=e;if(!t.trim())return{success:!1,error:"Please write some code before executing.",status:"system_error",timestamp:new Date,language:r,codeSize:0};let i=new AbortController,l=`${s}-${n}-${Date.now()}`;this.executionQueue.set(l,i);try{let e=await fetch("/api/code/execute",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({code:t.trim(),language:r,input:a||"",roomId:s,userId:n}),signal:i.signal});if(!e.ok)throw Error(`Execution failed: ${e.status} ${e.statusText}`);let o=await e.json();return this.executionQueue.delete(l),{success:o.success,output:o.output,error:o.error,executionTime:o.executionTime,memoryUsed:o.memoryUsed,compilationTime:o.compilationTime,status:o.status,timestamp:new Date,language:r,codeSize:t.length}}catch(e){if(this.executionQueue.delete(l),e instanceof Error){if("AbortError"===e.name)return{success:!1,error:"Code execution was cancelled.",status:"system_error",timestamp:new Date,language:r,codeSize:t.length};return{success:!1,error:e.message,status:"system_error",timestamp:new Date,language:r,codeSize:t.length}}return{success:!1,error:"An unexpected error occurred during execution.",status:"system_error",timestamp:new Date,language:r,codeSize:t.length}}}cancelExecution(e){let t=this.executionQueue.get(e);return!!t&&(t.abort(),this.executionQueue.delete(e),!0)}cancelRoomExecutions(e){for(let[t,r]of Array.from(this.executionQueue.entries()))t.startsWith(e)&&(r.abort(),this.executionQueue.delete(t))}getExecutionStatus(e){return this.executionQueue.has(e)?{isExecuting:!0,progress:50,currentStep:"Executing code...",estimatedTime:5}:null}validateCodeSyntax(e,t){let r=[];if(!e.trim())return r.push("Code cannot be empty"),{isValid:!1,errors:r};switch(t){case"javascript":return this.validateJavaScript(e);case"typescript":return this.validateTypeScript(e);case"python":return this.validatePython(e);case"java":return this.validateJava(e);case"cpp":return this.validateCpp(e);case"c":return this.validateC(e);case"go":return this.validateGo(e);case"rust":return this.validateRust(e);case"php":return this.validatePhp(e);case"html":return this.validateHtml(e);case"css":return this.validateCss(e);case"sql":return this.validateSql(e);default:return{isValid:!0,errors:[]}}}validateJavaScript(e){let t=[];try{return Function(e),(e.includes("while(true)")||e.includes("for(;;)"))&&t.push("Potential infinite loop detected"),(e.includes("process.exit")||e.includes("window.close"))&&t.push("System exit commands are not allowed"),{isValid:0===t.length,errors:t}}catch(e){return{isValid:!1,errors:["JavaScript syntax error"]}}}validateTypeScript(e){return this.validateJavaScript(e)}validatePython(e){let t=[];return(e.includes("while True:")||e.includes("for i in range(9999999)"))&&t.push("Potential infinite loop detected"),(e.includes("os.system")||e.includes("subprocess.call"))&&t.push("System commands are not allowed"),(e.includes("import os")||e.includes("import subprocess"))&&t.push("System modules are not allowed"),{isValid:0===t.length,errors:t}}validateJava(e){let t=[];return e.includes("public class")||t.push("Java code must contain a public class"),e.includes("public static void main")||t.push("Java code must contain a main method"),(e.includes("System.exit")||e.includes("Runtime.getRuntime()"))&&t.push("System exit commands are not allowed"),{isValid:0===t.length,errors:t}}validateCpp(e){let t=[];return e.includes("int main()")||t.push("C++ code must contain a main function"),(e.includes("system(")||e.includes("exit("))&&t.push("System commands are not allowed"),{isValid:0===t.length,errors:t}}validateC(e){let t=[];return e.includes("int main(")||t.push("C code must contain a main function"),(e.includes("system(")||e.includes("exit("))&&t.push("System commands are not allowed"),{isValid:0===t.length,errors:t}}validateGo(e){let t=[];return e.includes("package main")||t.push("Go code must contain package main"),e.includes("func main()")||t.push("Go code must contain a main function"),(e.includes("os.Exit")||e.includes("syscall.Exec"))&&t.push("System exit commands are not allowed"),{isValid:0===t.length,errors:t}}validateRust(e){let t=[];return e.includes("fn main()")||t.push("Rust code must contain a main function"),(e.includes("std::process::exit")||e.includes("std::env::set_var"))&&t.push("System commands are not allowed"),{isValid:0===t.length,errors:t}}validatePhp(e){let t=[];return(e.includes("exec(")||e.includes("shell_exec(")||e.includes("system("))&&t.push("System commands are not allowed"),(e.includes("file_get_contents")||e.includes("fopen"))&&t.push("File operations are not allowed"),{isValid:0===t.length,errors:t}}validateHtml(e){let t=[];return e.includes("<html")&&e.includes("</html>")||t.push("HTML code must contain html tags"),e.includes("<body")&&e.includes("</body>")||t.push("HTML code must contain body tags"),{isValid:0===t.length,errors:t}}validateCss(e){let t=[];return e.includes("{")&&e.includes("}")||t.push("CSS code must contain style rules"),{isValid:0===t.length,errors:t}}validateSql(e){let t=[],r=e.toUpperCase();for(let e of["DROP","DELETE","UPDATE","INSERT","ALTER","CREATE"])r.includes(e)&&t.push(`${e} operations are not allowed in demo mode`);return{isValid:0===t.length,errors:t}}}let eL=eR.getInstance();function ez({code:e,language:t,roomId:r,onExecutionStart:n,onExecutionComplete:c}){var d;let{user:u}=(0,i.aC)(),{currentRoom:m}=(0,l.N)(),[x,p]=(0,s.useState)(!1),[h,g]=(0,s.useState)(null),[y,f]=(0,s.useState)(null),[b,v]=(0,s.useState)(""),[j,w]=(0,s.useState)("output"),[N,k]=(0,s.useState)([]),[C,S]=(0,s.useState)(!1),E=[{id:"output",label:"Output",icon:ei},{id:"input",label:"Input",icon:el},{id:"debug",label:"Debug",icon:eo},{id:"history",label:"History",icon:ec}],M=new Set(["python","java","cpp","c","go","rust"]).has(t),T=(0,s.useCallback)(async()=>{if(u&&m&&e.trim()){p(!0),f({isExecuting:!0,progress:0,currentStep:"Validating code...",estimatedTime:5}),n?.();try{let a=eL.validateCodeSyntax(e,t);if(!a.isValid){let r={success:!1,error:a.errors.join("\n"),status:"compilation_error",timestamp:new Date,language:t,codeSize:e.length};g(r),k(e=>[r,...e.slice(0,9)]),c?.(r);return}let s=await eL.executeCode({code:e,language:t,input:b.trim(),roomId:r,userId:u.id});g(s),k(e=>[s,...e.slice(0,9)]),c?.(s),"success"===s.status?f({isExecuting:!1,progress:100,currentStep:"Execution completed successfully",estimatedTime:0}):f({isExecuting:!1,progress:100,currentStep:`Execution failed: ${s.status}`,estimatedTime:0})}catch(a){let r={success:!1,error:a instanceof Error?a.message:"Execution failed",status:"system_error",timestamp:new Date,language:t,codeSize:e.length};g(r),k(e=>[r,...e.slice(0,9)]),c?.(r)}finally{p(!1),setTimeout(()=>f(null),3e3)}}},[e,t,b,r,u,m,n,c]),R=(0,s.useCallback)(()=>{m&&(eL.cancelRoomExecutions(m.id),p(!1),f(null))},[m]),L=(0,s.useCallback)(()=>{g(null),k([])},[]),z=(0,s.useCallback)(()=>{h?.output&&navigator.clipboard.writeText(h.output)},[h]),P=(0,s.useCallback)(()=>{if(h?.output){let e=new Blob([h.output],{type:"text/plain"}),r=URL.createObjectURL(e),a=document.createElement("a");a.href=r,a.download=`output-${t}.txt`,a.click(),URL.revokeObjectURL(r)}},[h,t]),I=e=>{switch(e){case"success":return a.jsx(ed.Z,{className:"w-4 h-4 text-green-500"});case"compilation_error":return a.jsx(eu,{className:"w-4 h-4 text-red-500"});case"runtime_error":return a.jsx(eo,{className:"w-4 h-4 text-orange-500"});case"timeout":return a.jsx(em.Z,{className:"w-4 h-4 text-yellow-500"});case"memory_limit":return a.jsx(ex,{className:"w-4 h-4 text-purple-500"});default:return a.jsx(eu,{className:"w-4 h-4 text-gray-500"})}},O=e=>{switch(e){case"success":return"Execution Successful";case"compilation_error":return"Compilation Error";case"runtime_error":return"Runtime Error";case"timeout":return"Execution Timeout";case"memory_limit":return"Memory Limit Exceeded";default:return"System Error"}},A=e=>e<1e3?`${e}ms`:`${(e/1e3).toFixed(2)}s`;return(0,a.jsxs)(en.Zb,{className:"h-full flex flex-col",children:[a.jsx(en.Ol,{className:"pb-3",children:(0,a.jsxs)(en.ll,{className:"flex items-center justify-between text-lg",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx(ei,{className:"w-5 h-5"}),a.jsx("span",{children:"Code Execution"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsxs)(ea.z,{onClick:T,disabled:x||!e.trim(),size:"sm",className:"bg-green-600 hover:bg-green-700 text-white",children:[x?a.jsx(ep,{className:"w-4 h-4 animate-spin mr-2"}):a.jsx(Y.Z,{className:"w-4 h-4 mr-2"}),x?"Running...":"Run Code"]}),x&&(0,a.jsxs)(ea.z,{onClick:R,variant:"outline",size:"sm",className:"text-red-600 border-red-200 hover:bg-red-50",children:[a.jsx(eh,{className:"w-4 h-4 mr-2"}),"Stop"]})]})]})}),(0,a.jsxs)(en.aY,{className:"flex-1 flex flex-col space-y-4",children:[a.jsx(eT,{children:y&&(0,a.jsxs)(o.E.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"p-3 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx(ep,{className:"w-4 h-4 animate-spin text-blue-600"}),a.jsx("span",{className:"text-sm text-blue-800 dark:text-blue-200",children:y.currentStep})]}),y.estimatedTime&&y.estimatedTime>0&&(0,a.jsxs)("span",{className:"text-xs text-blue-600 dark:text-blue-400",children:["~",y.estimatedTime,"s"]})]}),void 0!==y.progress&&a.jsx("div",{className:"mt-2 w-full bg-blue-200 dark:bg-blue-800 rounded-full h-2",children:a.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${y.progress}%`}})})]})}),M&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Input (stdin)"}),(0,a.jsxs)(ea.z,{variant:"ghost",size:"sm",onClick:()=>S(!C),className:"h-6 px-2 text-xs",children:[C?"Hide":"Show"," Input"]})]}),C&&a.jsx("textarea",{value:b,onChange:e=>v(e.target.value),placeholder:"Enter input for your program...",className:"w-full p-3 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 font-mono text-sm resize-none",rows:3})]}),a.jsx("div",{className:"flex space-x-1 border-b border-gray-200 dark:border-gray-700",children:E.map(e=>(0,a.jsxs)("button",{onClick:()=>w(e.id),className:`px-3 py-2 text-sm font-medium rounded-t-md transition-colors flex items-center space-x-2 ${j===e.id?"bg-blue-100 text-blue-700 dark:bg-blue-900/20 dark:text-blue-400 border-b-2 border-blue-500":"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200"}`,children:[a.jsx(e.icon,{className:"w-4 h-4"}),a.jsx("span",{children:e.label})]},e.id))}),(0,a.jsxs)("div",{className:"flex-1 overflow-hidden",children:["output"===j&&a.jsx("div",{className:"h-full flex flex-col",children:h?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 rounded-t-lg border-b border-gray-200 dark:border-gray-700",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[I(h.status),a.jsx("span",{className:`text-sm font-medium px-2 py-1 rounded border ${(e=>{switch(e){case"success":return"border-green-200 bg-green-50 text-green-800 dark:border-green-800 dark:bg-green-900/20 dark:text-green-400";case"compilation_error":return"border-red-200 bg-red-50 text-red-800 dark:border-red-800 dark:bg-red-900/20 dark:text-red-400";case"runtime_error":return"border-orange-200 bg-orange-50 text-orange-800 dark:border-orange-800 dark:bg-orange-900/20 dark:text-orange-400";case"timeout":return"border-yellow-200 bg-yellow-50 text-yellow-800 dark:border-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-400";case"memory_limit":return"border-purple-200 bg-purple-50 text-purple-800 dark:border-purple-800 dark:bg-purple-900/20 dark:text-purple-400";default:return"border-gray-200 bg-gray-50 text-gray-800 dark:border-gray-800 dark:bg-gray-900/20 dark:text-gray-400"}})(h.status)}`,children:O(h.status)})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-4 text-xs text-gray-500 dark:text-gray-400",children:[h.executionTime&&(0,a.jsxs)("span",{className:"flex items-center space-x-1",children:[a.jsx(em.Z,{className:"w-3 h-3"}),a.jsx("span",{children:A(h.executionTime)})]}),h.memoryUsed&&(0,a.jsxs)("span",{className:"flex items-center space-x-1",children:[a.jsx(ex,{className:"w-3 h-3"}),a.jsx("span",{children:(d=h.memoryUsed)<1024?`${d} KB`:`${(d/1024).toFixed(2)} MB`})]}),h.compilationTime&&(0,a.jsxs)("span",{className:"flex items-center space-x-1",children:[a.jsx(eg,{className:"w-3 h-3"}),a.jsx("span",{children:A(h.compilationTime)})]})]})]}),a.jsx("div",{className:"flex-1 overflow-auto p-3 bg-gray-900 text-green-400 font-mono text-sm",children:h.success?a.jsx("pre",{className:"whitespace-pre-wrap",children:h.output}):a.jsx("pre",{className:"whitespace-pre-wrap text-red-400",children:h.error})}),(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 rounded-b-lg border-t border-gray-200 dark:border-gray-700",children:[a.jsx("div",{className:"flex items-center space-x-2",children:(0,a.jsxs)(ea.z,{onClick:L,variant:"outline",size:"sm",className:"h-8 px-3 text-xs",children:[a.jsx(ec,{className:"w-3 h-3 mr-1"}),"Clear"]})}),a.jsx("div",{className:"flex items-center space-x-2",children:h.output&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(ea.z,{onClick:z,variant:"outline",size:"sm",className:"h-8 px-3 text-xs",children:[a.jsx(Q.Z,{className:"w-3 h-3 mr-1"}),"Copy"]}),(0,a.jsxs)(ea.z,{onClick:P,variant:"outline",size:"sm",className:"h-8 px-3 text-xs",children:[a.jsx(U,{className:"w-3 h-3 mr-1"}),"Download"]})]})})]})]}):a.jsx("div",{className:"h-full flex items-center justify-center text-gray-500 dark:text-gray-400",children:(0,a.jsxs)("div",{className:"text-center",children:[a.jsx(ei,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),a.jsx("p",{className:"text-sm",children:"No output yet. Run your code to see results."})]})})}),"input"===j&&a.jsx("div",{className:"h-full p-3",children:(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Standard Input (stdin)"}),a.jsx("textarea",{value:b,onChange:e=>v(e.target.value),placeholder:"Enter input that your program will read from stdin...",className:"w-full h-32 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 font-mono text-sm resize-none"}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"This input will be provided to your program when it runs."})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Command Line Arguments"}),a.jsx(es.I,{placeholder:"arg1 arg2 arg3",className:"font-mono text-sm"}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Space-separated command line arguments."})]})]})}),"debug"===j&&a.jsx("div",{className:"h-full p-3",children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[a.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Code Analysis"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-2 bg-gray-50 dark:bg-gray-800 rounded",children:[a.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Code Size"}),(0,a.jsxs)("span",{className:"text-sm font-medium",children:[e.length," characters"]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between p-2 bg-gray-50 dark:bg-gray-800 rounded",children:[a.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Language"}),a.jsx("span",{className:"text-sm font-medium capitalize",children:t})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between p-2 bg-gray-50 dark:bg-gray-800 rounded",children:[a.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Lines"}),a.jsx("span",{className:"text-sm font-medium",children:e.split("\n").length})]})]})]}),(0,a.jsxs)("div",{children:[a.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Execution Settings"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-2 bg-gray-50 dark:bg-gray-800 rounded",children:[a.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Timeout"}),a.jsx("span",{className:"text-sm font-medium",children:"10 seconds"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between p-2 bg-gray-50 dark:bg-gray-800 rounded",children:[a.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Memory Limit"}),a.jsx("span",{className:"text-sm font-medium",children:"256 MB"})]})]})]})]})}),"history"===j&&a.jsx("div",{className:"h-full p-3",children:(0,a.jsxs)("div",{className:"space-y-3",children:[a.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Recent Executions"}),N.length>0?a.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:N.map((e,t)=>(0,a.jsxs)("div",{className:`p-3 rounded-lg border cursor-pointer transition-colors ${e.success?"border-green-200 bg-green-50 dark:border-green-800 dark:bg-green-900/20":"border-red-200 bg-red-50 dark:border-red-800 dark:bg-red-900/20"}`,onClick:()=>g(e),children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[I(e.status),a.jsx("span",{className:"text-sm font-medium",children:O(e.status)})]}),a.jsx("span",{className:"text-xs text-gray-500",children:e.timestamp.toLocaleTimeString()})]}),a.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:e.output?e.output.substring(0,100)+"...":e.error?.substring(0,100)+"..."})]},t))}):(0,a.jsxs)("div",{className:"text-center text-gray-500 dark:text-gray-400 py-8",children:[a.jsx(ec,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),a.jsx("p",{className:"text-sm",children:"No execution history yet."})]})]})})]})]})]})}var eP=globalThis?.document?s.useLayoutEffect:()=>{};function eI(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}r(5408);var eO=Symbol("radix.slottable");function eA(e){return s.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===eO}var eq=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,t)=>{let r=function(e){let t=function(e){let t=s.forwardRef((e,t)=>{let{children:r,...a}=e;if(s.isValidElement(r)){let e,n;let i=(e=Object.getOwnPropertyDescriptor(r.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning?r.ref:(e=Object.getOwnPropertyDescriptor(r,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning?r.props.ref:r.props.ref||r.ref,l=function(e,t){let r={...t};for(let a in t){let s=e[a],n=t[a];/^on[A-Z]/.test(a)?s&&n?r[a]=(...e)=>{let t=n(...e);return s(...e),t}:s&&(r[a]=s):"style"===a?r[a]={...s,...n}:"className"===a&&(r[a]=[s,n].filter(Boolean).join(" "))}return{...e,...r}}(a,r.props);return r.type!==s.Fragment&&(l.ref=t?function(...e){return t=>{let r=!1,a=e.map(e=>{let a=eI(e,t);return r||"function"!=typeof a||(r=!0),a});if(r)return()=>{for(let t=0;t<a.length;t++){let r=a[t];"function"==typeof r?r():eI(e[t],null)}}}}(t,i):i),s.cloneElement(r,l)}return s.Children.count(r)>1?s.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}(e),r=s.forwardRef((e,r)=>{let{children:n,...i}=e,l=s.Children.toArray(n),o=l.find(eA);if(o){let e=o.props.children,n=l.map(t=>t!==o?t:s.Children.count(e)>1?s.Children.only(null):s.isValidElement(e)?e.props.children:null);return(0,a.jsx)(t,{...i,ref:r,children:s.isValidElement(e)?s.cloneElement(e,void 0,n):null})}return(0,a.jsx)(t,{...i,ref:r,children:n})});return r.displayName=`${e}.Slot`,r}(`Primitive.${t}`),n=s.forwardRef((e,s)=>{let{asChild:n,...i}=e,l=n?r:t;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,a.jsx)(l,{...i,ref:s})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{}),e_=r(2873);function eZ(){return()=>{}}var eV="Avatar",[eD,e$]=function(e,t=[]){let r=[],n=()=>{let t=r.map(e=>s.createContext(e));return function(r){let a=r?.[e]||t;return s.useMemo(()=>({[`__scope${e}`]:{...r,[e]:a}}),[r,a])}};return n.scopeName=e,[function(t,n){let i=s.createContext(n),l=r.length;r=[...r,n];let o=t=>{let{scope:r,children:n,...o}=t,c=r?.[e]?.[l]||i,d=s.useMemo(()=>o,Object.values(o));return(0,a.jsx)(c.Provider,{value:d,children:n})};return o.displayName=t+"Provider",[o,function(r,a){let o=a?.[e]?.[l]||i,c=s.useContext(o);if(c)return c;if(void 0!==n)return n;throw Error(`\`${r}\` must be used within \`${t}\``)}]},function(...e){let t=e[0];if(1===e.length)return t;let r=()=>{let r=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){let a=r.reduce((t,{useScope:r,scopeName:a})=>{let s=r(e)[`__scope${a}`];return{...t,...s}},{});return s.useMemo(()=>({[`__scope${t.scopeName}`]:a}),[a])}};return r.scopeName=t.scopeName,r}(n,...t)]}(eV),[eH,eW]=eD(eV),eF=s.forwardRef((e,t)=>{let{__scopeAvatar:r,...n}=e,[i,l]=s.useState("idle");return(0,a.jsx)(eH,{scope:r,imageLoadingStatus:i,onImageLoadingStatusChange:l,children:(0,a.jsx)(eq.span,{...n,ref:t})})});eF.displayName=eV;var eU="AvatarImage",eJ=s.forwardRef((e,t)=>{let{__scopeAvatar:r,src:n,onLoadingStatusChange:i=()=>{},...l}=e,o=eW(eU,r),c=function(e,{referrerPolicy:t,crossOrigin:r}){let a=(0,e_.useSyncExternalStore)(eZ,()=>!0,()=>!1),n=s.useRef(null),i=a?(n.current||(n.current=new window.Image),n.current):null,[l,o]=s.useState(()=>eG(i,e));return eP(()=>{o(eG(i,e))},[i,e]),eP(()=>{let e=e=>()=>{o(e)};if(!i)return;let a=e("loaded"),s=e("error");return i.addEventListener("load",a),i.addEventListener("error",s),t&&(i.referrerPolicy=t),"string"==typeof r&&(i.crossOrigin=r),()=>{i.removeEventListener("load",a),i.removeEventListener("error",s)}},[i,r,t]),l}(n,l),d=function(e){let t=s.useRef(e);return s.useEffect(()=>{t.current=e}),s.useMemo(()=>(...e)=>t.current?.(...e),[])}(e=>{i(e),o.onImageLoadingStatusChange(e)});return eP(()=>{"idle"!==c&&d(c)},[c,d]),"loaded"===c?(0,a.jsx)(eq.img,{...l,ref:t,src:n}):null});eJ.displayName=eU;var eB="AvatarFallback",eY=s.forwardRef((e,t)=>{let{__scopeAvatar:r,delayMs:n,...i}=e,l=eW(eB,r),[o,c]=s.useState(void 0===n);return s.useEffect(()=>{if(void 0!==n){let e=window.setTimeout(()=>c(!0),n);return()=>window.clearTimeout(e)}},[n]),o&&"loaded"!==l.imageLoadingStatus?(0,a.jsx)(eq.span,{...i,ref:t}):null});function eG(e,t){return e?t?(e.src!==t&&(e.src=t),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}eY.displayName=eB;var eQ=r(3096);let eK=s.forwardRef(({className:e,...t},r)=>a.jsx(eF,{ref:r,className:(0,eQ.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",e),...t}));eK.displayName=eF.displayName;let eX=s.forwardRef(({className:e,...t},r)=>a.jsx(eJ,{ref:r,className:(0,eQ.cn)("aspect-square h-full w-full",e),...t}));eX.displayName=eJ.displayName;let e0=s.forwardRef(({className:e,...t},r)=>a.jsx(eY,{ref:r,className:(0,eQ.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",e),...t}));e0.displayName=eY.displayName;var e1=r(9345);let e2=(0,F.Z)("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]),e3=(0,F.Z)("Smile",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]),e4=(0,F.Z)("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);function e5({}){let{socket:e,isConnected:t}=(0,W.s)(),{user:r}=(0,i.aC)(),{currentRoom:n}=(0,l.N)(),[c,d]=(0,s.useState)([]),[u,m]=(0,s.useState)(""),[x,p]=(0,s.useState)([]),[h,g]=(0,s.useState)(!1),[y,f]=(0,s.useState)(!1),[b,v]=(0,s.useState)(!1),[j,w]=(0,s.useState)(!1),[N,k]=(0,s.useState)(""),[C,S]=(0,s.useState)("javascript"),E=(0,s.useRef)(null),M=(0,s.useRef)(),T=()=>{e&&n&&r&&(h||(g(!0),e.emit("startTyping",{roomId:n.id,userId:r.id})),M.current&&clearTimeout(M.current),M.current=setTimeout(()=>{g(!1),e.emit("stopTyping",{roomId:n.id,userId:r.id})},2e3))},R=(t,a="text")=>{if(!t.trim()||!e||!n||!r)return;let s={id:Date.now().toString(),text:t,sender:{id:r.id,name:r.name,avatar:r.avatar},timestamp:new Date,type:a,status:"sending"};d(e=>[...e,s]),m(""),k(""),w(!1),g(!1),M.current&&clearTimeout(M.current),e.emit("stopTyping",{roomId:n.id,userId:r.id}),e.emit("sendMessage",{roomId:n.id,message:{...s,timestamp:s.timestamp.toISOString()}})},L=e=>{switch(e){case"sending":return a.jsx("div",{className:"w-3 h-3 border-2 border-gray-300 border-t-blue-500 rounded-full animate-spin"});case"sent":return a.jsx("div",{className:"w-3 h-3 border-2 border-gray-300 border-t-blue-500 rounded-full"});case"delivered":return a.jsx("div",{className:"w-3 h-3 border-2 border-blue-500 rounded-full"});case"read":return a.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full"});default:return null}},z=e=>e.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});return(0,a.jsxs)("div",{className:"flex flex-col h-full",children:[(0,a.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 custom-scrollbar",children:[a.jsx(eT,{children:c.map(e=>a.jsx(o.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},className:`flex ${e.sender.id===r?.id?"justify-end":"justify-start"}`,children:a.jsx("div",{className:`max-w-[80%] ${e.sender.id===r?.id?"order-2":"order-1"}`,children:(0,a.jsxs)("div",{className:`flex items-end space-x-2 ${e.sender.id===r?.id?"flex-row-reverse space-x-reverse":""}`,children:[e.sender.id!==r?.id&&(0,a.jsxs)(eK,{className:"w-6 h-6",children:[a.jsx(eX,{src:e.sender.avatar}),a.jsx(e0,{className:"text-xs",children:e.sender.name.charAt(0).toUpperCase()})]}),(0,a.jsxs)("div",{className:`px-3 py-2 rounded-lg ${e.sender.id===r?.id?"bg-blue-600 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-900 dark:text-gray-100"}`,children:[e.sender.id!==r?.id&&a.jsx("div",{className:"text-xs font-medium mb-1 opacity-75",children:e.sender.name}),"code"===e.type?a.jsx("pre",{className:"text-sm whitespace-pre-wrap font-mono",children:a.jsx("code",{children:e.text})}):a.jsx("div",{className:"text-sm",children:e.text}),(0,a.jsxs)("div",{className:`flex items-center justify-between mt-1 text-xs opacity-75 ${e.sender.id===r?.id?"text-blue-100":"text-gray-500"}`,children:[a.jsx("span",{children:z(e.timestamp)}),e.sender.id===r?.id&&L(e.status)]})]})]})})},e.id))}),x.filter(e=>e.isTyping&&e.id!==r?.id).map(e=>a.jsx(o.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"flex justify-start",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2 px-3 py-2 bg-gray-100 dark:bg-gray-700 rounded-lg",children:[(0,a.jsxs)(eK,{className:"w-6 h-6",children:[a.jsx(eX,{src:e.avatar}),a.jsx(e0,{className:"text-xs",children:e.name.charAt(0).toUpperCase()})]}),(0,a.jsxs)("div",{className:"flex space-x-1",children:[a.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"}),a.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),a.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})]})},e.id)),a.jsx("div",{ref:E})]}),j&&(0,a.jsxs)(o.E.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"border-t border-gray-200 dark:border-gray-700 p-3 space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsxs)("select",{value:C,onChange:e=>S(e.target.value),className:"px-2 py-1 text-xs border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-800",children:[a.jsx("option",{value:"javascript",children:"JavaScript"}),a.jsx("option",{value:"python",children:"Python"}),a.jsx("option",{value:"java",children:"Java"}),a.jsx("option",{value:"cpp",children:"C++"}),a.jsx("option",{value:"html",children:"HTML"}),a.jsx("option",{value:"css",children:"CSS"})]}),a.jsx(ea.z,{size:"sm",onClick:()=>{N.trim()&&R(`\`\`\`${C}
${N}
\`\`\``,"code")},className:"px-3 py-1 text-xs",children:"Send Code"}),a.jsx(ea.z,{size:"sm",variant:"outline",onClick:()=>w(!1),className:"px-3 py-1 text-xs",children:"Cancel"})]}),a.jsx("textarea",{value:N,onChange:e=>k(e.target.value),placeholder:"Enter your code here...",className:"w-full h-20 px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-800 font-mono resize-none"})]}),(0,a.jsxs)("div",{className:"border-t border-gray-200 dark:border-gray-700 p-3",children:[(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),u.trim()&&R(u.trim())},className:"flex items-center space-x-2",children:[(0,a.jsxs)("div",{className:"flex-1 relative",children:[a.jsx(es.I,{value:u,onChange:e=>{m(e.target.value),T()},placeholder:"Type a message...",className:"pr-20"}),(0,a.jsxs)("div",{className:"absolute right-2 top-1/2 transform -translate-y-1/2 flex items-center space-x-1",children:[a.jsx(ea.z,{type:"button",size:"sm",variant:"ghost",onClick:()=>w(!j),className:"h-6 w-6 p-0 hover:bg-gray-100 dark:hover:bg-gray-700",children:a.jsx(e1.Z,{className:"w-3 h-3"})}),a.jsx(ea.z,{type:"button",size:"sm",variant:"ghost",onClick:()=>v(!b),className:"h-6 w-6 p-0 hover:bg-gray-100 dark:hover:bg-gray-700",children:a.jsx(e2,{className:"w-3 h-3"})}),a.jsx(ea.z,{type:"button",size:"sm",variant:"ghost",onClick:()=>f(!y),className:"h-6 w-6 p-0 hover:bg-gray-100 dark:hover:bg-gray-700",children:a.jsx(e3,{className:"w-3 h-3"})})]})]}),a.jsx(ea.z,{type:"submit",size:"sm",disabled:!u.trim(),children:a.jsx(e4,{className:"w-4 h-4"})})]}),b&&a.jsx("input",{type:"file",onChange:e=>{let t=e.target.files?.[0];if(t){let e=t.name;R(` File: ${e}`,"file")}v(!1)},className:"mt-2 w-full text-sm",accept:"image/*,.pdf,.doc,.docx,.txt,.js,.py,.java,.cpp,.html,.css"})]})]})}var e6=r(5667);let e8=(0,F.Z)("MicOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]),e7=(0,F.Z)("VideoOff",[["path",{d:"M10.66 6H14a2 2 0 0 1 2 2v2.34l1 1L22 8v8",key:"ubwiq0"}],["path",{d:"M16 16a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h2l10 10Z",key:"1l10zd"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]),e9=(0,F.Z)("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);var te=r(8004),tt=r(4767);let tr=(0,F.Z)("Minimize",[["path",{d:"M8 3v3a2 2 0 0 1-2 2H3",key:"hohbtr"}],["path",{d:"M21 8h-3a2 2 0 0 1-2-2V3",key:"5jw1f3"}],["path",{d:"M3 16h3a2 2 0 0 1 2 2v3",key:"198tvr"}],["path",{d:"M16 21v-3a2 2 0 0 1 2-2h3",key:"ph8mxp"}]]),ta=(0,F.Z)("Maximize",[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]]),ts=(0,F.Z)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]),tn=(0,F.Z)("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]),ti=(0,F.Z)("PhoneOff",[["path",{d:"M10.68 13.31a16 16 0 0 0 3.41 2.6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7 2 2 0 0 1 1.72 2v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.42 19.42 0 0 1-3.33-2.67m-2.67-3.34a19.79 19.79 0 0 1-3.07-8.63A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91",key:"z86iuo"}],["line",{x1:"22",x2:"2",y1:"2",y2:"22",key:"11kh81"}]]);function tl({roomId:e}){let{socket:t,isConnected:r}=(0,W.s)(),{user:n}=(0,i.aC)(),{currentRoom:c}=(0,l.N)(),[d,u]=(0,s.useState)([]),[m,x]=(0,s.useState)(!1),[p,h]=(0,s.useState)(!0),[g,y]=(0,s.useState)(!0),[f,b]=(0,s.useState)(!1),[v,j]=(0,s.useState)(!1),[w,N]=(0,s.useState)(!1),[k,C]=(0,s.useState)(null),[S,E]=(0,s.useState)(null),[M,T]=(0,s.useState)(!1),[R,L]=(0,s.useState)(null),z=(0,s.useRef)(null),P=(0,s.useRef)(null),I=(0,s.useRef)(null),O=async()=>{try{T(!0),L(null);let e=await navigator.mediaDevices.getUserMedia({video:p,audio:g});C(e);let r={id:n.id,name:n.name,avatar:n.avatar,stream:e,isVideoEnabled:p,isAudioEnabled:g,isScreenSharing:!1,isSpeaking:!1,isLocal:!0};u([r]),x(!0),t&&c&&t.emit("joinVideoCall",{roomId:c.id,participant:r}),z.current&&(z.current.srcObject=e)}catch(e){L(e.message||"Failed to start call"),console.error("Error starting call:",e)}finally{T(!1)}},A=async()=>{if(!k)return;let e=k.getVideoTracks()[0];e&&(e.enabled=!p,h(!p),u(e=>e.map(e=>e.isLocal?{...e,isVideoEnabled:!p}:e)),t&&c&&n&&t.emit("updateParticipant",{roomId:c.id,userId:n.id,updates:{isVideoEnabled:!p}}))},q=async()=>{if(!k)return;let e=k.getAudioTracks()[0];e&&(e.enabled=!g,y(!g),u(e=>e.map(e=>e.isLocal?{...e,isAudioEnabled:!g}:e)),t&&c&&n&&t.emit("updateParticipant",{roomId:c.id,userId:n.id,updates:{isAudioEnabled:!g}}))},_=async()=>{try{if(f)S&&(S.getTracks().forEach(e=>e.stop()),E(null)),b(!1),t&&c&&n&&t.emit("stopScreenShare",{roomId:c.id,userId:n.id});else{let e=await navigator.mediaDevices.getDisplayMedia({video:!0,audio:!1});E(e),b(!0),P.current&&(P.current.srcObject=e),t&&c&&n&&t.emit("startScreenShare",{roomId:c.id,userId:n.id,streamId:e.id})}}catch(e){L(e.message||"Failed to toggle screen share"),console.error("Error toggling screen share:",e)}},Z=(e,t)=>{let r=0===t||e.isScreenSharing;return a.jsx(o.E.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:.3},className:`relative group ${r?"col-span-2 row-span-2":""}`,children:(0,a.jsxs)("div",{className:"relative w-full h-full bg-gray-900 rounded-lg overflow-hidden",children:[e.stream&&e.isVideoEnabled?a.jsx("video",{ref:e.isLocal?z:void 0,autoPlay:!0,playsInline:!0,muted:e.isLocal,className:"w-full h-full object-cover"}):a.jsx("div",{className:"w-full h-full bg-gradient-to-br from-gray-700 to-gray-900 flex items-center justify-center",children:(0,a.jsxs)(eK,{className:"w-20 h-20",children:[a.jsx(eX,{src:e.avatar}),a.jsx(e0,{className:"text-2xl",children:e.name.charAt(0).toUpperCase()})]})}),a.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/70 to-transparent p-3",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx("span",{className:"text-white font-medium",children:e.name}),e.isLocal&&a.jsx(e6.C,{variant:"secondary",className:"text-xs",children:"You"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[!e.isAudioEnabled&&a.jsx("div",{className:"w-6 h-6 bg-red-500 rounded-full flex items-center justify-center",children:a.jsx(e8,{className:"w-3 h-3 text-white"})}),!e.isVideoEnabled&&a.jsx("div",{className:"w-6 h-6 bg-red-500 rounded-full flex items-center justify-center",children:a.jsx(e7,{className:"w-3 h-3 text-white"})}),e.isScreenSharing&&a.jsx("div",{className:"w-6 h-6 bg-blue-500 rounded-full flex items-center justify-center",children:a.jsx(e9,{className:"w-3 h-3 text-white"})})]})]})}),e.isSpeaking&&a.jsx("div",{className:"absolute top-3 right-3 w-3 h-3 bg-green-500 rounded-full animate-pulse"})]})},e.id)};return n&&c?(0,a.jsxs)(en.Zb,{className:"h-full flex flex-col",children:[a.jsx(en.Ol,{className:"pb-3 border-b",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)(en.ll,{className:"text-lg flex items-center space-x-2",children:[a.jsx(te.Z,{className:"w-5 h-5"}),a.jsx("span",{children:"Video Call"}),m&&(0,a.jsxs)(e6.C,{variant:"secondary",className:"ml-2",children:[d.length," participants"]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx(ea.z,{variant:"outline",size:"sm",onClick:()=>N(!w),className:w?"bg-blue-50 border-blue-200 text-blue-600":"",children:a.jsx(tt.Z,{className:"w-4 h-4"})}),a.jsx(ea.z,{variant:"outline",size:"sm",onClick:()=>{v?document.exitFullscreen&&document.exitFullscreen():I.current?.requestFullscreen&&I.current.requestFullscreen(),j(!v)},children:v?a.jsx(tr,{className:"w-4 h-4"}):a.jsx(ta,{className:"w-4 h-4"})}),a.jsx(ea.z,{variant:"outline",size:"sm",children:a.jsx(K.Z,{className:"w-4 h-4"})})]})]})}),(0,a.jsxs)(en.aY,{className:"flex-1 flex flex-col p-0",children:[m?(0,a.jsxs)("div",{className:"flex-1 flex flex-col",children:[a.jsx("div",{ref:I,className:`flex-1 p-4 grid ${(()=>{let e=d.length;return 1===e?"grid-cols-1":2===e||e<=4?"grid-cols-2":e<=9?"grid-cols-3":"grid-cols-4"})()} gap-4 min-h-0`,children:a.jsx(eT,{children:d.map((e,t)=>Z(e,t))})}),a.jsx("div",{className:"border-t p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-center space-x-4",children:[a.jsx(ea.z,{onClick:q,variant:g?"outline":"default",size:"lg",className:`w-12 h-12 rounded-full ${g?"":"bg-red-600 hover:bg-red-700"}`,children:g?a.jsx(tn,{className:"w-5 h-5"}):a.jsx(e8,{className:"w-5 h-5"})}),a.jsx(ea.z,{onClick:A,variant:p?"outline":"default",size:"lg",className:`w-12 h-12 rounded-full ${p?"":"bg-red-600 hover:bg-red-700"}`,children:p?a.jsx(te.Z,{className:"w-5 h-5"}):a.jsx(e7,{className:"w-5 h-5"})}),a.jsx(ea.z,{onClick:_,variant:f?"default":"outline",size:"lg",className:`w-12 h-12 rounded-full ${f?"bg-blue-600 hover:bg-blue-700":""}`,children:a.jsx(e9,{className:"w-5 h-5"})}),a.jsx(ea.z,{onClick:()=>{k&&k.getTracks().forEach(e=>e.stop()),S&&S.getTracks().forEach(e=>e.stop()),t&&c&&n&&t.emit("leaveVideoCall",{roomId:c.id,userId:n.id}),C(null),E(null),u([]),x(!1),b(!1),L(null)},variant:"default",size:"lg",className:"w-12 h-12 rounded-full bg-red-600 hover:bg-red-700",children:a.jsx(ti,{className:"w-5 h-5"})})]})})]}):a.jsx("div",{className:"flex-1 flex items-center justify-center p-6",children:(0,a.jsxs)("div",{className:"text-center space-y-6",children:[a.jsx("div",{className:"w-20 h-20 bg-blue-100 dark:bg-blue-900/20 rounded-full flex items-center justify-center mx-auto",children:a.jsx(te.Z,{className:"w-10 h-10 text-blue-600"})}),(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100 mb-2",children:"Start Video Call"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Connect with your team members in real-time"})]}),R&&a.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-3",children:a.jsx("p",{className:"text-red-600 dark:text-red-400 text-sm",children:R})}),a.jsx("div",{className:"flex items-center justify-center space-x-4",children:a.jsx(ea.z,{onClick:O,disabled:M,className:"bg-blue-600 hover:bg-blue-700 text-white px-6",children:M?(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),a.jsx("span",{children:"Connecting..."})]}):(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx(ts,{className:"w-4 h-4"}),a.jsx("span",{children:"Start Call"})]})})})]})}),S&&a.jsx("video",{ref:P,autoPlay:!0,playsInline:!0,muted:!0,className:"hidden"})]})]}):a.jsx(en.Zb,{className:"h-full",children:a.jsx(en.aY,{className:"flex items-center justify-center h-full",children:a.jsx("p",{className:"text-gray-500",children:"Join a room to use video calls"})})})}let to=[{id:"javascript",name:"JavaScript",extension:"js",mimeType:"text/javascript",code:`// Welcome to JavaScript!
// Write your code below

function greet(name) {
  return \`Hello, \${name}!\`;
}

// Example usage
console.log(greet('World'));

// Your code here
function main() {
  // Add your logic here
  console.log('Code executed successfully!');
}

main();`,description:"JavaScript runtime environment",isCompiled:!1,executionTimeout:10,memoryLimit:128},{id:"typescript",name:"TypeScript",extension:"ts",mimeType:"text/typescript",code:`// Welcome to TypeScript!
// Write your code below

interface User {
  name: string;
  age: number;
}

function greet(user: User): string {
  return \`Hello, \${user.name}! You are \${user.age} years old.\`;
}

// Example usage
const user: User = { name: 'World', age: 25 };
console.log(greet(user));

// Your code here
function main(): void {
  // Add your logic here
  console.log('Code executed successfully!');
}

main();`,description:"Typed JavaScript with compilation",isCompiled:!1,executionTimeout:15,memoryLimit:128},{id:"python",name:"Python",extension:"py",mimeType:"text/x-python",code:`# Welcome to Python!
# Write your code below

def greet(name):
    return f"Hello, {name}!"

# Example usage
print(greet('World'))

# Your code here
def main():
    # Add your logic here
    print("Code executed successfully!")

if __name__ == "__main__":
    main()`,description:"Python interpreter",isCompiled:!1,executionTimeout:10,memoryLimit:256},{id:"java",name:"Java",extension:"java",mimeType:"text/x-java-source",code:`// Welcome to Java!
// Write your code below

public class Main {
    public static void main(String[] args) {
        // Add your logic here
        System.out.println("Code executed successfully!");
        
        // Example method call
        String result = greet("World");
        System.out.println(result);
    }
    
    public static String greet(String name) {
        return "Hello, " + name + "!";
    }
}`,description:"Java with JVM compilation",isCompiled:!0,executionTimeout:20,memoryLimit:512},{id:"cpp",name:"C++",extension:"cpp",mimeType:"text/x-c++src",code:`// Welcome to C++!
// Write your code below

#include <iostream>
#include <string>

using namespace std;

string greet(string name) {
    return "Hello, " + name + "!";
}

int main() {
    // Add your logic here
    cout << "Code executed successfully!" << endl;
    
    // Example function call
    string result = greet("World");
    cout << result << endl;
    
    return 0;
}`,description:"C++ with GCC compilation",isCompiled:!0,executionTimeout:15,memoryLimit:256},{id:"c",name:"C",extension:"c",mimeType:"text/x-csrc",code:`// Welcome to C!
// Write your code below

#include <stdio.h>
#include <string.h>

char* greet(char* name) {
    static char result[100];
    sprintf(result, "Hello, %s!", name);
    return result;
}

int main() {
    // Add your logic here
    printf("Code executed successfully!\\n");
    
    // Example function call
    char* result = greet("World");
    printf("%s\\n", result);
    
    return 0;
}`,description:"C with GCC compilation",isCompiled:!0,executionTimeout:15,memoryLimit:256},{id:"go",name:"Go",extension:"go",mimeType:"text/x-go",code:`// Welcome to Go!
// Write your code below

package main

import "fmt"

func greet(name string) string {
    return fmt.Sprintf("Hello, %s!", name)
}

func main() {
    // Add your logic here
    fmt.Println("Code executed successfully!")
    
    // Example function call
    result := greet("World")
    fmt.Println(result)
}`,description:"Go with compilation",isCompiled:!0,executionTimeout:15,memoryLimit:256},{id:"rust",name:"Rust",extension:"rs",mimeType:"text/x-rust",code:`// Welcome to Rust!
// Write your code below

fn greet(name: &str) -> String {
    format!("Hello, {}!", name)
}

fn main() {
    // Add your logic here
    println!("Code executed successfully!");
    
    // Example function call
    let result = greet("World");
    println!("{}", result);
}`,description:"Rust with compilation",isCompiled:!0,executionTimeout:20,memoryLimit:256},{id:"php",name:"PHP",extension:"php",mimeType:"text/x-php",code:`<?php
// Welcome to PHP!
// Write your code below

function greet($name) {
    return "Hello, " . $name . "!";
}

// Example usage
echo greet('World') . PHP_EOL;

// Your code here
function main() {
    // Add your logic here
    echo "Code executed successfully!" . PHP_EOL;
}

main();
?>`,description:"PHP interpreter",isCompiled:!1,executionTimeout:10,memoryLimit:128},{id:"html",name:"HTML",extension:"html",mimeType:"text/html",code:`<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Welcome to HTML!</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 40px;
            background-color: #f0f0f0;
        }
        .container {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #333;
        }
        .code-output {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 4px;
            border-left: 4px solid #007bff;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Welcome to HTML!</h1>
        <p>This is your HTML template. Customize it as needed!</p>
        
        <div class="code-output">
            <strong>Output:</strong> HTML page rendered successfully!
        </div>
        
        <script>
            // Your JavaScript code here
            console.log('HTML page loaded successfully!');
            
            function greet(name) {
                return 'Hello, ' + name + '!';
            }
            
            // Example usage
            document.addEventListener('DOMContentLoaded', function() {
                console.log(greet('World'));
            });
        </script>
    </div>
</body>
</html>`,description:"HTML with browser rendering",isCompiled:!1,executionTimeout:5,memoryLimit:64},{id:"css",name:"CSS",extension:"css",mimeType:"text/css",code:`/* Welcome to CSS! */
/* Write your styles below */

body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    margin: 0;
    padding: 20px;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    min-height: 100vh;
    display: flex;
    align-items: center;
    justify-content: center;
}

.container {
    background: white;
    padding: 30px;
    border-radius: 15px;
    box-shadow: 0 10px 30px rgba(0,0,0,0.2);
    text-align: center;
    max-width: 500px;
}

h1 {
    color: #333;
    margin-bottom: 20px;
    font-size: 2.5em;
}

.message {
    background: #e8f5e8;
    color: #2d5a2d;
    padding: 15px;
    border-radius: 8px;
    border-left: 4px solid #4caf50;
    margin: 20px 0;
}

/* Your custom styles here */
.custom-button {
    background: #007bff;
    color: white;
    border: none;
    padding: 12px 24px;
    border-radius: 6px;
    cursor: pointer;
    font-size: 16px;
    transition: background 0.3s ease;
}

.custom-button:hover {
    background: #0056b3;
}`,description:"CSS styling",isCompiled:!1,executionTimeout:5,memoryLimit:64},{id:"sql",name:"SQL",extension:"sql",mimeType:"text/x-sql",code:`-- Welcome to SQL!
-- Write your queries below

-- Example table creation
CREATE TABLE IF NOT EXISTS users (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    name VARCHAR(100) NOT NULL,
    email VARCHAR(255) UNIQUE NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- Example data insertion
INSERT INTO users (name, email) VALUES 
    ('John Doe', 'john@example.com'),
    ('Jane Smith', 'jane@example.com'),
    ('Bob Johnson', 'bob@example.com');

-- Example SELECT query
SELECT 
    id,
    name,
    email,
    created_at
FROM users
ORDER BY created_at DESC;

-- Your SQL queries here
-- SELECT * FROM users WHERE name LIKE '%John%';`,description:"SQL database queries",isCompiled:!1,executionTimeout:30,memoryLimit:128}];function tc(e){return to.find(t=>t.id===e)}let td=(0,F.Z)("Layout",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["line",{x1:"3",x2:"21",y1:"9",y2:"9",key:"1vqk6q"}],["line",{x1:"9",x2:"9",y1:"21",y2:"9",key:"wpwpyp"}]]),tu=(0,F.Z)("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]),tm=(0,F.Z)("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);var tx=r(8514),tp=r(1761);function th({roomId:e,initialLanguage:t="javascript",initialCode:r="",onCodeChange:n,onLanguageChange:c}){let{user:d}=(0,i.aC)(),{currentRoom:u}=(0,l.N)(),{socket:m,isConnected:x}=(0,W.s)(),[p,h]=(0,s.useState)(r),[g,y]=(0,s.useState)(t),[f,b]=(0,s.useState)("dark"),[v,j]=(0,s.useState)(!1),[w,N]=(0,s.useState)({execution:!0,chat:!0,video:!0}),[k,C]=(0,s.useState)("default"),S=(0,s.useCallback)(e=>{h(e),n?.(e),m&&x&&u&&m.emit("codeChange",{roomId:u.id,code:e,language:g,userId:d?.id})},[m,x,u,g,d?.id,n]),E=(0,s.useCallback)(()=>{m&&x&&u&&m.emit("executionStart",{roomId:u.id,userId:d?.id,language:g})},[m,x,u,d?.id,g]),M=(0,s.useCallback)(e=>{m&&x&&u&&m.emit("executionComplete",{roomId:u.id,userId:d?.id,result:e,language:g})},[m,x,u,d?.id,g]),T=(0,s.useCallback)(()=>{document.fullscreenElement?(document.exitFullscreen(),j(!1)):(document.documentElement.requestFullscreen(),j(!0))},[]),R=(0,s.useCallback)(e=>{N(t=>({...t,[e]:!t[e]}))},[]),L=(0,s.useCallback)(e=>{(C(e),"coding"===e)?N({execution:!0,chat:!1,video:!1}):N({execution:!0,chat:!0,video:!0})},[]);return u?(0,a.jsxs)("div",{className:"h-full flex flex-col bg-gray-50 dark:bg-gray-900",children:[a.jsx(o.E.header,{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 px-4 py-3 shadow-sm",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{duration:.3},children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[a.jsx("div",{className:"flex items-center space-x-4",children:(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-600 to-purple-600 rounded-lg flex items-center justify-center",children:a.jsx(e1.Z,{className:"w-5 h-5 text-white"})}),(0,a.jsxs)("div",{children:[a.jsx("h1",{className:"text-lg font-bold text-gray-900 dark:text-gray-100",children:u.name}),(0,a.jsxs)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[u.isPublic?"Public Room":"Private Room","  ",u.users?.length||0," users"]})]})]})}),a.jsx("div",{className:"flex items-center space-x-2",children:a.jsx("div",{className:"flex items-center space-x-1 bg-gray-100 dark:bg-gray-700 rounded-lg p-1",children:[{id:"default",label:"Default",icon:td},{id:"coding",label:"Coding",icon:e1.Z},{id:"collaboration",label:"Collaboration",icon:X.Z}].map(e=>(0,a.jsxs)("button",{onClick:()=>L(e.id),className:`px-3 py-1.5 text-xs font-medium rounded-md transition-colors flex items-center space-x-2 ${k===e.id?"bg-blue-500 text-white shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100"}`,children:[a.jsx(e.icon,{className:"w-3 h-3"}),a.jsx("span",{children:e.label})]},e.id))})}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx(ea.z,{variant:"outline",size:"sm",onClick:()=>R("execution"),className:w.execution?"bg-blue-50 border-blue-200 text-blue-600":"",title:"Toggle Execution Panel",children:a.jsx(ei,{className:"w-4 h-4"})}),a.jsx(ea.z,{variant:"outline",size:"sm",onClick:()=>R("chat"),className:w.chat?"bg-blue-50 border-blue-200 text-blue-600":"",title:"Toggle Chat Panel",children:a.jsx(tt.Z,{className:"w-4 h-4"})}),a.jsx(ea.z,{variant:"outline",size:"sm",onClick:()=>R("video"),className:w.video?"bg-blue-50 border-blue-200 text-blue-600":"",title:"Toggle Video Panel",children:a.jsx(te.Z,{className:"w-4 h-4"})}),a.jsx("div",{className:"w-px h-6 bg-gray-300 dark:bg-gray-600"}),a.jsx(ea.z,{variant:"outline",size:"sm",onClick:T,title:v?"Exit Fullscreen":"Enter Fullscreen",children:v?a.jsx(tu,{className:"w-4 h-4"}):a.jsx(tm,{className:"w-4 h-4"})})]})]})}),a.jsx("div",{className:"flex-1 overflow-hidden",children:(0,a.jsxs)("div",{className:"flex h-full",children:[(0,a.jsxs)("div",{className:"w-3/4 h-full flex flex-col",children:[a.jsx("div",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 px-4 py-2",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsxs)("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:["Language: ",tc(g)?.name||g]}),(0,a.jsxs)("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:[p.length," characters  ",p.split("\n").length," lines"]})]}),a.jsx("div",{className:"flex items-center space-x-2",children:(0,a.jsxs)(ea.z,{variant:"outline",size:"sm",onClick:()=>b("dark"===f?"light":"dark"),className:"h-8 px-3 text-xs",children:["dark"===f?a.jsx(tx.Z,{className:"w-4 h-4"}):a.jsx(tp.Z,{className:"w-4 h-4"}),a.jsx("span",{className:"ml-1",children:"dark"===f?"Light":"Dark"})]})})]})}),a.jsx("div",{className:"flex-1",children:a.jsx(er,{roomId:e,language:g,initialCode:p,onCodeChange:S,theme:f})})]}),(0,a.jsxs)("div",{className:"w-1/4 h-full flex flex-col space-y-4 p-4 bg-gray-50 dark:bg-gray-800 border-l border-gray-200 dark:border-gray-700",children:[w.execution&&a.jsx(o.E.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{duration:.3},className:"flex-1 min-h-0",children:a.jsx(ez,{code:p,language:g,roomId:e,onExecutionStart:E,onExecutionComplete:M})}),w.chat&&a.jsx(o.E.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{duration:.3},className:"h-64 min-h-0",children:a.jsx(e5,{roomId:e})}),w.video&&a.jsx(o.E.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{duration:.3},className:"h-48 min-h-0",children:a.jsx(tl,{roomId:e})}),!w.execution&&!w.chat&&!w.video&&a.jsx("div",{className:"flex-1 flex items-center justify-center text-gray-500 dark:text-gray-400",children:(0,a.jsxs)("div",{className:"text-center",children:[a.jsx(td,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),a.jsx("p",{className:"text-sm",children:"All panels are hidden"}),a.jsx("p",{className:"text-xs",children:"Use the toolbar buttons to show panels"})]})})]})]})})]}):a.jsx("div",{className:"h-full flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[a.jsx(e1.Z,{className:"w-16 h-16 mx-auto mb-4 text-gray-400"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Loading collaborative environment..."})]})})}function tg(){let e=(0,n.useParams)(),t=(0,n.useRouter)(),{user:r,isLoading:o}=(0,i.aC)(),{currentRoom:c,joinRoom:d,isLoading:u}=(0,l.N)(),[m,x]=(0,s.useState)(!1),[p,h]=(0,s.useState)(null),[g,y]=(0,s.useState)(""),[f,b]=(0,s.useState)("javascript"),v=e.roomId,j=(0,s.useCallback)(async()=>{if(r&&v)try{x(!0),h(null),await d(v,"",t);let e=tc(f);e&&y(e.code)}catch(e){console.error("Failed to join room:",e),h(e instanceof Error?e.message:"Failed to join room")}finally{x(!1)}},[r,v,d,t,f]),w=(0,s.useCallback)(e=>{y(e)},[]),N=(0,s.useCallback)(e=>{b(e)},[]);return o||u?a.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-50 dark:bg-gray-900",children:(0,a.jsxs)("div",{className:"text-center space-y-4",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Loading collaborative environment..."})]})}):r?p?a.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 max-w-md w-full",children:[a.jsx("h2",{className:"text-xl font-semibold text-red-600 mb-4",children:"Error Joining Room"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:p}),(0,a.jsxs)("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:j,disabled:m,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50",children:m?"Joining...":"Retry"}),a.jsx("button",{onClick:()=>t.push("/dashboard"),className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50",children:"Back to Dashboard"})]})]})}):c&&c.id===v?a.jsx("div",{className:"h-screen",children:a.jsx(th,{roomId:c.id,initialLanguage:f,initialCode:g,onCodeChange:w,onLanguageChange:N})}):a.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 max-w-md w-full",children:[a.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Joining Room..."}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"Attempting to join room..."}),a.jsx("button",{onClick:j,disabled:m,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50",children:m?"Joining...":"Join Room"})]})}):null}},5667:(e,t,r)=>{"use strict";r.d(t,{C:()=>i});var a=r(9899),s=r(5507),n=r(3096);let i=s.forwardRef(({className:e,variant:t="default",...r},s)=>a.jsx("div",{ref:s,className:(0,n.cn)("inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium transition-colors",{default:"bg-gray-900 text-white dark:bg-gray-50 dark:text-gray-900",secondary:"bg-gray-100 text-gray-900 dark:bg-gray-800 dark:text-gray-100",success:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-100",warning:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-100",danger:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-100",outline:"border border-gray-300 text-gray-700 dark:border-gray-700 dark:text-gray-300"}[t],e),...r}));i.displayName="Badge"},9614:(e,t,r)=>{"use strict";r.d(t,{z:()=>n});var a=r(9899);r(5507);var s=r(3096);function n({className:e,variant:t="default",size:r="md",isLoading:n=!1,children:i,disabled:l,...o}){return(0,a.jsxs)("button",{className:(0,s.cn)("inline-flex items-center justify-center rounded-md font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none ring-offset-background",{default:"bg-gray-900 text-white hover:bg-gray-800 dark:bg-gray-50 dark:text-gray-900 dark:hover:bg-gray-200",primary:"bg-blue-600 text-white hover:bg-blue-700 focus:ring-blue-500",secondary:"bg-gray-100 text-gray-900 hover:bg-gray-200 dark:bg-gray-800 dark:text-gray-100 dark:hover:bg-gray-700",outline:"border border-gray-300 bg-transparent text-gray-700 hover:bg-gray-50 dark:border-gray-700 dark:text-gray-300 dark:hover:bg-gray-800",ghost:"bg-transparent text-gray-700 hover:bg-gray-100 dark:text-gray-300 dark:hover:bg-gray-800",danger:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500"}[t],{sm:"h-8 px-3 text-sm",md:"h-10 px-4 py-2",lg:"h-12 px-6 text-lg"}[r],e),disabled:l||n,...o,children:[n&&a.jsx("div",{className:"mr-2 h-4 w-4 animate-spin rounded-full border-2 border-current border-t-transparent"}),i]})}},3217:(e,t,r)=>{"use strict";r.d(t,{Ol:()=>l,Zb:()=>i,aY:()=>c,ll:()=>o});var a=r(9899),s=r(5507),n=r(3096);let i=s.forwardRef(({className:e,...t},r)=>a.jsx("div",{ref:r,className:(0,n.cn)("rounded-lg border border-gray-200 bg-white shadow-sm dark:border-gray-800 dark:bg-gray-900",e),...t}));i.displayName="Card";let l=s.forwardRef(({className:e,...t},r)=>a.jsx("div",{ref:r,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",e),...t}));l.displayName="CardHeader";let o=s.forwardRef(({className:e,...t},r)=>a.jsx("h3",{ref:r,className:(0,n.cn)("text-lg font-semibold leading-none tracking-tight",e),...t}));o.displayName="CardTitle",s.forwardRef(({className:e,...t},r)=>a.jsx("p",{ref:r,className:(0,n.cn)("text-sm text-gray-500 dark:text-gray-400",e),...t})).displayName="CardDescription";let c=s.forwardRef(({className:e,...t},r)=>a.jsx("div",{ref:r,className:(0,n.cn)("p-6 pt-0",e),...t}));c.displayName="CardContent";let d=s.forwardRef(({className:e,...t},r)=>a.jsx("div",{ref:r,className:(0,n.cn)("flex items-center p-6 pt-0",e),...t}));d.displayName="CardFooter",d.displayName="CardFooter"},3086:(e,t,r)=>{"use strict";r.d(t,{I:()=>i});var a=r(9899),s=r(5507),n=r(3096);let i=s.forwardRef(({className:e,type:t,error:r,...s},i)=>(0,a.jsxs)("div",{className:"space-y-1",children:[a.jsx("input",{type:t,className:(0,n.cn)("flex h-10 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm placeholder:text-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:cursor-not-allowed disabled:opacity-50 dark:border-gray-700 dark:bg-gray-800 dark:text-white dark:placeholder:text-gray-500",r&&"border-red-500 focus:ring-red-500",e),ref:i,...s}),r&&a.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:r})]}));i.displayName="Input"},3096:(e,t,r)=>{"use strict";r.d(t,{cn:()=>n});var a=r(3332),s=r(4231);function n(...e){return(0,s.m6)((0,a.W)(e))}},3569:(e,t,r)=>{"use strict";var a=r(5507),s="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},n=a.useState,i=a.useEffect,l=a.useLayoutEffect,o=a.useDebugValue;function c(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!s(e,r)}catch(e){return!0}}var d="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var r=t(),a=n({inst:{value:r,getSnapshot:t}}),s=a[0].inst,d=a[1];return l(function(){s.value=r,s.getSnapshot=t,c(s)&&d({inst:s})},[e,r,t]),i(function(){return c(s)&&d({inst:s}),e(function(){c(s)&&d({inst:s})})},[e]),o(r),r};t.useSyncExternalStore=void 0!==a.useSyncExternalStore?a.useSyncExternalStore:d},2873:(e,t,r)=>{"use strict";e.exports=r(3569)},8507:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});let a=(0,r(2772).createProxy)(String.raw`/Users/piyush/Projects/CodeMitra/frontend/src/app/room/[roomId]/editor/page.tsx#default`)}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[375,832,886,24],()=>r(4895));module.exports=a})();