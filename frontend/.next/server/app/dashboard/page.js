(()=>{var e={};e.id=702,e.ids=[702],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},7790:e=>{"use strict";e.exports=require("assert")},8893:e=>{"use strict";e.exports=require("buffer")},1282:e=>{"use strict";e.exports=require("child_process")},4770:e=>{"use strict";e.exports=require("crypto")},7702:e=>{"use strict";e.exports=require("events")},2048:e=>{"use strict";e.exports=require("fs")},2615:e=>{"use strict";e.exports=require("http")},5240:e=>{"use strict";e.exports=require("https")},8216:e=>{"use strict";e.exports=require("net")},9801:e=>{"use strict";e.exports=require("os")},5315:e=>{"use strict";e.exports=require("path")},6162:e=>{"use strict";e.exports=require("stream")},2452:e=>{"use strict";e.exports=require("tls")},4175:e=>{"use strict";e.exports=require("tty")},7360:e=>{"use strict";e.exports=require("url")},1764:e=>{"use strict";e.exports=require("util")},1568:e=>{"use strict";e.exports=require("zlib")},7222:(e,s,r)=>{"use strict";r.r(s),r.d(s,{GlobalError:()=>i.a,__next_app__:()=>x,originalPathname:()=>m,pages:()=>c,routeModule:()=>u,tree:()=>n}),r(8652),r(94),r(457),r(2099),r(497),r(2874);var a=r(7105),t=r(5265),l=r(157),i=r.n(l),o=r(4665),d={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>o[e]);r.d(s,d);let n=["",{children:["dashboard",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,8652)),"/Users/piyush/Projects/CodeMitra/frontend/src/app/dashboard/page.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,94)),"/Users/piyush/Projects/CodeMitra/frontend/src/app/dashboard/layout.tsx"],error:[()=>Promise.resolve().then(r.bind(r,457)),"/Users/piyush/Projects/CodeMitra/frontend/src/app/dashboard/error.tsx"],loading:[()=>Promise.resolve().then(r.bind(r,2099)),"/Users/piyush/Projects/CodeMitra/frontend/src/app/dashboard/loading.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,497)),"/Users/piyush/Projects/CodeMitra/frontend/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,2874,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/piyush/Projects/CodeMitra/frontend/src/app/dashboard/page.tsx"],m="/dashboard/page",x={require:r,loadChunk:()=>Promise.resolve()},u=new a.AppPageRouteModule({definition:{kind:t.x.APP_PAGE,page:"/dashboard/page",pathname:"/dashboard",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:n}})},3543:(e,s,r)=>{Promise.resolve().then(r.bind(r,1613))},1589:(e,s,r)=>{Promise.resolve().then(r.bind(r,9789))},4868:()=>{},1613:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>c});var a=r(9899);r(5507);var t=r(9614),l=r(3217),i=r(4995),o=r(4516);let d=(0,o.Z)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),n=(0,o.Z)("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);function c({error:e,reset:s}){return a.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center p-4",children:(0,a.jsxs)(l.Zb,{className:"w-full max-w-md",children:[(0,a.jsxs)(l.Ol,{className:"text-center",children:[a.jsx("div",{className:"w-16 h-16 bg-red-100 dark:bg-red-900/30 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx(i.Z,{className:"w-8 h-8 text-red-600 dark:text-red-400"})}),a.jsx(l.ll,{className:"text-xl text-gray-900 dark:text-gray-100",children:"Something went wrong"})]}),(0,a.jsxs)(l.aY,{className:"text-center space-y-4",children:[a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"We encountered an error while loading your dashboard. Please try again."}),e.message&&a.jsx("div",{className:"p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:a.jsx("p",{className:"text-sm text-red-600 dark:text-red-400 font-mono",children:e.message})}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3",children:[(0,a.jsxs)(t.z,{onClick:s,className:"flex items-center space-x-2",children:[a.jsx(d,{className:"w-4 h-4"}),a.jsx("span",{children:"Try Again"})]}),(0,a.jsxs)(t.z,{variant:"outline",onClick:()=>window.location.href="/",className:"flex items-center space-x-2",children:[a.jsx(n,{className:"w-4 h-4"}),a.jsx("span",{children:"Go Home"})]})]})]})]})})}},9789:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>E});var a=r(9899),t=r(5507),l=r(9312),i=r(6153),o=r(3217),d=r(9614),n=r(3096);let c=t.forwardRef(({className:e,variant:s="default",...r},t)=>a.jsx("div",{ref:t,className:(0,n.cn)("inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium transition-colors",{default:"bg-gray-900 text-white dark:bg-gray-50 dark:text-gray-900",secondary:"bg-gray-100 text-gray-900 dark:bg-gray-800 dark:text-gray-100",success:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-100",warning:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-100",danger:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-100",outline:"border border-gray-300 text-gray-700 dark:border-gray-700 dark:text-gray-300"}[s],e),...r}));c.displayName="Badge";var m=r(7009),x=r(9411),u=r(3086);let g=t.forwardRef(({className:e,required:s,children:r,...t},l)=>(0,a.jsxs)("label",{ref:l,className:(0,n.cn)("text-sm font-medium text-gray-700 dark:text-gray-300",e),...t,children:[r,s&&a.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}));g.displayName="Label";let h=t.forwardRef(({className:e,orientation:s="horizontal",...r},t)=>a.jsx("div",{ref:t,className:(0,n.cn)("shrink-0 bg-gray-200 dark:bg-gray-800","horizontal"===s?"h-[1px] w-full":"h-full w-[1px]",e),...r}));h.displayName="Separator";var p=r(832),j=r(4516);let y=(0,j.Z)("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);var b=r(1175),f=r(5359),v=r(243),N=r(7282);let w=(0,j.Z)("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),k=(0,j.Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);var C=r(4995),P=r(598),Z=r(2070);function R(){let e=(0,i.useRouter)(),{user:s,token:r}=(0,l.aC)(),{socket:n}=(0,m.s)(),{currentRoom:j,joinRoom:R,leaveRoom:D,createRoom:S}=(0,x.N)(),[U,z]=(0,t.useState)([]),[q,M]=(0,t.useState)(!1),[E,A]=(0,t.useState)(""),[F,I]=(0,t.useState)(""),[$,_]=(0,t.useState)(!1),[T,L]=(0,t.useState)(""),[O,J]=(0,t.useState)(!1),[Y,H]=(0,t.useState)(null),[G,B]=(0,t.useState)({name:"",description:"",language:"javascript",maxUsers:10,isPublic:!0,password:""}),[W,X]=(0,t.useState)({name:"",password:"",maxUsers:""}),V=async r=>{r.preventDefault(),X({name:"",password:"",maxUsers:""});let a=!1,t={name:"",password:"",maxUsers:""};if(G.name.trim()?G.name.trim().length<3?(t.name="Room name must be at least 3 characters long",a=!0):G.name.trim().length>100&&(t.name="Room name cannot exceed 100 characters",a=!0):(t.name="Room name is required",a=!0),!G.isPublic&&(G.password.trim()?G.password.trim().length<4?(t.password="Room password must be at least 4 characters long",a=!0):G.password.trim().length>50&&(t.password="Room password cannot exceed 50 characters",a=!0):(t.password="Room password is required for private rooms",a=!0)),G.maxUsers<2?(t.maxUsers="Room must allow at least 2 users",a=!0):G.maxUsers>50&&(t.maxUsers="Room cannot exceed 50 users",a=!0),a){X(t);return}let l={name:G.name.trim(),description:G.description.trim(),isPublic:G.isPublic,maxUsers:G.maxUsers,language:G.language};!G.isPublic&&G.password.trim()&&(l.password=G.password.trim());try{let s=await S(l);H(s.id),p.ZP.success(`Room "${s.name}" created successfully! Room Code: ${s.id}`),B({name:"",description:"",language:"javascript",maxUsers:10,isPublic:!0,password:""}),X({name:"",password:"",maxUsers:""}),M(!1),window.dispatchEvent(new CustomEvent("roomCreated",{detail:s})),console.log("\uD83C\uDF89 Room created successfully, navigating to editor:",`/room/${s.id}/editor`),e.push(`/room/${s.id}/editor`),setTimeout(()=>H(null),1e4)}catch(a){console.error("Room creation failed:",a);let r={id:`temp-${Date.now()}`,name:G.name,description:G.description,language:G.language,maxUsers:G.maxUsers,isPublic:G.isPublic,password:G.password,code:"",input:"",output:"",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),ownerId:s?.id||"unknown",owner:{id:s?.id||"unknown",name:s?.name||"Unknown",email:s?.email||"unknown@example.com",avatar:s?.avatar,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},users:[],chatMessages:[],executionLogs:[]};z(e=>[r,...e]),H(r.id),p.ZP.success(`Room "${G.name}" created successfully! Room Code: ${r.id}`),B({name:"",description:"",language:"javascript",maxUsers:10,isPublic:!0,password:""}),X({name:"",password:"",maxUsers:""}),M(!1),window.dispatchEvent(new CustomEvent("roomCreated",{detail:r})),console.log("\uD83C\uDF89 Fallback room created successfully, navigating to editor:",`/room/${r.id}/editor`),e.push(`/room/${r.id}/editor`),setTimeout(()=>H(null),1e4)}},K=async e=>{try{let s=await fetch(`http://localhost:5001/api/rooms/${e}`,{headers:{Authorization:`Bearer ${r}`}});if(s.ok){if((await s.json()).data.password)L(e),_(!0);else try{await R(e,""),p.ZP.success("Joined room successfully!")}catch(e){p.ZP.error("Failed to join room. Please try again.")}}else p.ZP.error("Failed to get room details. Please try again.")}catch(e){console.error("Error checking room details:",e),p.ZP.error("Failed to check room details. Please try again.")}},Q=async s=>{if(s.preventDefault(),T&&F)try{console.log("\uD83D\uDD10 Attempting to join private room:",T),await R(T,F,e),console.log("✅ Successfully joined private room"),_(!1),I(""),L(""),p.ZP.success("Joined room successfully!")}catch(e){console.error("❌ Error joining private room:",e),p.ZP.error("Failed to join room. Please check your password.")}},ee=async s=>{if(s.preventDefault(),E.trim())try{let s=E.trim();console.log("\uD83D\uDD0D Attempting to join room:",s);try{let a=`http://localhost:5001/api/rooms/${s}`;console.log("\uD83C\uDF10 Checking room details at:",a);let t=await fetch(a,{headers:{Authorization:`Bearer ${r}`}});if(t.ok){let r=await t.json();if(console.log("✅ Room details response:",r),r.data.password)console.log("\uD83D\uDD12 Private room detected, showing password prompt"),L(s),_(!0),A("");else{console.log("\uD83C\uDF0D Public room detected, joining directly");try{await R(s,"",e),A(""),p.ZP.success("Joined room successfully!")}catch(e){console.error("❌ Error joining public room:",e),p.ZP.error("Failed to join room. Please try again.")}}}else console.error("❌ Room not found:",t.status,t.statusText),p.ZP.error("Room not found. Please check the room code.")}catch(e){console.error("Error checking room details:",e),p.ZP.error("Failed to check room details. Please try again.")}}catch(e){console.error("Error joining room:",e),p.ZP.error("Failed to join room. Please try again.")}},es=e=>new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return j?(0,a.jsxs)(o.Zb,{className:"w-full max-w-md",children:[a.jsx(o.Ol,{children:(0,a.jsxs)(o.ll,{className:"flex items-center gap-2",children:[a.jsx(y,{className:"h-5 w-5"}),"Current Room"]})}),(0,a.jsxs)(o.aY,{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"font-semibold text-lg",children:j.name}),j.description&&a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:j.description})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4 text-sm text-gray-500",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[a.jsx(b.Z,{className:"h-4 w-4"}),(0,a.jsxs)("span",{children:[j.users?.length||0,"/",j.maxUsers]})]}),a.jsx(c,{variant:"secondary",children:j.language})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx(g,{htmlFor:"room-code",className:"text-sm font-medium",children:"Room Code:"}),(0,a.jsxs)("div",{className:"flex items-center gap-2 flex-1",children:[a.jsx(u.I,{id:"room-code",value:j.id,readOnly:!0,className:"text-sm"}),a.jsx(d.z,{variant:"outline",size:"sm",onClick:()=>{j&&(navigator.clipboard.writeText(j.id),J(!0),setTimeout(()=>J(!1),2e3))},className:"flex items-center gap-1",children:O?a.jsx(f.Z,{className:"h-4 w-4"}):a.jsx(v.Z,{className:"h-4 w-4"})})]})]}),(0,a.jsxs)(d.z,{onClick:()=>{j&&D(j.id)},variant:"danger",className:"w-full flex items-center gap-2",children:[a.jsx(N.Z,{className:"h-4 w-4"}),"Leave Room"]})]})]}):(0,a.jsxs)(o.Zb,{className:"w-full max-w-2xl",children:[a.jsx(o.Ol,{children:(0,a.jsxs)(o.ll,{className:"flex items-center gap-2",children:[a.jsx(b.Z,{className:"h-5 w-5"}),"Room Manager"]})}),(0,a.jsxs)(o.aY,{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h3",{className:"font-semibold mb-3 flex items-center gap-2",children:[a.jsx(w,{className:"h-4 w-4"}),"Join Room by Code"]}),(0,a.jsxs)("form",{onSubmit:ee,className:"flex gap-2",children:[a.jsx(u.I,{placeholder:"Enter room code",value:E,onChange:e=>A(e.target.value),className:"flex-1"}),a.jsx(d.z,{type:"submit",disabled:!E.trim(),children:"Join"})]})]}),a.jsx(h,{}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsxs)("h3",{className:"font-semibold flex items-center gap-2",children:[a.jsx(k,{className:"h-4 w-4"}),"Create New Room"]}),a.jsx(d.z,{variant:"outline",onClick:()=>M(!q),children:q?"Cancel":"New Room"})]}),Y&&(0,a.jsxs)("div",{className:"mb-4 p-4 bg-green-50 border border-green-200 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx(f.Z,{className:"h-5 w-5 text-green-600"}),a.jsx("span",{className:"text-green-800 font-medium",children:"Room created successfully!"})]}),a.jsx(d.z,{variant:"outline",size:"sm",onClick:()=>H(null),className:"text-green-600 hover:text-green-700",children:"\xd7"})]}),(0,a.jsxs)("div",{className:"mt-2",children:[a.jsx(g,{className:"text-sm font-medium text-green-700",children:"Room Code:"}),(0,a.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[a.jsx(u.I,{value:Y,readOnly:!0,className:"text-sm font-mono bg-white"}),a.jsx(d.z,{variant:"outline",size:"sm",onClick:()=>{navigator.clipboard.writeText(Y),J(!0),setTimeout(()=>J(!1),2e3)},className:"flex items-center gap-1",children:O?a.jsx(f.Z,{className:"h-4 w-4"}):a.jsx(v.Z,{className:"h-4 w-4"})})]})]})]}),q&&(0,a.jsxs)("form",{onSubmit:V,className:"space-y-4",children:[(0,a.jsxs)("div",{children:[a.jsx(g,{htmlFor:"room-name",children:"Room Name"}),a.jsx(u.I,{id:"room-name",value:G.name,onChange:e=>{B(s=>({...s,name:e.target.value})),W.name&&X(e=>({...e,name:""}))},placeholder:"Enter room name (min 3 characters)",className:W.name?"border-red-500 focus:border-red-500 focus:ring-red-500":""}),W.name&&(0,a.jsxs)("div",{className:"flex items-center gap-2 text-red-500 text-sm mt-1",children:[a.jsx(C.Z,{className:"h-4 w-4"}),a.jsx("span",{children:W.name})]})]}),(0,a.jsxs)("div",{children:[a.jsx(g,{htmlFor:"room-description",children:"Description (optional)"}),a.jsx(u.I,{id:"room-description",value:G.description,onChange:e=>B(s=>({...s,description:e.target.value})),placeholder:"Enter room description"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx(g,{htmlFor:"room-language",children:"Language"}),(0,a.jsxs)("select",{id:"room-language",value:G.language,onChange:e=>B(s=>({...s,language:e.target.value})),className:"w-full p-2 border rounded-md",children:[a.jsx("option",{value:"javascript",children:"JavaScript"}),a.jsx("option",{value:"python",children:"Python"}),a.jsx("option",{value:"java",children:"Java"}),a.jsx("option",{value:"cpp",children:"C++"})]})]}),(0,a.jsxs)("div",{children:[a.jsx(g,{htmlFor:"room-max-users",children:"Max Users"}),a.jsx(u.I,{id:"room-max-users",type:"number",min:"2",max:"50",value:G.maxUsers,onChange:e=>{B(s=>({...s,maxUsers:parseInt(e.target.value)||2})),W.maxUsers&&X(e=>({...e,maxUsers:""}))},className:W.maxUsers?"border-red-500":""}),W.maxUsers&&a.jsx("p",{className:"text-red-500 text-sm mt-1",children:W.maxUsers})]})]}),a.jsx("div",{className:"space-y-3",children:(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[a.jsx("input",{type:"checkbox",id:"room-public",checked:G.isPublic,onChange:e=>{B(s=>({...s,isPublic:e.target.checked,password:e.target.checked?"":s.password})),e.target.checked&&W.password&&X(e=>({...e,password:""}))},className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),(0,a.jsxs)("div",{children:[a.jsx(g,{htmlFor:"room-public",className:"text-sm font-medium",children:"Public Room"}),a.jsx("p",{className:"text-gray-500 text-xs",children:G.isPublic?"Anyone can join with room code":"Password required to join"})]})]}),a.jsx(c,{variant:G.isPublic?"default":"secondary",children:G.isPublic?"Public":"Private"})]})}),!G.isPublic&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)(g,{htmlFor:"room-password",className:"flex items-center gap-2",children:["Room Password *",a.jsx(c,{variant:"outline",className:"text-xs",children:"Required"})]}),a.jsx(u.I,{id:"room-password",type:"password",value:G.password,onChange:e=>{B(s=>({...s,password:e.target.value})),W.password&&X(e=>({...e,password:""}))},placeholder:"Enter room password (min 4 characters)",className:W.password?"border-red-500 focus:border-red-500 focus:ring-red-500":"",required:!0}),W.password&&(0,a.jsxs)("div",{className:"flex items-center gap-2 text-red-500 text-sm",children:[a.jsx(C.Z,{className:"h-4 w-4"}),a.jsx("span",{children:W.password})]}),a.jsx("p",{className:"text-gray-500 text-xs",children:"Password must be 4-50 characters long and is required for private room access"})]}),a.jsx(d.z,{type:"submit",className:"w-full",children:"Create Room"})]})]}),a.jsx(h,{}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("h3",{className:"font-semibold mb-3 flex items-center gap-2",children:[a.jsx(P.Z,{className:"h-4 w-4"}),"Available Rooms"]}),0===U.length?a.jsx("p",{className:"text-gray-500 text-center py-4",children:"No rooms available"}):a.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:U.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 border rounded-lg hover:bg-gray-50",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("h4",{className:"font-medium",children:e.name}),a.jsx(c,{variant:"outline",children:e.language}),!e.isPublic&&a.jsx(c,{variant:"secondary",children:"Private"})]}),e.description&&a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:e.description}),(0,a.jsxs)("div",{className:"flex items-center gap-4 text-xs text-gray-500 mt-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[a.jsx(b.Z,{className:"h-3 w-3"}),(0,a.jsxs)("span",{children:[e.users?.length||0,"/",e.maxUsers]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[a.jsx(Z.Z,{className:"h-3 w-3"}),a.jsx("span",{children:es(e.createdAt)})]})]})]}),a.jsx(d.z,{onClick:()=>K(e.id),disabled:e.users.length>=e.maxUsers,size:"sm",children:"Join"})]},e.id))})]})]}),$&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-lg w-full max-w-md",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Enter Room Password"}),(0,a.jsxs)("form",{onSubmit:Q,className:"space-y-4",children:[(0,a.jsxs)("div",{children:[a.jsx(g,{htmlFor:"join-password",children:"Password"}),a.jsx(u.I,{id:"join-password",type:"password",value:F,onChange:e=>I(e.target.value),placeholder:"Enter room password",required:!0,autoFocus:!0})]}),(0,a.jsxs)("div",{className:"flex gap-2 justify-end",children:[a.jsx(d.z,{type:"button",variant:"outline",onClick:()=>{_(!1),I(""),L("")},children:"Cancel"}),a.jsx(d.z,{type:"submit",children:"Join Room"})]})]})]})})]})}var D=r(9345),S=r(1614),U=r(6437);let z=(0,j.Z)("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);var q=r(4767);function M(){let{token:e}=(0,l.aC)(),[s,r]=(0,t.useState)([]),[i,o]=(0,t.useState)(!0),[n,m]=(0,t.useState)(null),x=(0,t.useCallback)(async()=>{if(e)try{o(!0),m(null);let s="http://localhost:5001/api/rooms";console.log("\uD83C\uDF10 Fetching available rooms from:",s);let a=await fetch(s,{headers:{Authorization:`Bearer ${e}`}});if(a.ok){let e=await a.json();if(console.log("✅ Available rooms response:",e),e.success&&e.data&&e.data.rooms)r(e.data.rooms);else throw Error(e.error||"Failed to load rooms")}else throw console.error("❌ Available rooms API error:",a.status,a.statusText),Error(`Server error: ${a.status}`)}catch(e){console.error("Error fetching available rooms:",e),m(e instanceof Error?e.message:"Failed to load rooms"),r([])}finally{o(!1)}},[e]);return i?a.jsx("div",{className:"flex items-center justify-center py-8",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):n?(0,a.jsxs)("div",{className:"text-center py-8 text-red-600",children:[(0,a.jsxs)("p",{children:["Error loading rooms: ",n]}),a.jsx(d.z,{onClick:x,variant:"outline",className:"mt-2",children:"Retry"})]}):0===s.length?(0,a.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[a.jsx(P.Z,{className:"w-12 h-12 mx-auto mb-4 text-gray-400"}),a.jsx("p",{children:"No rooms available"})]}):a.jsx("div",{className:"space-y-3 max-h-80 overflow-y-auto",children:s.map(e=>a.jsx("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-gray-50 dark:hover:bg-gray-800",children:(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx("h4",{className:"font-medium text-gray-900 dark:text-gray-100",children:e.name}),a.jsx(c,{variant:"outline",children:e.language}),!e.isPublic&&a.jsx(c,{variant:"secondary",children:"Private"})]}),e.description&&a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:e.description}),(0,a.jsxs)("div",{className:"flex items-center gap-4 text-xs text-gray-500",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[a.jsx(b.Z,{className:"w-3 h-3"}),(0,a.jsxs)("span",{children:[e.users?.length||0,"/",e.maxUsers]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[a.jsx(Z.Z,{className:"w-3 h-3"}),a.jsx("span",{children:new Date(e.createdAt).toLocaleDateString()})]}),(0,a.jsxs)("span",{children:["by ",e.owner.name]})]})]})},e.id))})}function E(){let{user:e,logout:s,isLoading:r,token:n}=(0,l.aC)();(0,i.useRouter)();let[c,m]=(0,t.useState)({totalRooms:0,joinedRooms:0,messagesCount:0,executionsCount:0}),[x,u]=(0,t.useState)(!0),[g,h]=(0,t.useState)(null);return((0,t.useCallback)(async()=>{if(e?.id&&n){console.log("\uD83D\uDD0D fetchUserStats called with:",{userId:e?.id,token:n?"EXISTS":"MISSING"});try{u(!0),h(null);let e="http://localhost:5001/api/users/activity";console.log("\uD83C\uDF10 Calling API:",e);let s=await fetch(e,{headers:{Authorization:`Bearer ${n}`}});if(s.ok){let e=await s.json();if(console.log("✅ API Response:",e),e.success&&e.data){let s={totalRooms:e.data.totalRooms||0,joinedRooms:e.data.joinedRooms||0,messagesCount:e.data.messagesCount||0,executionsCount:e.data.executionsCount||0};console.log("\uD83D\uDCCA Setting new stats:",s),m(s)}else throw Error(e.error||"Failed to load statistics")}else throw console.error("❌ API Error:",s.status,s.statusText),Error(`Server error: ${s.status}`)}catch(e){console.error("Error fetching user stats:",e),h(e instanceof Error?e.message:"Failed to load statistics"),m({totalRooms:0,joinedRooms:0,messagesCount:0,executionsCount:0})}finally{u(!1)}}},[e?.id,n]),r)?a.jsx("div",{className:"flex items-center justify-center min-h-screen",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):e?(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[a.jsx("header",{className:"bg-white dark:bg-gray-800 shadow-sm border-b border-gray-200 dark:border-gray-700",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"flex justify-between items-center h-16",children:[a.jsx("div",{className:"flex items-center",children:(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-600 to-purple-600 rounded-lg flex items-center justify-center",children:a.jsx(D.Z,{className:"w-5 h-5 text-white"})}),a.jsx("span",{className:"text-xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"CodeMitra"})]})}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-gray-600 dark:text-gray-300",children:[a.jsx(S.Z,{className:"w-4 h-4"}),(0,a.jsxs)("span",{children:["Welcome, ",e.name]})]}),(0,a.jsxs)(d.z,{variant:"outline",size:"sm",className:"flex items-center space-x-2",children:[a.jsx(U.Z,{className:"w-4 h-4"}),a.jsx("span",{children:"Settings"})]}),(0,a.jsxs)(d.z,{variant:"outline",size:"sm",onClick:s,className:"flex items-center space-x-2 text-red-600 hover:text-red-700 border-red-200 hover:border-red-300",children:[a.jsx(N.Z,{className:"w-4 h-4"}),a.jsx("span",{children:"Logout"})]})]})]})})}),(0,a.jsxs)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,a.jsxs)("div",{className:"mb-8",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:"Dashboard"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Manage your coding rooms and collaborate with your team"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[a.jsx(o.Zb,{children:a.jsx(o.aY,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx("div",{className:"w-10 h-10 bg-blue-100 dark:bg-blue-900 rounded-lg flex items-center justify-center",children:a.jsx(b.Z,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})})}),(0,a.jsxs)("div",{className:"ml-4",children:[a.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total Rooms"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:x?"...":g?"0":c.totalRooms})]})]})})}),a.jsx(o.Zb,{children:a.jsx(o.aY,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx("div",{className:"w-10 h-10 bg-green-100 dark:bg-green-900 rounded-lg flex items-center justify-center",children:a.jsx(z,{className:"w-6 h-6 text-green-600 dark:text-green-400"})})}),(0,a.jsxs)("div",{className:"ml-4",children:[a.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Joined Rooms"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:x?"...":g?"0":c.joinedRooms})]})]})})}),a.jsx(o.Zb,{children:a.jsx(o.aY,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx("div",{className:"w-10 h-10 bg-purple-100 dark:bg-purple-900 rounded-lg flex items-center justify-center",children:a.jsx(q.Z,{className:"w-6 h-6 text-purple-600 dark:text-purple-400"})})}),(0,a.jsxs)("div",{className:"ml-4",children:[a.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Messages"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:x?"...":g?"0":c.messagesCount})]})]})})}),a.jsx(o.Zb,{children:a.jsx(o.aY,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx("div",{className:"w-10 h-10 bg-orange-100 dark:bg-orange-900 rounded-lg flex items-center justify-center",children:a.jsx(D.Z,{className:"w-6 h-6 text-orange-600 dark:text-orange-400"})})}),(0,a.jsxs)("div",{className:"ml-4",children:[a.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Code Executions"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:x?"...":g?"0":c.executionsCount})]})]})})})]}),a.jsx("div",{className:"mb-8",children:(0,a.jsxs)(o.Zb,{children:[a.jsx(o.Ol,{children:(0,a.jsxs)(o.ll,{className:"flex items-center space-x-2",children:[a.jsx(b.Z,{className:"w-5 h-5"}),a.jsx("span",{children:"Available Rooms"})]})}),a.jsx(o.aY,{children:a.jsx(M,{})})]})}),a.jsx("div",{className:"w-full",children:(0,a.jsxs)(o.Zb,{children:[a.jsx(o.Ol,{children:(0,a.jsxs)(o.ll,{className:"flex items-center space-x-2",children:[a.jsx(b.Z,{className:"w-5 h-5"}),a.jsx("span",{children:"Room Management"})]})}),a.jsx(o.aY,{children:a.jsx(R,{})})]})})]})]}):null}},9614:(e,s,r)=>{"use strict";r.d(s,{z:()=>l});var a=r(9899);r(5507);var t=r(3096);function l({className:e,variant:s="default",size:r="md",isLoading:l=!1,children:i,disabled:o,...d}){return(0,a.jsxs)("button",{className:(0,t.cn)("inline-flex items-center justify-center rounded-md font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none ring-offset-background",{default:"bg-gray-900 text-white hover:bg-gray-800 dark:bg-gray-50 dark:text-gray-900 dark:hover:bg-gray-200",primary:"bg-blue-600 text-white hover:bg-blue-700 focus:ring-blue-500",secondary:"bg-gray-100 text-gray-900 hover:bg-gray-200 dark:bg-gray-800 dark:text-gray-100 dark:hover:bg-gray-700",outline:"border border-gray-300 bg-transparent text-gray-700 hover:bg-gray-50 dark:border-gray-700 dark:text-gray-300 dark:hover:bg-gray-800",ghost:"bg-transparent text-gray-700 hover:bg-gray-100 dark:text-gray-300 dark:hover:bg-gray-800",danger:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500"}[s],{sm:"h-8 px-3 text-sm",md:"h-10 px-4 py-2",lg:"h-12 px-6 text-lg"}[r],e),disabled:o||l,...d,children:[l&&a.jsx("div",{className:"mr-2 h-4 w-4 animate-spin rounded-full border-2 border-current border-t-transparent"}),i]})}},3217:(e,s,r)=>{"use strict";r.d(s,{Ol:()=>o,Zb:()=>i,aY:()=>n,ll:()=>d});var a=r(9899),t=r(5507),l=r(3096);let i=t.forwardRef(({className:e,...s},r)=>a.jsx("div",{ref:r,className:(0,l.cn)("rounded-lg border border-gray-200 bg-white shadow-sm dark:border-gray-800 dark:bg-gray-900",e),...s}));i.displayName="Card";let o=t.forwardRef(({className:e,...s},r)=>a.jsx("div",{ref:r,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",e),...s}));o.displayName="CardHeader";let d=t.forwardRef(({className:e,...s},r)=>a.jsx("h3",{ref:r,className:(0,l.cn)("text-lg font-semibold leading-none tracking-tight",e),...s}));d.displayName="CardTitle",t.forwardRef(({className:e,...s},r)=>a.jsx("p",{ref:r,className:(0,l.cn)("text-sm text-gray-500 dark:text-gray-400",e),...s})).displayName="CardDescription";let n=t.forwardRef(({className:e,...s},r)=>a.jsx("div",{ref:r,className:(0,l.cn)("p-6 pt-0",e),...s}));n.displayName="CardContent";let c=t.forwardRef(({className:e,...s},r)=>a.jsx("div",{ref:r,className:(0,l.cn)("flex items-center p-6 pt-0",e),...s}));c.displayName="CardFooter",c.displayName="CardFooter"},3086:(e,s,r)=>{"use strict";r.d(s,{I:()=>i});var a=r(9899),t=r(5507),l=r(3096);let i=t.forwardRef(({className:e,type:s,error:r,...t},i)=>(0,a.jsxs)("div",{className:"space-y-1",children:[a.jsx("input",{type:s,className:(0,l.cn)("flex h-10 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm placeholder:text-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:cursor-not-allowed disabled:opacity-50 dark:border-gray-700 dark:bg-gray-800 dark:text-white dark:placeholder:text-gray-500",r&&"border-red-500 focus:ring-red-500",e),ref:i,...t}),r&&a.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:r})]}));i.displayName="Input"},3096:(e,s,r)=>{"use strict";r.d(s,{cn:()=>l});var a=r(3332),t=r(4231);function l(...e){return(0,t.m6)((0,a.W)(e))}},4516:(e,s,r)=>{"use strict";r.d(s,{Z:()=>i});var a=r(5507),t={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let l=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),i=(e,s)=>{let r=(0,a.forwardRef)(({color:r="currentColor",size:i=24,strokeWidth:o=2,absoluteStrokeWidth:d,className:n="",children:c,...m},x)=>(0,a.createElement)("svg",{ref:x,...t,width:i,height:i,stroke:r,strokeWidth:d?24*Number(o)/Number(i):o,className:["lucide",`lucide-${l(e)}`,n].join(" "),...m},[...s.map(([e,s])=>(0,a.createElement)(e,s)),...Array.isArray(c)?c:[c]]));return r.displayName=`${e}`,r}},4995:(e,s,r)=>{"use strict";r.d(s,{Z:()=>a});let a=(0,r(4516).Z)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},9345:(e,s,r)=>{"use strict";r.d(s,{Z:()=>a});let a=(0,r(4516).Z)("Code2",[["path",{d:"m18 16 4-4-4-4",key:"1inbqp"}],["path",{d:"m6 8-4 4 4 4",key:"15zrgr"}],["path",{d:"m14.5 4-5 16",key:"e7oirm"}]])},598:(e,s,r)=>{"use strict";r.d(s,{Z:()=>a});let a=(0,r(4516).Z)("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]])},4767:(e,s,r)=>{"use strict";r.d(s,{Z:()=>a});let a=(0,r(4516).Z)("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]])},1614:(e,s,r)=>{"use strict";r.d(s,{Z:()=>a});let a=(0,r(4516).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},457:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>a});let a=(0,r(2772).createProxy)(String.raw`/Users/piyush/Projects/CodeMitra/frontend/src/app/dashboard/error.tsx#default`)},94:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>t,metadata:()=>a});let a={title:"Dashboard - CodeMitra",description:"Manage your coding rooms and collaborate with your team"};function t({children:e}){return e}},2099:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>t});var a=r(5023);function t(){return(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[a.jsx("header",{className:"bg-white dark:bg-gray-800 shadow-sm border-b border-gray-200 dark:border-gray-700",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-8 h-8 bg-gray-200 dark:bg-gray-700 rounded-lg animate-pulse"}),a.jsx("div",{className:"w-24 h-6 bg-gray-200 dark:bg-gray-700 rounded animate-pulse"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[a.jsx("div",{className:"w-32 h-8 bg-gray-200 dark:bg-gray-700 rounded animate-pulse"}),a.jsx("div",{className:"w-20 h-8 bg-gray-200 dark:bg-gray-700 rounded animate-pulse"})]})]})})}),(0,a.jsxs)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,a.jsxs)("div",{className:"mb-8",children:[a.jsx("div",{className:"w-48 h-8 bg-gray-200 dark:bg-gray-700 rounded animate-pulse mb-2"}),a.jsx("div",{className:"w-80 h-4 bg-gray-200 dark:bg-gray-700 rounded animate-pulse"})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[void 0,void 0,void 0,void 0].map((e,s)=>a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[a.jsx("div",{className:"w-10 h-10 bg-gray-200 dark:bg-gray-700 rounded-lg animate-pulse"}),(0,a.jsxs)("div",{className:"ml-4 space-y-2",children:[a.jsx("div",{className:"w-20 h-4 bg-gray-200 dark:bg-gray-700 rounded animate-pulse"}),a.jsx("div",{className:"w-12 h-6 bg-gray-200 dark:bg-gray-700 rounded animate-pulse"})]})]})},s))}),(0,a.jsxs)("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-8",children:[a.jsx("div",{className:"xl:col-span-2",children:(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6",children:[a.jsx("div",{className:"w-48 h-6 bg-gray-200 dark:bg-gray-700 rounded animate-pulse mb-4"}),a.jsx("div",{className:"space-y-4",children:[void 0,void 0,void 0].map((e,s)=>a.jsx("div",{className:"w-full h-16 bg-gray-200 dark:bg-gray-700 rounded animate-pulse"},s))})]})}),a.jsx("div",{className:"space-y-6",children:(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6",children:[a.jsx("div",{className:"w-32 h-6 bg-gray-200 dark:bg-gray-700 rounded animate-pulse mb-4"}),a.jsx("div",{className:"space-y-3",children:[void 0,void 0,void 0].map((e,s)=>a.jsx("div",{className:"w-full h-10 bg-gray-200 dark:bg-gray-700 rounded animate-pulse"},s))})]})})]})]})]})}},8652:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>a});let a=(0,r(2772).createProxy)(String.raw`/Users/piyush/Projects/CodeMitra/frontend/src/app/dashboard/page.tsx#default`)}};var s=require("../../webpack-runtime.js");s.C(e);var r=e=>s(s.s=e),a=s.X(0,[375,233,24],()=>r(7222));module.exports=a})();