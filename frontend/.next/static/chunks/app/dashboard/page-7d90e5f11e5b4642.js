(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[702],{3976:function(e,s,a){Promise.resolve().then(a.bind(a,6982))},6982:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return A}});var r=a(7821),t=a(8078),l=a(7531),o=a(8504),n=a(8006),i=a(3842),c=a(7211);let d=t.forwardRef((e,s)=>{let{className:a,variant:t="default",...l}=e;return(0,r.jsx)("div",{ref:s,className:(0,c.cn)("inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium transition-colors",{default:"bg-gray-900 text-white dark:bg-gray-50 dark:text-gray-900",secondary:"bg-gray-100 text-gray-900 dark:bg-gray-800 dark:text-gray-100",success:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-100",warning:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-100",danger:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-100",outline:"border border-gray-300 text-gray-700 dark:border-gray-700 dark:text-gray-300"}[t],a),...l})});d.displayName="Badge";var m=a(5331),x=a(5597),u=a(5231);let h=t.forwardRef((e,s)=>{let{className:a,required:t,children:l,...o}=e;return(0,r.jsxs)("label",{ref:s,className:(0,c.cn)("text-sm font-medium text-gray-700 dark:text-gray-300",a),...o,children:[l,t&&(0,r.jsx)("span",{className:"text-red-500 ml-1",children:"*"})]})});h.displayName="Label";let g=t.forwardRef((e,s)=>{let{className:a,orientation:t="horizontal",...l}=e;return(0,r.jsx)("div",{ref:s,className:(0,c.cn)("shrink-0 bg-gray-200 dark:bg-gray-800","horizontal"===t?"h-[1px] w-full":"h-full w-[1px]",a),...l})});g.displayName="Separator";var p=a(6028),f=a(8322);let j=(0,f.Z)("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);var y=a(961),v=a(8149),b=a(7315),w=a(6556);let N=(0,f.Z)("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),k=(0,f.Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);var C=a(2828),Z=a(5353),R=a(1996);function P(){let e=(0,o.useRouter)(),{user:s,token:a}=(0,l.aC)(),{socket:c}=(0,m.s)(),{currentRoom:f,joinRoom:P,leaveRoom:D,createRoom:S}=(0,x.N)(),[E,U]=(0,t.useState)([]),[z,F]=(0,t.useState)(!1),[A,I]=(0,t.useState)(""),[M,O]=(0,t.useState)(""),[T,q]=(0,t.useState)(!1),[L,J]=(0,t.useState)(""),[Y,H]=(0,t.useState)(!1),[_,B]=(0,t.useState)(null),[V,G]=(0,t.useState)({name:"",description:"",language:"javascript",maxUsers:10,isPublic:!0,password:""}),[W,X]=(0,t.useState)({name:"",password:"",maxUsers:""});(0,t.useEffect)(()=>{if(c)return c.emit("getRooms"),c.on("roomsList",e=>{U(e)}),c.on("roomCreated",e=>{U(s=>[...s,e]),F(!1),G({name:"",description:"",language:"javascript",maxUsers:10,isPublic:!0,password:""}),X({name:"",password:"",maxUsers:""}),B(e.id),p.ZP.success('Room "'.concat(e.name,'" created successfully! Room Code: ').concat(e.id)),window.dispatchEvent(new CustomEvent("roomCreated",{detail:e})),setTimeout(()=>B(null),1e4)}),c.on("roomUpdated",e=>{U(s=>s.map(s=>s.id===e.id?e:s))}),c.on("roomDeleted",e=>{U(s=>s.filter(s=>s.id!==e))}),()=>{c.off("roomsList"),c.off("roomCreated"),c.off("roomUpdated"),c.off("roomDeleted")}},[c]);let K=async a=>{a.preventDefault(),X({name:"",password:"",maxUsers:""});let r=!1,t={name:"",password:"",maxUsers:""};if(V.name.trim()?V.name.trim().length<3?(t.name="Room name must be at least 3 characters long",r=!0):V.name.trim().length>100&&(t.name="Room name cannot exceed 100 characters",r=!0):(t.name="Room name is required",r=!0),!V.isPublic&&(V.password.trim()?V.password.trim().length<4?(t.password="Room password must be at least 4 characters long",r=!0):V.password.trim().length>50&&(t.password="Room password cannot exceed 50 characters",r=!0):(t.password="Room password is required for private rooms",r=!0)),V.maxUsers<2?(t.maxUsers="Room must allow at least 2 users",r=!0):V.maxUsers>50&&(t.maxUsers="Room cannot exceed 50 users",r=!0),r){X(t);return}let l={name:V.name.trim(),description:V.description.trim(),isPublic:V.isPublic,maxUsers:V.maxUsers,language:V.language};!V.isPublic&&V.password.trim()&&(l.password=V.password.trim());try{let s=await S(l);B(s.id),p.ZP.success('Room "'.concat(s.name,'" created successfully! Room Code: ').concat(s.id)),G({name:"",description:"",language:"javascript",maxUsers:10,isPublic:!0,password:""}),X({name:"",password:"",maxUsers:""}),F(!1),window.dispatchEvent(new CustomEvent("roomCreated",{detail:s})),console.log("\uD83C\uDF89 Room created successfully, navigating to editor:","/room/".concat(s.id,"/editor")),e.push("/room/".concat(s.id,"/editor")),setTimeout(()=>B(null),1e4)}catch(r){console.error("Room creation failed:",r);let a={id:"temp-".concat(Date.now()),name:V.name,description:V.description,language:V.language,maxUsers:V.maxUsers,isPublic:V.isPublic,password:V.password,code:"",input:"",output:"",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),ownerId:(null==s?void 0:s.id)||"unknown",owner:{id:(null==s?void 0:s.id)||"unknown",name:(null==s?void 0:s.name)||"Unknown",email:(null==s?void 0:s.email)||"unknown@example.com",avatar:null==s?void 0:s.avatar,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},users:[],chatMessages:[],executionLogs:[]};U(e=>[a,...e]),B(a.id),p.ZP.success('Room "'.concat(V.name,'" created successfully! Room Code: ').concat(a.id)),G({name:"",description:"",language:"javascript",maxUsers:10,isPublic:!0,password:""}),X({name:"",password:"",maxUsers:""}),F(!1),window.dispatchEvent(new CustomEvent("roomCreated",{detail:a})),console.log("\uD83C\uDF89 Fallback room created successfully, navigating to editor:","/room/".concat(a.id,"/editor")),e.push("/room/".concat(a.id,"/editor")),setTimeout(()=>B(null),1e4)}},Q=async e=>{try{let s=await fetch("".concat("http://localhost:5001","/api/rooms/").concat(e),{headers:{Authorization:"Bearer ".concat(a)}});if(s.ok){if((await s.json()).data.password)J(e),q(!0);else try{await P(e,""),p.ZP.success("Joined room successfully!")}catch(e){p.ZP.error("Failed to join room. Please try again.")}}else p.ZP.error("Failed to get room details. Please try again.")}catch(e){console.error("Error checking room details:",e),p.ZP.error("Failed to check room details. Please try again.")}},$=async s=>{if(s.preventDefault(),L&&M)try{console.log("\uD83D\uDD10 Attempting to join private room:",L),await P(L,M,e),console.log("✅ Successfully joined private room"),q(!1),O(""),J(""),p.ZP.success("Joined room successfully!")}catch(e){console.error("❌ Error joining private room:",e),p.ZP.error("Failed to join room. Please check your password.")}},ee=async s=>{if(s.preventDefault(),A.trim())try{let s=A.trim();console.log("\uD83D\uDD0D Attempting to join room:",s);try{let r="".concat("http://localhost:5001","/api/rooms/").concat(s);console.log("\uD83C\uDF10 Checking room details at:",r);let t=await fetch(r,{headers:{Authorization:"Bearer ".concat(a)}});if(t.ok){let a=await t.json();if(console.log("✅ Room details response:",a),a.data.password)console.log("\uD83D\uDD12 Private room detected, showing password prompt"),J(s),q(!0),I("");else{console.log("\uD83C\uDF0D Public room detected, joining directly");try{await P(s,"",e),I(""),p.ZP.success("Joined room successfully!")}catch(e){console.error("❌ Error joining public room:",e),p.ZP.error("Failed to join room. Please try again.")}}}else console.error("❌ Room not found:",t.status,t.statusText),p.ZP.error("Room not found. Please check the room code.")}catch(e){console.error("Error checking room details:",e),p.ZP.error("Failed to check room details. Please try again.")}}catch(e){console.error("Error joining room:",e),p.ZP.error("Failed to join room. Please try again.")}},es=e=>new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});if(f){var ea;return(0,r.jsxs)(n.Zb,{className:"w-full max-w-md",children:[(0,r.jsx)(n.Ol,{children:(0,r.jsxs)(n.ll,{className:"flex items-center gap-2",children:[(0,r.jsx)(j,{className:"h-5 w-5"}),"Current Room"]})}),(0,r.jsxs)(n.aY,{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"font-semibold text-lg",children:f.name}),f.description&&(0,r.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:f.description})]}),(0,r.jsxs)("div",{className:"flex items-center gap-4 text-sm text-gray-500",children:[(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)(y.Z,{className:"h-4 w-4"}),(0,r.jsxs)("span",{children:[(null===(ea=f.users)||void 0===ea?void 0:ea.length)||0,"/",f.maxUsers]})]}),(0,r.jsx)(d,{variant:"secondary",children:f.language})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(h,{htmlFor:"room-code",className:"text-sm font-medium",children:"Room Code:"}),(0,r.jsxs)("div",{className:"flex items-center gap-2 flex-1",children:[(0,r.jsx)(u.I,{id:"room-code",value:f.id,readOnly:!0,className:"text-sm"}),(0,r.jsx)(i.z,{variant:"outline",size:"sm",onClick:()=>{f&&(navigator.clipboard.writeText(f.id),H(!0),setTimeout(()=>H(!1),2e3))},className:"flex items-center gap-1",children:Y?(0,r.jsx)(v.Z,{className:"h-4 w-4"}):(0,r.jsx)(b.Z,{className:"h-4 w-4"})})]})]}),(0,r.jsxs)(i.z,{onClick:()=>{f&&D(f.id)},variant:"danger",className:"w-full flex items-center gap-2",children:[(0,r.jsx)(w.Z,{className:"h-4 w-4"}),"Leave Room"]})]})]})}return(0,r.jsxs)(n.Zb,{className:"w-full max-w-2xl",children:[(0,r.jsx)(n.Ol,{children:(0,r.jsxs)(n.ll,{className:"flex items-center gap-2",children:[(0,r.jsx)(y.Z,{className:"h-5 w-5"}),"Room Manager"]})}),(0,r.jsxs)(n.aY,{className:"space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("h3",{className:"font-semibold mb-3 flex items-center gap-2",children:[(0,r.jsx)(N,{className:"h-4 w-4"}),"Join Room by Code"]}),(0,r.jsxs)("form",{onSubmit:ee,className:"flex gap-2",children:[(0,r.jsx)(u.I,{placeholder:"Enter room code",value:A,onChange:e=>I(e.target.value),className:"flex-1"}),(0,r.jsx)(i.z,{type:"submit",disabled:!A.trim(),children:"Join"})]})]}),(0,r.jsx)(g,{}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,r.jsxs)("h3",{className:"font-semibold flex items-center gap-2",children:[(0,r.jsx)(k,{className:"h-4 w-4"}),"Create New Room"]}),(0,r.jsx)(i.z,{variant:"outline",onClick:()=>F(!z),children:z?"Cancel":"New Room"})]}),_&&(0,r.jsxs)("div",{className:"mb-4 p-4 bg-green-50 border border-green-200 rounded-lg",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(v.Z,{className:"h-5 w-5 text-green-600"}),(0,r.jsx)("span",{className:"text-green-800 font-medium",children:"Room created successfully!"})]}),(0,r.jsx)(i.z,{variant:"outline",size:"sm",onClick:()=>B(null),className:"text-green-600 hover:text-green-700",children:"\xd7"})]}),(0,r.jsxs)("div",{className:"mt-2",children:[(0,r.jsx)(h,{className:"text-sm font-medium text-green-700",children:"Room Code:"}),(0,r.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,r.jsx)(u.I,{value:_,readOnly:!0,className:"text-sm font-mono bg-white"}),(0,r.jsx)(i.z,{variant:"outline",size:"sm",onClick:()=>{navigator.clipboard.writeText(_),H(!0),setTimeout(()=>H(!1),2e3)},className:"flex items-center gap-1",children:Y?(0,r.jsx)(v.Z,{className:"h-4 w-4"}):(0,r.jsx)(b.Z,{className:"h-4 w-4"})})]})]})]}),z&&(0,r.jsxs)("form",{onSubmit:K,className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(h,{htmlFor:"room-name",children:"Room Name"}),(0,r.jsx)(u.I,{id:"room-name",value:V.name,onChange:e=>{G(s=>({...s,name:e.target.value})),W.name&&X(e=>({...e,name:""}))},placeholder:"Enter room name (min 3 characters)",className:W.name?"border-red-500 focus:border-red-500 focus:ring-red-500":""}),W.name&&(0,r.jsxs)("div",{className:"flex items-center gap-2 text-red-500 text-sm mt-1",children:[(0,r.jsx)(C.Z,{className:"h-4 w-4"}),(0,r.jsx)("span",{children:W.name})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(h,{htmlFor:"room-description",children:"Description (optional)"}),(0,r.jsx)(u.I,{id:"room-description",value:V.description,onChange:e=>G(s=>({...s,description:e.target.value})),placeholder:"Enter room description"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(h,{htmlFor:"room-language",children:"Language"}),(0,r.jsxs)("select",{id:"room-language",value:V.language,onChange:e=>G(s=>({...s,language:e.target.value})),className:"w-full p-2 border rounded-md",children:[(0,r.jsx)("option",{value:"javascript",children:"JavaScript"}),(0,r.jsx)("option",{value:"python",children:"Python"}),(0,r.jsx)("option",{value:"java",children:"Java"}),(0,r.jsx)("option",{value:"cpp",children:"C++"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(h,{htmlFor:"room-max-users",children:"Max Users"}),(0,r.jsx)(u.I,{id:"room-max-users",type:"number",min:"2",max:"50",value:V.maxUsers,onChange:e=>{G(s=>({...s,maxUsers:parseInt(e.target.value)||2})),W.maxUsers&&X(e=>({...e,maxUsers:""}))},className:W.maxUsers?"border-red-500":""}),W.maxUsers&&(0,r.jsx)("p",{className:"text-red-500 text-sm mt-1",children:W.maxUsers})]})]}),(0,r.jsx)("div",{className:"space-y-3",children:(0,r.jsxs)("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("input",{type:"checkbox",id:"room-public",checked:V.isPublic,onChange:e=>{G(s=>({...s,isPublic:e.target.checked,password:e.target.checked?"":s.password})),e.target.checked&&W.password&&X(e=>({...e,password:""}))},className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),(0,r.jsxs)("div",{children:[(0,r.jsx)(h,{htmlFor:"room-public",className:"text-sm font-medium",children:"Public Room"}),(0,r.jsx)("p",{className:"text-gray-500 text-xs",children:V.isPublic?"Anyone can join with room code":"Password required to join"})]})]}),(0,r.jsx)(d,{variant:V.isPublic?"default":"secondary",children:V.isPublic?"Public":"Private"})]})}),!V.isPublic&&(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)(h,{htmlFor:"room-password",className:"flex items-center gap-2",children:["Room Password *",(0,r.jsx)(d,{variant:"outline",className:"text-xs",children:"Required"})]}),(0,r.jsx)(u.I,{id:"room-password",type:"password",value:V.password,onChange:e=>{G(s=>({...s,password:e.target.value})),W.password&&X(e=>({...e,password:""}))},placeholder:"Enter room password (min 4 characters)",className:W.password?"border-red-500 focus:border-red-500 focus:ring-red-500":"",required:!0}),W.password&&(0,r.jsxs)("div",{className:"flex items-center gap-2 text-red-500 text-sm",children:[(0,r.jsx)(C.Z,{className:"h-4 w-4"}),(0,r.jsx)("span",{children:W.password})]}),(0,r.jsx)("p",{className:"text-gray-500 text-xs",children:"Password must be 4-50 characters long and is required for private room access"})]}),(0,r.jsx)(i.z,{type:"submit",className:"w-full",children:"Create Room"})]})]}),(0,r.jsx)(g,{}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("h3",{className:"font-semibold mb-3 flex items-center gap-2",children:[(0,r.jsx)(Z.Z,{className:"h-4 w-4"}),"Available Rooms"]}),0===E.length?(0,r.jsx)("p",{className:"text-gray-500 text-center py-4",children:"No rooms available"}):(0,r.jsx)("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:E.map(e=>{var s;return(0,r.jsxs)("div",{className:"flex items-center justify-between p-3 border rounded-lg hover:bg-gray-50",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("h4",{className:"font-medium",children:e.name}),(0,r.jsx)(d,{variant:"outline",children:e.language}),!e.isPublic&&(0,r.jsx)(d,{variant:"secondary",children:"Private"})]}),e.description&&(0,r.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:e.description}),(0,r.jsxs)("div",{className:"flex items-center gap-4 text-xs text-gray-500 mt-2",children:[(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)(y.Z,{className:"h-3 w-3"}),(0,r.jsxs)("span",{children:[(null===(s=e.users)||void 0===s?void 0:s.length)||0,"/",e.maxUsers]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)(R.Z,{className:"h-3 w-3"}),(0,r.jsx)("span",{children:es(e.createdAt)})]})]})]}),(0,r.jsx)(i.z,{onClick:()=>Q(e.id),disabled:e.users.length>=e.maxUsers,size:"sm",children:"Join"})]},e.id)})})]})]}),T&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-lg w-full max-w-md",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Enter Room Password"}),(0,r.jsxs)("form",{onSubmit:$,className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(h,{htmlFor:"join-password",children:"Password"}),(0,r.jsx)(u.I,{id:"join-password",type:"password",value:M,onChange:e=>O(e.target.value),placeholder:"Enter room password",required:!0,autoFocus:!0})]}),(0,r.jsxs)("div",{className:"flex gap-2 justify-end",children:[(0,r.jsx)(i.z,{type:"button",variant:"outline",onClick:()=>{q(!1),O(""),J("")},children:"Cancel"}),(0,r.jsx)(i.z,{type:"submit",children:"Join Room"})]})]})]})})]})}var D=a(6614),S=a(9198),E=a(9775);let U=(0,f.Z)("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);var z=a(8002);function F(){let{token:e}=(0,l.aC)(),[s,a]=(0,t.useState)([]),[o,n]=(0,t.useState)(!0),[c,m]=(0,t.useState)(null),x=(0,t.useCallback)(async()=>{if(e)try{n(!0),m(null);let s="".concat("http://localhost:5001","/api/rooms");console.log("\uD83C\uDF10 Fetching available rooms from:",s);let r=await fetch(s,{headers:{Authorization:"Bearer ".concat(e)}});if(r.ok){let e=await r.json();if(console.log("✅ Available rooms response:",e),e.success&&e.data&&e.data.rooms)a(e.data.rooms);else throw Error(e.error||"Failed to load rooms")}else throw console.error("❌ Available rooms API error:",r.status,r.statusText),Error("Server error: ".concat(r.status))}catch(e){console.error("Error fetching available rooms:",e),m(e instanceof Error?e.message:"Failed to load rooms"),a([])}finally{n(!1)}},[e]);return((0,t.useEffect)(()=>{e&&x()},[e,x]),o)?(0,r.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):c?(0,r.jsxs)("div",{className:"text-center py-8 text-red-600",children:[(0,r.jsxs)("p",{children:["Error loading rooms: ",c]}),(0,r.jsx)(i.z,{onClick:x,variant:"outline",className:"mt-2",children:"Retry"})]}):0===s.length?(0,r.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,r.jsx)(Z.Z,{className:"w-12 h-12 mx-auto mb-4 text-gray-400"}),(0,r.jsx)("p",{children:"No rooms available"})]}):(0,r.jsx)("div",{className:"space-y-3 max-h-80 overflow-y-auto",children:s.map(e=>{var s;return(0,r.jsx)("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-gray-50 dark:hover:bg-gray-800",children:(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,r.jsx)("h4",{className:"font-medium text-gray-900 dark:text-gray-100",children:e.name}),(0,r.jsx)(d,{variant:"outline",children:e.language}),!e.isPublic&&(0,r.jsx)(d,{variant:"secondary",children:"Private"})]}),e.description&&(0,r.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:e.description}),(0,r.jsxs)("div",{className:"flex items-center gap-4 text-xs text-gray-500",children:[(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)(y.Z,{className:"w-3 h-3"}),(0,r.jsxs)("span",{children:[(null===(s=e.users)||void 0===s?void 0:s.length)||0,"/",e.maxUsers]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)(R.Z,{className:"w-3 h-3"}),(0,r.jsx)("span",{children:new Date(e.createdAt).toLocaleDateString()})]}),(0,r.jsxs)("span",{children:["by ",e.owner.name]})]})]})},e.id)})})}function A(){let{user:e,logout:s,isLoading:a,token:c}=(0,l.aC)(),d=(0,o.useRouter)(),[m,x]=(0,t.useState)({totalRooms:0,joinedRooms:0,messagesCount:0,executionsCount:0}),[u,h]=(0,t.useState)(!0),[g,p]=(0,t.useState)(null);(0,t.useEffect)(()=>{a||e||d.push("/")},[e,a,d]);let f=(0,t.useCallback)(async()=>{if((null==e?void 0:e.id)&&c){console.log("\uD83D\uDD0D fetchUserStats called with:",{userId:null==e?void 0:e.id,token:c?"EXISTS":"MISSING"});try{h(!0),p(null);let e="".concat("http://localhost:5001","/api/users/activity");console.log("\uD83C\uDF10 Calling API:",e);let s=await fetch(e,{headers:{Authorization:"Bearer ".concat(c)}});if(s.ok){let e=await s.json();if(console.log("✅ API Response:",e),e.success&&e.data){let s={totalRooms:e.data.totalRooms||0,joinedRooms:e.data.joinedRooms||0,messagesCount:e.data.messagesCount||0,executionsCount:e.data.executionsCount||0};console.log("\uD83D\uDCCA Setting new stats:",s),x(s)}else throw Error(e.error||"Failed to load statistics")}else throw console.error("❌ API Error:",s.status,s.statusText),Error("Server error: ".concat(s.status))}catch(e){console.error("Error fetching user stats:",e),p(e instanceof Error?e.message:"Failed to load statistics"),x({totalRooms:0,joinedRooms:0,messagesCount:0,executionsCount:0})}finally{h(!1)}}},[null==e?void 0:e.id,c]);return((0,t.useEffect)(()=>{console.log("\uD83D\uDD04 useEffect triggered:",{userId:null==e?void 0:e.id,hasToken:!!c}),(null==e?void 0:e.id)&&c&&(console.log("\uD83D\uDE80 Calling fetchUserStats..."),f())},[null==e?void 0:e.id,c,f]),(0,t.useEffect)(()=>{let e=()=>{f()};return window.addEventListener("roomCreated",e),()=>{window.removeEventListener("roomCreated",e)}},[f]),a)?(0,r.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):e?(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[(0,r.jsx)("header",{className:"bg-white dark:bg-gray-800 shadow-sm border-b border-gray-200 dark:border-gray-700",children:(0,r.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,r.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,r.jsx)("div",{className:"flex items-center",children:(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-600 to-purple-600 rounded-lg flex items-center justify-center",children:(0,r.jsx)(D.Z,{className:"w-5 h-5 text-white"})}),(0,r.jsx)("span",{className:"text-xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"CodeMitra"})]})}),(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-gray-600 dark:text-gray-300",children:[(0,r.jsx)(S.Z,{className:"w-4 h-4"}),(0,r.jsxs)("span",{children:["Welcome, ",e.name]})]}),(0,r.jsxs)(i.z,{variant:"outline",size:"sm",className:"flex items-center space-x-2",children:[(0,r.jsx)(E.Z,{className:"w-4 h-4"}),(0,r.jsx)("span",{children:"Settings"})]}),(0,r.jsxs)(i.z,{variant:"outline",size:"sm",onClick:s,className:"flex items-center space-x-2 text-red-600 hover:text-red-700 border-red-200 hover:border-red-300",children:[(0,r.jsx)(w.Z,{className:"w-4 h-4"}),(0,r.jsx)("span",{children:"Logout"})]})]})]})})}),(0,r.jsxs)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:"Dashboard"}),(0,r.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Manage your coding rooms and collaborate with your team"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[(0,r.jsx)(n.Zb,{children:(0,r.jsx)(n.aY,{className:"p-6",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)("div",{className:"w-10 h-10 bg-blue-100 dark:bg-blue-900 rounded-lg flex items-center justify-center",children:(0,r.jsx)(y.Z,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})})}),(0,r.jsxs)("div",{className:"ml-4",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total Rooms"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:u?"...":g?"0":m.totalRooms})]})]})})}),(0,r.jsx)(n.Zb,{children:(0,r.jsx)(n.aY,{className:"p-6",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)("div",{className:"w-10 h-10 bg-green-100 dark:bg-green-900 rounded-lg flex items-center justify-center",children:(0,r.jsx)(U,{className:"w-6 h-6 text-green-600 dark:text-green-400"})})}),(0,r.jsxs)("div",{className:"ml-4",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Joined Rooms"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:u?"...":g?"0":m.joinedRooms})]})]})})}),(0,r.jsx)(n.Zb,{children:(0,r.jsx)(n.aY,{className:"p-6",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)("div",{className:"w-10 h-10 bg-purple-100 dark:bg-purple-900 rounded-lg flex items-center justify-center",children:(0,r.jsx)(z.Z,{className:"w-6 h-6 text-purple-600 dark:text-purple-400"})})}),(0,r.jsxs)("div",{className:"ml-4",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Messages"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:u?"...":g?"0":m.messagesCount})]})]})})}),(0,r.jsx)(n.Zb,{children:(0,r.jsx)(n.aY,{className:"p-6",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)("div",{className:"w-10 h-10 bg-orange-100 dark:bg-orange-900 rounded-lg flex items-center justify-center",children:(0,r.jsx)(D.Z,{className:"w-6 h-6 text-orange-600 dark:text-orange-400"})})}),(0,r.jsxs)("div",{className:"ml-4",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Code Executions"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:u?"...":g?"0":m.executionsCount})]})]})})})]}),(0,r.jsx)("div",{className:"mb-8",children:(0,r.jsxs)(n.Zb,{children:[(0,r.jsx)(n.Ol,{children:(0,r.jsxs)(n.ll,{className:"flex items-center space-x-2",children:[(0,r.jsx)(y.Z,{className:"w-5 h-5"}),(0,r.jsx)("span",{children:"Available Rooms"})]})}),(0,r.jsx)(n.aY,{children:(0,r.jsx)(F,{})})]})}),(0,r.jsx)("div",{className:"w-full",children:(0,r.jsxs)(n.Zb,{children:[(0,r.jsx)(n.Ol,{children:(0,r.jsxs)(n.ll,{className:"flex items-center space-x-2",children:[(0,r.jsx)(y.Z,{className:"w-5 h-5"}),(0,r.jsx)("span",{children:"Room Management"})]})}),(0,r.jsx)(n.aY,{children:(0,r.jsx)(P,{})})]})})]})]}):null}},3842:function(e,s,a){"use strict";a.d(s,{z:function(){return l}});var r=a(7821);a(8078);var t=a(7211);function l(e){let{className:s,variant:a="default",size:l="md",isLoading:o=!1,children:n,disabled:i,...c}=e;return(0,r.jsxs)("button",{className:(0,t.cn)("inline-flex items-center justify-center rounded-md font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none ring-offset-background",{default:"bg-gray-900 text-white hover:bg-gray-800 dark:bg-gray-50 dark:text-gray-900 dark:hover:bg-gray-200",primary:"bg-blue-600 text-white hover:bg-blue-700 focus:ring-blue-500",secondary:"bg-gray-100 text-gray-900 hover:bg-gray-200 dark:bg-gray-800 dark:text-gray-100 dark:hover:bg-gray-700",outline:"border border-gray-300 bg-transparent text-gray-700 hover:bg-gray-50 dark:border-gray-700 dark:text-gray-300 dark:hover:bg-gray-800",ghost:"bg-transparent text-gray-700 hover:bg-gray-100 dark:text-gray-300 dark:hover:bg-gray-800",danger:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500"}[a],{sm:"h-8 px-3 text-sm",md:"h-10 px-4 py-2",lg:"h-12 px-6 text-lg"}[l],s),disabled:i||o,...c,children:[o&&(0,r.jsx)("div",{className:"mr-2 h-4 w-4 animate-spin rounded-full border-2 border-current border-t-transparent"}),n]})}},8006:function(e,s,a){"use strict";a.d(s,{Ol:function(){return n},Zb:function(){return o},aY:function(){return c},ll:function(){return i}});var r=a(7821),t=a(8078),l=a(7211);let o=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,r.jsx)("div",{ref:s,className:(0,l.cn)("rounded-lg border border-gray-200 bg-white shadow-sm dark:border-gray-800 dark:bg-gray-900",a),...t})});o.displayName="Card";let n=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,r.jsx)("div",{ref:s,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",a),...t})});n.displayName="CardHeader";let i=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,r.jsx)("h3",{ref:s,className:(0,l.cn)("text-lg font-semibold leading-none tracking-tight",a),...t})});i.displayName="CardTitle",t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,r.jsx)("p",{ref:s,className:(0,l.cn)("text-sm text-gray-500 dark:text-gray-400",a),...t})}).displayName="CardDescription";let c=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,r.jsx)("div",{ref:s,className:(0,l.cn)("p-6 pt-0",a),...t})});c.displayName="CardContent";let d=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,r.jsx)("div",{ref:s,className:(0,l.cn)("flex items-center p-6 pt-0",a),...t})});d.displayName="CardFooter",d.displayName="CardFooter"},5231:function(e,s,a){"use strict";a.d(s,{I:function(){return o}});var r=a(7821),t=a(8078),l=a(7211);let o=t.forwardRef((e,s)=>{let{className:a,type:t,error:o,...n}=e;return(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsx)("input",{type:t,className:(0,l.cn)("flex h-10 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm placeholder:text-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:cursor-not-allowed disabled:opacity-50 dark:border-gray-700 dark:bg-gray-800 dark:text-white dark:placeholder:text-gray-500",o&&"border-red-500 focus:ring-red-500",a),ref:s,...n}),o&&(0,r.jsx)("p",{className:"text-sm text-red-600 dark:text-red-400",children:o})]})});o.displayName="Input"},7211:function(e,s,a){"use strict";a.d(s,{cn:function(){return l}});var r=a(2605),t=a(1638);function l(){for(var e=arguments.length,s=Array(e),a=0;a<e;a++)s[a]=arguments[a];return(0,t.m6)((0,r.W)(s))}},2828:function(e,s,a){"use strict";a.d(s,{Z:function(){return r}});let r=(0,a(8322).Z)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},8149:function(e,s,a){"use strict";a.d(s,{Z:function(){return r}});let r=(0,a(8322).Z)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},1996:function(e,s,a){"use strict";a.d(s,{Z:function(){return r}});let r=(0,a(8322).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},6614:function(e,s,a){"use strict";a.d(s,{Z:function(){return r}});let r=(0,a(8322).Z)("Code2",[["path",{d:"m18 16 4-4-4-4",key:"1inbqp"}],["path",{d:"m6 8-4 4 4 4",key:"15zrgr"}],["path",{d:"m14.5 4-5 16",key:"e7oirm"}]])},7315:function(e,s,a){"use strict";a.d(s,{Z:function(){return r}});let r=(0,a(8322).Z)("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]])},5353:function(e,s,a){"use strict";a.d(s,{Z:function(){return r}});let r=(0,a(8322).Z)("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]])},6556:function(e,s,a){"use strict";a.d(s,{Z:function(){return r}});let r=(0,a(8322).Z)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]])},8002:function(e,s,a){"use strict";a.d(s,{Z:function(){return r}});let r=(0,a(8322).Z)("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]])},9775:function(e,s,a){"use strict";a.d(s,{Z:function(){return r}});let r=(0,a(8322).Z)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},9198:function(e,s,a){"use strict";a.d(s,{Z:function(){return r}});let r=(0,a(8322).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},961:function(e,s,a){"use strict";a.d(s,{Z:function(){return r}});let r=(0,a(8322).Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])}},function(e){e.O(0,[659,93,660,597,115,364,744],function(){return e(e.s=3976)}),_N_E=e.O()}]);