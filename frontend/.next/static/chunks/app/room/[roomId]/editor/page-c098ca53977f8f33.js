(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[554],{6733:function(e,t,a){Promise.resolve().then(a.bind(a,4989))},4989:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return ep}});var s=a(7821),r=a(8078),n=a(8504),i=a(7531),l=a(5597),o=a(5407),c=a(201),d=a(5331),u=a(5818),m=a(9024),x=a(1397),g=a(2592),h=a(8149),p=a(7315),b=a(9775),y=a(961);let f=[{value:"javascript",label:"JavaScript"},{value:"typescript",label:"TypeScript"},{value:"python",label:"Python"},{value:"java",label:"Java"},{value:"cpp",label:"C++"},{value:"c",label:"C"},{value:"csharp",label:"C#"},{value:"go",label:"Go"},{value:"rust",label:"Rust"},{value:"php",label:"PHP"},{value:"html",label:"HTML"},{value:"css",label:"CSS"},{value:"json",label:"JSON"},{value:"xml",label:"XML"},{value:"markdown",label:"Markdown"},{value:"sql",label:"SQL"},{value:"yaml",label:"YAML"},{value:"dockerfile",label:"Dockerfile"}],v=[{value:"vs",label:"Light"},{value:"vs-dark",label:"Dark"},{value:"hc-black",label:"High Contrast"}];function j(e){var t,a;let{roomId:n,initialCode:j="",language:N="javascript",theme:w="dark",readOnly:k=!1,onCodeChange:C,onSave:S}=e,E=(0,r.useRef)(null),T=(0,r.useRef)(null),[L,I]=(0,r.useState)(j),[R,Z]=(0,r.useState)(N),[z,A]=(0,r.useState)("dark"===w?"vs-dark":"vs"),[P,M]=(0,r.useState)(!0),[D,W]=(0,r.useState)([]),[H,_]=(0,r.useState)(!1),[U,F]=(0,r.useState)(!1),[J,V]=(0,r.useState)(k),[O,Y]=(0,r.useState)(!1),[q,B]=(0,r.useState)(14),[Q,G]=(0,r.useState)(!0),[K,$]=(0,r.useState)(!1),[X,ee]=(0,r.useState)(!0),{socket:et}=(0,d.s)(),{currentRoom:ea}=(0,l.N)(),{user:es}=(0,i.aC)(),er=(0,r.useCallback)((e,t)=>{E.current=e,T.current=t,M(!1),e.updateOptions({fontSize:q,minimap:{enabled:Q},wordWrap:K?"on":"off",readOnly:J,automaticLayout:!0,scrollBeyondLastLine:!1,renderLineHighlight:"all",cursorBlinking:"smooth",cursorSmoothCaretAnimation:"on",multiCursorModifier:"ctrlCmd",suggestOnTriggerCharacters:!0,quickSuggestions:!0,parameterHints:{enabled:!0},hover:{enabled:!0},contextmenu:!0,mouseWheelZoom:!0}),e.addCommand(t.KeyMod.CtrlCmd|t.KeyCode.KeyS,()=>{el()}),e.addCommand(t.KeyMod.CtrlCmd|t.KeyCode.KeyR,()=>{eo()}),e.onDidChangeCursorPosition(e=>{if(et&&es){let t={lineNumber:e.position.lineNumber,column:e.position.column};et.emit("cursor-position",{roomId:n,userId:es.id,userName:es.name,userColor:ei(es.id),position:t,selection:e.selection?{startLineNumber:e.selection.startLineNumber,startColumn:e.selection.startColumn,endLineNumber:e.selection.endLineNumber,endColumn:e.selection.endColumn}:void 0})}}),e.onDidChangeCursorSelection(e=>{et&&es&&e.selection&&et.emit("cursor-selection",{roomId:n,userId:es.id,userName:es.name,userColor:ei(es.id),selection:{startLineNumber:e.selection.startLineNumber,startColumn:e.selection.startColumn,endLineNumber:e.selection.endLineNumber,endColumn:e.selection.endColumn}})})},[et,es,n,q,Q,K,J]),en=(0,r.useCallback)(e=>{void 0!==e&&(I(e),null==C||C(e),et&&es&&et.emit("code-change",{roomId:n,userId:es.id,userName:es.name,code:e,timestamp:Date.now()}),X&&setTimeout(()=>{el()},1e3))},[et,es,n,C,X]);(0,r.useEffect)(()=>{if(et)return et.on("code-change",e=>{if(e.userId!==(null==es?void 0:es.id)&&E.current){let t=E.current;if(t.getValue()!==e.text){let a=t.getPosition();t.setValue(e.text),t.setPosition(a),I(e.text)}}}),et.on("cursor-position",e=>{e.userId!==(null==es?void 0:es.id)&&W(t=>[...t.filter(t=>t.userId!==e.userId),e])}),et.on("user-left",e=>{W(t=>t.filter(t=>t.userId!==e))}),et.on("language-change",e=>{e.userId!==(null==es?void 0:es.id)&&Z(e.language)}),()=>{et.off("code-change"),et.off("cursor-position"),et.off("user-left"),et.off("language-change")}},[et,es]);let ei=e=>{let t=["#FF6B6B","#4ECDC4","#45B7D1","#FFA07A","#98D8C8","#F7DC6F"];return t[e.split("").reduce((e,t)=>e+t.charCodeAt(0),0)%t.length]},el=(0,r.useCallback)(()=>{S&&S(L)},[L,S]),eo=(0,r.useCallback)(()=>{console.log("Running code:",L)},[L]),ec=(0,r.useCallback)(async()=>{try{await navigator.clipboard.writeText(L),Y(!0),setTimeout(()=>Y(!1),2e3)}catch(e){console.error("Failed to copy code:",e)}},[L]),ed=e=>{Z(e),et&&es&&et.emit("language-change",{roomId:n,userId:es.id,language:e})},eu=e=>{A(e),T.current&&T.current.editor.setTheme(e)};return(0,s.jsxs)("div",{className:"flex flex-col h-full bg-gray-50 dark:bg-gray-900",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between p-4 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsx)("select",{value:R,onChange:e=>ed(e.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-sm",children:f.map(e=>(0,s.jsx)("option",{value:e.value,children:e.label},e.value))}),(0,s.jsx)("select",{value:z,onChange:e=>eu(e.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-sm",children:v.map(e=>(0,s.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsxs)("button",{onClick:()=>{let e=document.createElement("a"),t=new Blob([L],{type:"text/plain"});e.href=URL.createObjectURL(t),e.download="code.".concat(R),document.body.appendChild(e),e.click(),document.body.removeChild(e)},className:"flex items-center px-3 py-2 text-sm bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:[(0,s.jsx)(u.Z,{className:"w-4 h-4 mr-1"}),"Download"]}),(0,s.jsxs)("label",{className:"flex items-center px-3 py-2 text-sm bg-gray-600 text-white rounded-md hover:bg-gray-700 transition-colors cursor-pointer",children:[(0,s.jsx)(m.Z,{className:"w-4 h-4 mr-1"}),"Upload",(0,s.jsx)("input",{type:"file",accept:".js,.ts,.py,.java,.cpp,.c,.cs,.go,.rs,.php,.html,.css,.json,.xml,.md,.sql,.yml,.yaml",onChange:e=>{var t;let a=null===(t=e.target.files)||void 0===t?void 0:t[0];if(a){let e=new FileReader;e.onload=e=>{var t;let a=null===(t=e.target)||void 0===t?void 0:t.result;I(a),E.current&&E.current.setValue(a)},e.readAsText(a)}},className:"hidden"})]}),(0,s.jsxs)("button",{onClick:el,className:"flex items-center px-3 py-2 text-sm bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors",children:[(0,s.jsx)(x.Z,{className:"w-4 h-4 mr-1"}),"Save"]}),(0,s.jsxs)("button",{onClick:eo,className:"flex items-center px-3 py-2 text-sm bg-purple-600 text-white rounded-md hover:bg-purple-700 transition-colors",children:[(0,s.jsx)(g.Z,{className:"w-4 h-4 mr-1"}),"Run"]}),(0,s.jsxs)("button",{onClick:ec,className:"flex items-center px-3 py-2 text-sm bg-gray-600 text-white rounded-md hover:bg-gray-700 transition-colors",children:[O?(0,s.jsx)(h.Z,{className:"w-4 h-4 mr-1"}):(0,s.jsx)(p.Z,{className:"w-4 h-4 mr-1"}),O?"Copied!":"Copy"]}),(0,s.jsxs)("button",{onClick:()=>_(!H),className:"flex items-center px-3 py-2 text-sm bg-gray-600 text-white rounded-md hover:bg-gray-700 transition-colors",children:[(0,s.jsx)(b.Z,{className:"w-4 h-4 mr-1"}),"Settings"]}),(0,s.jsxs)("button",{onClick:()=>F(!U),className:"flex items-center px-3 py-2 text-sm bg-gray-600 text-white rounded-md hover:bg-gray-700 transition-colors",children:[(0,s.jsx)(y.Z,{className:"w-4 h-4 mr-1"}),"Users (",(null==ea?void 0:null===(t=ea.users)||void 0===t?void 0:t.length)||0,")"]})]})]}),H&&(0,s.jsx)(o.E.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"p-4 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700",children:(0,s.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Font Size"}),(0,s.jsx)("input",{type:"range",min:"12",max:"24",value:q,onChange:e=>B(Number(e.target.value)),className:"w-full"}),(0,s.jsxs)("span",{className:"text-xs text-gray-500",children:[q,"px"]})]}),(0,s.jsx)("div",{children:(0,s.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,s.jsx)("input",{type:"checkbox",checked:Q,onChange:e=>G(e.target.checked),className:"rounded"}),(0,s.jsx)("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Show Minimap"})]})}),(0,s.jsx)("div",{children:(0,s.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,s.jsx)("input",{type:"checkbox",checked:K,onChange:e=>$(e.target.checked),className:"rounded"}),(0,s.jsx)("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Word Wrap"})]})}),(0,s.jsx)("div",{children:(0,s.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,s.jsx)("input",{type:"checkbox",checked:X,onChange:e=>ee(e.target.checked),className:"rounded"}),(0,s.jsx)("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Auto Save"})]})})]})}),U&&(0,s.jsx)(o.E.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"p-4 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700",children:(0,s.jsx)("div",{className:"flex flex-wrap gap-2",children:null==ea?void 0:null===(a=ea.users)||void 0===a?void 0:a.map(e=>(0,s.jsxs)("div",{className:"flex items-center px-3 py-1 bg-gray-100 dark:bg-gray-700 rounded-full",children:[(0,s.jsx)("div",{className:"w-3 h-3 rounded-full mr-2",style:{backgroundColor:ei(e.user.id)}}),(0,s.jsx)("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:e.user.name})]},e.user.id))})}),(0,s.jsxs)("div",{className:"flex-1 relative",children:[P&&(0,s.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-white dark:bg-gray-900 z-10",children:(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("div",{className:"w-6 h-6 border-2 border-blue-600 border-t-transparent rounded-full animate-spin"}),(0,s.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Loading editor..."})]})}),(0,s.jsx)(c.ML,{height:"100%",language:R,theme:z,value:L,onChange:en,onMount:er,options:{readOnly:J,fontSize:q,minimap:{enabled:Q},wordWrap:K?"on":"off",automaticLayout:!0,scrollBeyondLastLine:!1,renderLineHighlight:"all",cursorBlinking:"smooth",cursorSmoothCaretAnimation:"on",multiCursorModifier:"ctrlCmd",suggestOnTriggerCharacters:!0,quickSuggestions:!0,parameterHints:{enabled:!0},hover:{enabled:!0},contextmenu:!0,mouseWheelZoom:!0}}),D.map(e=>(0,s.jsxs)("div",{className:"absolute z-10 pointer-events-none",style:{top:"".concat(20*e.position.lineNumber,"px"),left:"".concat(8*e.position.column,"px")},children:[(0,s.jsx)("div",{className:"w-0.5 h-5 animate-pulse",style:{backgroundColor:e.userColor}}),(0,s.jsx)("div",{className:"absolute top-0 left-1 px-2 py-1 text-xs text-white rounded whitespace-nowrap",style:{backgroundColor:e.userColor},children:e.userName})]},e.userId))]})]})}var N=a(3842),w=a(5231),k=a(8006),C=a(5730),S=a(6515),E=a(6224),T=a(6400),L=a(2531),I=a(5813),R=a(1996),Z=a(5867),z=a(8146),A=a(7782),P=a(7198),M=a(3203);class D{static getInstance(){return D.instance||(D.instance=new D),D.instance}async executeCode(e){let{code:t,language:a,input:s,roomId:r,userId:n}=e;if(!t.trim())return{success:!1,error:"Please write some code before executing.",status:"system_error",timestamp:new Date,language:a,codeSize:0};let i=new AbortController,l="".concat(r,"-").concat(n,"-").concat(Date.now());this.executionQueue.set(l,i);try{let e=await fetch("/api/code/execute",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))},body:JSON.stringify({code:t.trim(),language:a,input:s||"",roomId:r,userId:n}),signal:i.signal});if(!e.ok)throw Error("Execution failed: ".concat(e.status," ").concat(e.statusText));let o=await e.json();return this.executionQueue.delete(l),{success:o.success,output:o.output,error:o.error,executionTime:o.executionTime,memoryUsed:o.memoryUsed,compilationTime:o.compilationTime,status:o.status,timestamp:new Date,language:a,codeSize:t.length}}catch(e){if(this.executionQueue.delete(l),e instanceof Error){if("AbortError"===e.name)return{success:!1,error:"Code execution was cancelled.",status:"system_error",timestamp:new Date,language:a,codeSize:t.length};return{success:!1,error:e.message,status:"system_error",timestamp:new Date,language:a,codeSize:t.length}}return{success:!1,error:"An unexpected error occurred during execution.",status:"system_error",timestamp:new Date,language:a,codeSize:t.length}}}cancelExecution(e){let t=this.executionQueue.get(e);return!!t&&(t.abort(),this.executionQueue.delete(e),!0)}cancelRoomExecutions(e){for(let[t,a]of Array.from(this.executionQueue.entries()))t.startsWith(e)&&(a.abort(),this.executionQueue.delete(t))}getExecutionStatus(e){return this.executionQueue.has(e)?{isExecuting:!0,progress:50,currentStep:"Executing code...",estimatedTime:5}:null}validateCodeSyntax(e,t){let a=[];if(!e.trim())return a.push("Code cannot be empty"),{isValid:!1,errors:a};switch(t){case"javascript":return this.validateJavaScript(e);case"typescript":return this.validateTypeScript(e);case"python":return this.validatePython(e);case"java":return this.validateJava(e);case"cpp":return this.validateCpp(e);case"c":return this.validateC(e);case"go":return this.validateGo(e);case"rust":return this.validateRust(e);case"php":return this.validatePhp(e);case"html":return this.validateHtml(e);case"css":return this.validateCss(e);case"sql":return this.validateSql(e);default:return{isValid:!0,errors:[]}}}validateJavaScript(e){let t=[];try{return Function(e),(e.includes("while(true)")||e.includes("for(;;)"))&&t.push("Potential infinite loop detected"),(e.includes("process.exit")||e.includes("window.close"))&&t.push("System exit commands are not allowed"),{isValid:0===t.length,errors:t}}catch(e){return{isValid:!1,errors:["JavaScript syntax error"]}}}validateTypeScript(e){return this.validateJavaScript(e)}validatePython(e){let t=[];return(e.includes("while True:")||e.includes("for i in range(9999999)"))&&t.push("Potential infinite loop detected"),(e.includes("os.system")||e.includes("subprocess.call"))&&t.push("System commands are not allowed"),(e.includes("import os")||e.includes("import subprocess"))&&t.push("System modules are not allowed"),{isValid:0===t.length,errors:t}}validateJava(e){let t=[];return e.includes("public class")||t.push("Java code must contain a public class"),e.includes("public static void main")||t.push("Java code must contain a main method"),(e.includes("System.exit")||e.includes("Runtime.getRuntime()"))&&t.push("System exit commands are not allowed"),{isValid:0===t.length,errors:t}}validateCpp(e){let t=[];return e.includes("int main()")||t.push("C++ code must contain a main function"),(e.includes("system(")||e.includes("exit("))&&t.push("System commands are not allowed"),{isValid:0===t.length,errors:t}}validateC(e){let t=[];return e.includes("int main(")||t.push("C code must contain a main function"),(e.includes("system(")||e.includes("exit("))&&t.push("System commands are not allowed"),{isValid:0===t.length,errors:t}}validateGo(e){let t=[];return e.includes("package main")||t.push("Go code must contain package main"),e.includes("func main()")||t.push("Go code must contain a main function"),(e.includes("os.Exit")||e.includes("syscall.Exec"))&&t.push("System exit commands are not allowed"),{isValid:0===t.length,errors:t}}validateRust(e){let t=[];return e.includes("fn main()")||t.push("Rust code must contain a main function"),(e.includes("std::process::exit")||e.includes("std::env::set_var"))&&t.push("System commands are not allowed"),{isValid:0===t.length,errors:t}}validatePhp(e){let t=[];return(e.includes("exec(")||e.includes("shell_exec(")||e.includes("system("))&&t.push("System commands are not allowed"),(e.includes("file_get_contents")||e.includes("fopen"))&&t.push("File operations are not allowed"),{isValid:0===t.length,errors:t}}validateHtml(e){let t=[];return e.includes("<html")&&e.includes("</html>")||t.push("HTML code must contain html tags"),e.includes("<body")&&e.includes("</body>")||t.push("HTML code must contain body tags"),{isValid:0===t.length,errors:t}}validateCss(e){let t=[];return e.includes("{")&&e.includes("}")||t.push("CSS code must contain style rules"),{isValid:0===t.length,errors:t}}validateSql(e){let t=[],a=e.toUpperCase();for(let e of["DROP","DELETE","UPDATE","INSERT","ALTER","CREATE"])a.includes(e)&&t.push("".concat(e," operations are not allowed in demo mode"));return{isValid:0===t.length,errors:t}}constructor(){this.executionQueue=new Map}}let W=D.getInstance();function H(e){var t;let{code:a,language:n,roomId:c,onExecutionStart:d,onExecutionComplete:m}=e,{user:x}=(0,i.aC)(),{currentRoom:h}=(0,l.N)(),[b,y]=(0,r.useState)(!1),[f,v]=(0,r.useState)(null),[j,D]=(0,r.useState)(null),[H,_]=(0,r.useState)(""),[U,F]=(0,r.useState)("output"),[J,V]=(0,r.useState)([]),[O,Y]=(0,r.useState)(!1),q=[{id:"output",label:"Output",icon:C.Z},{id:"input",label:"Input",icon:S.Z},{id:"debug",label:"Debug",icon:E.Z},{id:"history",label:"History",icon:T.Z}],B=new Set(["python","java","cpp","c","go","rust"]).has(n),Q=(0,r.useCallback)(async()=>{if(x&&h&&a.trim()){y(!0),D({isExecuting:!0,progress:0,currentStep:"Validating code...",estimatedTime:5}),null==d||d();try{let e=W.validateCodeSyntax(a,n);if(!e.isValid){let t={success:!1,error:e.errors.join("\n"),status:"compilation_error",timestamp:new Date,language:n,codeSize:a.length};v(t),V(e=>[t,...e.slice(0,9)]),null==m||m(t);return}let t=await W.executeCode({code:a,language:n,input:H.trim(),roomId:c,userId:x.id});v(t),V(e=>[t,...e.slice(0,9)]),null==m||m(t),"success"===t.status?D({isExecuting:!1,progress:100,currentStep:"Execution completed successfully",estimatedTime:0}):D({isExecuting:!1,progress:100,currentStep:"Execution failed: ".concat(t.status),estimatedTime:0})}catch(t){let e={success:!1,error:t instanceof Error?t.message:"Execution failed",status:"system_error",timestamp:new Date,language:n,codeSize:a.length};v(e),V(t=>[e,...t.slice(0,9)]),null==m||m(e)}finally{y(!1),setTimeout(()=>D(null),3e3)}}},[a,n,H,c,x,h,d,m]),G=(0,r.useCallback)(()=>{h&&(W.cancelRoomExecutions(h.id),y(!1),D(null))},[h]),K=(0,r.useCallback)(()=>{v(null),V([])},[]),$=(0,r.useCallback)(()=>{(null==f?void 0:f.output)&&navigator.clipboard.writeText(f.output)},[f]),X=(0,r.useCallback)(()=>{if(null==f?void 0:f.output){let e=new Blob([f.output],{type:"text/plain"}),t=URL.createObjectURL(e),a=document.createElement("a");a.href=t,a.download="output-".concat(n,".txt"),a.click(),URL.revokeObjectURL(t)}},[f,n]),ee=e=>{switch(e){case"success":return(0,s.jsx)(L.Z,{className:"w-4 h-4 text-green-500"});case"compilation_error":return(0,s.jsx)(I.Z,{className:"w-4 h-4 text-red-500"});case"runtime_error":return(0,s.jsx)(E.Z,{className:"w-4 h-4 text-orange-500"});case"timeout":return(0,s.jsx)(R.Z,{className:"w-4 h-4 text-yellow-500"});case"memory_limit":return(0,s.jsx)(Z.Z,{className:"w-4 h-4 text-purple-500"});default:return(0,s.jsx)(I.Z,{className:"w-4 h-4 text-gray-500"})}},et=e=>{switch(e){case"success":return"Execution Successful";case"compilation_error":return"Compilation Error";case"runtime_error":return"Runtime Error";case"timeout":return"Execution Timeout";case"memory_limit":return"Memory Limit Exceeded";default:return"System Error"}},ea=e=>e<1e3?"".concat(e,"ms"):"".concat((e/1e3).toFixed(2),"s");return(0,s.jsxs)(k.Zb,{className:"h-full flex flex-col",children:[(0,s.jsx)(k.Ol,{className:"pb-3",children:(0,s.jsxs)(k.ll,{className:"flex items-center justify-between text-lg",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(C.Z,{className:"w-5 h-5"}),(0,s.jsx)("span",{children:"Code Execution"})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsxs)(N.z,{onClick:Q,disabled:b||!a.trim(),size:"sm",className:"bg-green-600 hover:bg-green-700 text-white",children:[b?(0,s.jsx)(z.Z,{className:"w-4 h-4 animate-spin mr-2"}):(0,s.jsx)(g.Z,{className:"w-4 h-4 mr-2"}),b?"Running...":"Run Code"]}),b&&(0,s.jsxs)(N.z,{onClick:G,variant:"outline",size:"sm",className:"text-red-600 border-red-200 hover:bg-red-50",children:[(0,s.jsx)(A.Z,{className:"w-4 h-4 mr-2"}),"Stop"]})]})]})}),(0,s.jsxs)(k.aY,{className:"flex-1 flex flex-col space-y-4",children:[(0,s.jsx)(M.M,{children:j&&(0,s.jsxs)(o.E.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"p-3 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(z.Z,{className:"w-4 h-4 animate-spin text-blue-600"}),(0,s.jsx)("span",{className:"text-sm text-blue-800 dark:text-blue-200",children:j.currentStep})]}),j.estimatedTime&&j.estimatedTime>0&&(0,s.jsxs)("span",{className:"text-xs text-blue-600 dark:text-blue-400",children:["~",j.estimatedTime,"s"]})]}),void 0!==j.progress&&(0,s.jsx)("div",{className:"mt-2 w-full bg-blue-200 dark:bg-blue-800 rounded-full h-2",children:(0,s.jsx)("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:"".concat(j.progress,"%")}})})]})}),B&&(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Input (stdin)"}),(0,s.jsxs)(N.z,{variant:"ghost",size:"sm",onClick:()=>Y(!O),className:"h-6 px-2 text-xs",children:[O?"Hide":"Show"," Input"]})]}),O&&(0,s.jsx)("textarea",{value:H,onChange:e=>_(e.target.value),placeholder:"Enter input for your program...",className:"w-full p-3 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 font-mono text-sm resize-none",rows:3})]}),(0,s.jsx)("div",{className:"flex space-x-1 border-b border-gray-200 dark:border-gray-700",children:q.map(e=>(0,s.jsxs)("button",{onClick:()=>F(e.id),className:"px-3 py-2 text-sm font-medium rounded-t-md transition-colors flex items-center space-x-2 ".concat(U===e.id?"bg-blue-100 text-blue-700 dark:bg-blue-900/20 dark:text-blue-400 border-b-2 border-blue-500":"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200"),children:[(0,s.jsx)(e.icon,{className:"w-4 h-4"}),(0,s.jsx)("span",{children:e.label})]},e.id))}),(0,s.jsxs)("div",{className:"flex-1 overflow-hidden",children:["output"===U&&(0,s.jsx)("div",{className:"h-full flex flex-col",children:f?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 rounded-t-lg border-b border-gray-200 dark:border-gray-700",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[ee(f.status),(0,s.jsx)("span",{className:"text-sm font-medium px-2 py-1 rounded border ".concat((e=>{switch(e){case"success":return"border-green-200 bg-green-50 text-green-800 dark:border-green-800 dark:bg-green-900/20 dark:text-green-400";case"compilation_error":return"border-red-200 bg-red-50 text-red-800 dark:border-red-800 dark:bg-red-900/20 dark:text-red-400";case"runtime_error":return"border-orange-200 bg-orange-50 text-orange-800 dark:border-orange-800 dark:bg-orange-900/20 dark:text-orange-400";case"timeout":return"border-yellow-200 bg-yellow-50 text-yellow-800 dark:border-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-400";case"memory_limit":return"border-purple-200 bg-purple-50 text-purple-800 dark:border-purple-800 dark:bg-purple-900/20 dark:text-purple-400";default:return"border-gray-200 bg-gray-50 text-gray-800 dark:border-gray-800 dark:bg-gray-900/20 dark:text-gray-400"}})(f.status)),children:et(f.status)})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-4 text-xs text-gray-500 dark:text-gray-400",children:[f.executionTime&&(0,s.jsxs)("span",{className:"flex items-center space-x-1",children:[(0,s.jsx)(R.Z,{className:"w-3 h-3"}),(0,s.jsx)("span",{children:ea(f.executionTime)})]}),f.memoryUsed&&(0,s.jsxs)("span",{className:"flex items-center space-x-1",children:[(0,s.jsx)(Z.Z,{className:"w-3 h-3"}),(0,s.jsx)("span",{children:(t=f.memoryUsed)<1024?"".concat(t," KB"):"".concat((t/1024).toFixed(2)," MB")})]}),f.compilationTime&&(0,s.jsxs)("span",{className:"flex items-center space-x-1",children:[(0,s.jsx)(P.Z,{className:"w-3 h-3"}),(0,s.jsx)("span",{children:ea(f.compilationTime)})]})]})]}),(0,s.jsx)("div",{className:"flex-1 overflow-auto p-3 bg-gray-900 text-green-400 font-mono text-sm",children:f.success?(0,s.jsx)("pre",{className:"whitespace-pre-wrap",children:f.output}):(0,s.jsx)("pre",{className:"whitespace-pre-wrap text-red-400",children:f.error})}),(0,s.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 rounded-b-lg border-t border-gray-200 dark:border-gray-700",children:[(0,s.jsx)("div",{className:"flex items-center space-x-2",children:(0,s.jsxs)(N.z,{onClick:K,variant:"outline",size:"sm",className:"h-8 px-3 text-xs",children:[(0,s.jsx)(T.Z,{className:"w-3 h-3 mr-1"}),"Clear"]})}),(0,s.jsx)("div",{className:"flex items-center space-x-2",children:f.output&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(N.z,{onClick:$,variant:"outline",size:"sm",className:"h-8 px-3 text-xs",children:[(0,s.jsx)(p.Z,{className:"w-3 h-3 mr-1"}),"Copy"]}),(0,s.jsxs)(N.z,{onClick:X,variant:"outline",size:"sm",className:"h-8 px-3 text-xs",children:[(0,s.jsx)(u.Z,{className:"w-3 h-3 mr-1"}),"Download"]})]})})]})]}):(0,s.jsx)("div",{className:"h-full flex items-center justify-center text-gray-500 dark:text-gray-400",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)(C.Z,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),(0,s.jsx)("p",{className:"text-sm",children:"No output yet. Run your code to see results."})]})})}),"input"===U&&(0,s.jsx)("div",{className:"h-full p-3",children:(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Standard Input (stdin)"}),(0,s.jsx)("textarea",{value:H,onChange:e=>_(e.target.value),placeholder:"Enter input that your program will read from stdin...",className:"w-full h-32 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 font-mono text-sm resize-none"}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"This input will be provided to your program when it runs."})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Command Line Arguments"}),(0,s.jsx)(w.I,{placeholder:"arg1 arg2 arg3",className:"font-mono text-sm"}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Space-separated command line arguments."})]})]})}),"debug"===U&&(0,s.jsx)("div",{className:"h-full p-3",children:(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Code Analysis"}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between p-2 bg-gray-50 dark:bg-gray-800 rounded",children:[(0,s.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Code Size"}),(0,s.jsxs)("span",{className:"text-sm font-medium",children:[a.length," characters"]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between p-2 bg-gray-50 dark:bg-gray-800 rounded",children:[(0,s.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Language"}),(0,s.jsx)("span",{className:"text-sm font-medium capitalize",children:n})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between p-2 bg-gray-50 dark:bg-gray-800 rounded",children:[(0,s.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Lines"}),(0,s.jsx)("span",{className:"text-sm font-medium",children:a.split("\n").length})]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Execution Settings"}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between p-2 bg-gray-50 dark:bg-gray-800 rounded",children:[(0,s.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Timeout"}),(0,s.jsx)("span",{className:"text-sm font-medium",children:"10 seconds"})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between p-2 bg-gray-50 dark:bg-gray-800 rounded",children:[(0,s.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Memory Limit"}),(0,s.jsx)("span",{className:"text-sm font-medium",children:"256 MB"})]})]})]})]})}),"history"===U&&(0,s.jsx)("div",{className:"h-full p-3",children:(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Recent Executions"}),J.length>0?(0,s.jsx)("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:J.map((e,t)=>{var a;return(0,s.jsxs)("div",{className:"p-3 rounded-lg border cursor-pointer transition-colors ".concat(e.success?"border-green-200 bg-green-50 dark:border-green-800 dark:bg-green-900/20":"border-red-200 bg-red-50 dark:border-red-800 dark:bg-red-900/20"),onClick:()=>v(e),children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[ee(e.status),(0,s.jsx)("span",{className:"text-sm font-medium",children:et(e.status)})]}),(0,s.jsx)("span",{className:"text-xs text-gray-500",children:e.timestamp.toLocaleTimeString()})]}),(0,s.jsx)("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:e.output?e.output.substring(0,100)+"...":(null===(a=e.error)||void 0===a?void 0:a.substring(0,100))+"..."})]},t)})}):(0,s.jsxs)("div",{className:"text-center text-gray-500 dark:text-gray-400 py-8",children:[(0,s.jsx)(T.Z,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),(0,s.jsx)("p",{className:"text-sm",children:"No execution history yet."})]})]})})]})]})]})}var _=a(6441),U=a(7211);let F=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(_.fC,{ref:t,className:(0,U.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",a),...r})});F.displayName=_.fC.displayName;let J=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(_.Ee,{ref:t,className:(0,U.cn)("aspect-square h-full w-full",a),...r})});J.displayName=_.Ee.displayName;let V=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(_.NY,{ref:t,className:(0,U.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",a),...r})});V.displayName=_.NY.displayName;var O=a(6614),Y=a(6258),q=a(6919),B=a(7737);function Q(e){let{}=e,{socket:t,isConnected:a}=(0,d.s)(),{user:n}=(0,i.aC)(),{currentRoom:c}=(0,l.N)(),[u,m]=(0,r.useState)([]),[x,g]=(0,r.useState)(""),[h,p]=(0,r.useState)([]),[b,y]=(0,r.useState)(!1),[f,v]=(0,r.useState)(!1),[j,k]=(0,r.useState)(!1),[C,S]=(0,r.useState)(!1),[E,T]=(0,r.useState)(""),[L,I]=(0,r.useState)("javascript"),R=(0,r.useRef)(null),Z=(0,r.useRef)();(0,r.useEffect)(()=>{var e;null===(e=R.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},[u]),(0,r.useEffect)(()=>{if(t&&a&&c)return t.on("newMessage",e=>{m(t=>[...t,e])}),t.on("userPresence",e=>{p(e.map(e=>({...e,isTyping:!1})))}),t.on("userTyping",e=>{p(t=>t.map(t=>t.id===e?{...t,isTyping:!0}:t))}),t.on("userStoppedTyping",e=>{p(t=>t.map(t=>t.id===e?{...t,isTyping:!1}:t))}),t.on("messageStatus",e=>{m(t=>t.map(t=>t.id===e.messageId?{...t,status:e.status}:t))}),()=>{t.off("newMessage"),t.off("userPresence"),t.off("userTyping"),t.off("userStoppedTyping"),t.off("messageStatus")}},[t,a,c]);let z=()=>{t&&c&&n&&(b||(y(!0),t.emit("startTyping",{roomId:c.id,userId:n.id})),Z.current&&clearTimeout(Z.current),Z.current=setTimeout(()=>{y(!1),t.emit("stopTyping",{roomId:c.id,userId:n.id})},2e3))},A=function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"text";if(!e.trim()||!t||!c||!n)return;let s={id:Date.now().toString(),text:e,sender:{id:n.id,name:n.name,avatar:n.avatar},timestamp:new Date,type:a,status:"sending"};m(e=>[...e,s]),g(""),T(""),S(!1),y(!1),Z.current&&clearTimeout(Z.current),t.emit("stopTyping",{roomId:c.id,userId:n.id}),t.emit("sendMessage",{roomId:c.id,message:{...s,timestamp:s.timestamp.toISOString()}})},P=e=>{switch(e){case"sending":return(0,s.jsx)("div",{className:"w-3 h-3 border-2 border-gray-300 border-t-blue-500 rounded-full animate-spin"});case"sent":return(0,s.jsx)("div",{className:"w-3 h-3 border-2 border-gray-300 border-t-blue-500 rounded-full"});case"delivered":return(0,s.jsx)("div",{className:"w-3 h-3 border-2 border-blue-500 rounded-full"});case"read":return(0,s.jsx)("div",{className:"w-3 h-3 bg-blue-500 rounded-full"});default:return null}},D=e=>e.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});return(0,s.jsxs)("div",{className:"flex flex-col h-full",children:[(0,s.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 custom-scrollbar",children:[(0,s.jsx)(M.M,{children:u.map(e=>(0,s.jsx)(o.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},className:"flex ".concat(e.sender.id===(null==n?void 0:n.id)?"justify-end":"justify-start"),children:(0,s.jsx)("div",{className:"max-w-[80%] ".concat(e.sender.id===(null==n?void 0:n.id)?"order-2":"order-1"),children:(0,s.jsxs)("div",{className:"flex items-end space-x-2 ".concat(e.sender.id===(null==n?void 0:n.id)?"flex-row-reverse space-x-reverse":""),children:[e.sender.id!==(null==n?void 0:n.id)&&(0,s.jsxs)(F,{className:"w-6 h-6",children:[(0,s.jsx)(J,{src:e.sender.avatar}),(0,s.jsx)(V,{className:"text-xs",children:e.sender.name.charAt(0).toUpperCase()})]}),(0,s.jsxs)("div",{className:"px-3 py-2 rounded-lg ".concat(e.sender.id===(null==n?void 0:n.id)?"bg-blue-600 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-900 dark:text-gray-100"),children:[e.sender.id!==(null==n?void 0:n.id)&&(0,s.jsx)("div",{className:"text-xs font-medium mb-1 opacity-75",children:e.sender.name}),"code"===e.type?(0,s.jsx)("pre",{className:"text-sm whitespace-pre-wrap font-mono",children:(0,s.jsx)("code",{children:e.text})}):(0,s.jsx)("div",{className:"text-sm",children:e.text}),(0,s.jsxs)("div",{className:"flex items-center justify-between mt-1 text-xs opacity-75 ".concat(e.sender.id===(null==n?void 0:n.id)?"text-blue-100":"text-gray-500"),children:[(0,s.jsx)("span",{children:D(e.timestamp)}),e.sender.id===(null==n?void 0:n.id)&&P(e.status)]})]})]})})},e.id))}),h.filter(e=>e.isTyping&&e.id!==(null==n?void 0:n.id)).map(e=>(0,s.jsx)(o.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"flex justify-start",children:(0,s.jsxs)("div",{className:"flex items-center space-x-2 px-3 py-2 bg-gray-100 dark:bg-gray-700 rounded-lg",children:[(0,s.jsxs)(F,{className:"w-6 h-6",children:[(0,s.jsx)(J,{src:e.avatar}),(0,s.jsx)(V,{className:"text-xs",children:e.name.charAt(0).toUpperCase()})]}),(0,s.jsxs)("div",{className:"flex space-x-1",children:[(0,s.jsx)("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"}),(0,s.jsx)("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),(0,s.jsx)("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})]})},e.id)),(0,s.jsx)("div",{ref:R})]}),C&&(0,s.jsxs)(o.E.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"border-t border-gray-200 dark:border-gray-700 p-3 space-y-3",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsxs)("select",{value:L,onChange:e=>I(e.target.value),className:"px-2 py-1 text-xs border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-800",children:[(0,s.jsx)("option",{value:"javascript",children:"JavaScript"}),(0,s.jsx)("option",{value:"python",children:"Python"}),(0,s.jsx)("option",{value:"java",children:"Java"}),(0,s.jsx)("option",{value:"cpp",children:"C++"}),(0,s.jsx)("option",{value:"html",children:"HTML"}),(0,s.jsx)("option",{value:"css",children:"CSS"})]}),(0,s.jsx)(N.z,{size:"sm",onClick:()=>{E.trim()&&A("```".concat(L,"\n").concat(E,"\n```"),"code")},className:"px-3 py-1 text-xs",children:"Send Code"}),(0,s.jsx)(N.z,{size:"sm",variant:"outline",onClick:()=>S(!1),className:"px-3 py-1 text-xs",children:"Cancel"})]}),(0,s.jsx)("textarea",{value:E,onChange:e=>T(e.target.value),placeholder:"Enter your code here...",className:"w-full h-20 px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-800 font-mono resize-none"})]}),(0,s.jsxs)("div",{className:"border-t border-gray-200 dark:border-gray-700 p-3",children:[(0,s.jsxs)("form",{onSubmit:e=>{e.preventDefault(),x.trim()&&A(x.trim())},className:"flex items-center space-x-2",children:[(0,s.jsxs)("div",{className:"flex-1 relative",children:[(0,s.jsx)(w.I,{value:x,onChange:e=>{g(e.target.value),z()},placeholder:"Type a message...",className:"pr-20"}),(0,s.jsxs)("div",{className:"absolute right-2 top-1/2 transform -translate-y-1/2 flex items-center space-x-1",children:[(0,s.jsx)(N.z,{type:"button",size:"sm",variant:"ghost",onClick:()=>S(!C),className:"h-6 w-6 p-0 hover:bg-gray-100 dark:hover:bg-gray-700",children:(0,s.jsx)(O.Z,{className:"w-3 h-3"})}),(0,s.jsx)(N.z,{type:"button",size:"sm",variant:"ghost",onClick:()=>k(!j),className:"h-6 w-6 p-0 hover:bg-gray-100 dark:hover:bg-gray-700",children:(0,s.jsx)(Y.Z,{className:"w-3 h-3"})}),(0,s.jsx)(N.z,{type:"button",size:"sm",variant:"ghost",onClick:()=>v(!f),className:"h-6 w-6 p-0 hover:bg-gray-100 dark:hover:bg-gray-700",children:(0,s.jsx)(q.Z,{className:"w-3 h-3"})})]})]}),(0,s.jsx)(N.z,{type:"submit",size:"sm",disabled:!x.trim(),children:(0,s.jsx)(B.Z,{className:"w-4 h-4"})})]}),j&&(0,s.jsx)("input",{type:"file",onChange:e=>{var t;let a=null===(t=e.target.files)||void 0===t?void 0:t[0];if(a){let e=a.name;A("\uD83D\uDCCE File: ".concat(e),"file")}k(!1)},className:"mt-2 w-full text-sm",accept:"image/*,.pdf,.doc,.docx,.txt,.js,.py,.java,.cpp,.html,.css"})]})]})}var G=a(6393),K=a(2780),$=a(6810),X=a(4159),ee=a(6752),et=a(8002),ea=a(7270),es=a(1130),er=a(20),en=a(2212),ei=a(4035);function el(e){let{roomId:t}=e,{socket:a,isConnected:n}=(0,d.s)(),{user:c}=(0,i.aC)(),{currentRoom:u}=(0,l.N)(),[m,x]=(0,r.useState)([]),[g,h]=(0,r.useState)(!1),[p,y]=(0,r.useState)(!0),[f,v]=(0,r.useState)(!0),[j,w]=(0,r.useState)(!1),[C,S]=(0,r.useState)(!1),[E,T]=(0,r.useState)(!1),[L,I]=(0,r.useState)(null),[R,Z]=(0,r.useState)(null),[z,A]=(0,r.useState)(!1),[P,D]=(0,r.useState)(null),W=(0,r.useRef)(null),H=(0,r.useRef)(null),_=(0,r.useRef)(null);(0,r.useEffect)(()=>{if(a&&n&&c&&u)return a.on("participantJoined",e=>{x(t=>[...t,e])}),a.on("participantLeft",e=>{x(t=>t.filter(t=>t.id!==e))}),a.on("participantUpdated",e=>{x(t=>t.map(t=>t.id===e.id?e:t))}),a.on("screenShareStarted",e=>{x(t=>t.map(t=>t.id===e.userId?{...t,isScreenSharing:!0}:t))}),a.on("screenShareStopped",e=>{x(t=>t.map(t=>t.id===e?{...t,isScreenSharing:!1}:t))}),()=>{a.off("participantJoined"),a.off("participantLeft"),a.off("participantUpdated"),a.off("screenShareStarted"),a.off("screenShareStopped")}},[a,n,c,u]);let U=async()=>{try{A(!0),D(null);let e=await navigator.mediaDevices.getUserMedia({video:p,audio:f});I(e);let t={id:c.id,name:c.name,avatar:c.avatar,stream:e,isVideoEnabled:p,isAudioEnabled:f,isScreenSharing:!1,isSpeaking:!1,isLocal:!0};x([t]),h(!0),a&&u&&a.emit("joinVideoCall",{roomId:u.id,participant:t}),W.current&&(W.current.srcObject=e)}catch(e){D(e.message||"Failed to start call"),console.error("Error starting call:",e)}finally{A(!1)}},O=async()=>{if(!L)return;let e=L.getVideoTracks()[0];e&&(e.enabled=!p,y(!p),x(e=>e.map(e=>e.isLocal?{...e,isVideoEnabled:!p}:e)),a&&u&&c&&a.emit("updateParticipant",{roomId:u.id,userId:c.id,updates:{isVideoEnabled:!p}}))},Y=async()=>{if(!L)return;let e=L.getAudioTracks()[0];e&&(e.enabled=!f,v(!f),x(e=>e.map(e=>e.isLocal?{...e,isAudioEnabled:!f}:e)),a&&u&&c&&a.emit("updateParticipant",{roomId:u.id,userId:c.id,updates:{isAudioEnabled:!f}}))},q=async()=>{try{if(j)R&&(R.getTracks().forEach(e=>e.stop()),Z(null)),w(!1),a&&u&&c&&a.emit("stopScreenShare",{roomId:u.id,userId:c.id});else{let e=await navigator.mediaDevices.getDisplayMedia({video:!0,audio:!1});Z(e),w(!0),H.current&&(H.current.srcObject=e),a&&u&&c&&a.emit("startScreenShare",{roomId:u.id,userId:c.id,streamId:e.id})}}catch(e){D(e.message||"Failed to toggle screen share"),console.error("Error toggling screen share:",e)}},B=(e,t)=>{let a=0===t||e.isScreenSharing;return(0,s.jsx)(o.E.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:.3},className:"relative group ".concat(a?"col-span-2 row-span-2":""),children:(0,s.jsxs)("div",{className:"relative w-full h-full bg-gray-900 rounded-lg overflow-hidden",children:[e.stream&&e.isVideoEnabled?(0,s.jsx)("video",{ref:e.isLocal?W:void 0,autoPlay:!0,playsInline:!0,muted:e.isLocal,className:"w-full h-full object-cover"}):(0,s.jsx)("div",{className:"w-full h-full bg-gradient-to-br from-gray-700 to-gray-900 flex items-center justify-center",children:(0,s.jsxs)(F,{className:"w-20 h-20",children:[(0,s.jsx)(J,{src:e.avatar}),(0,s.jsx)(V,{className:"text-2xl",children:e.name.charAt(0).toUpperCase()})]})}),(0,s.jsx)("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/70 to-transparent p-3",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("span",{className:"text-white font-medium",children:e.name}),e.isLocal&&(0,s.jsx)(G.C,{variant:"secondary",className:"text-xs",children:"You"})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-1",children:[!e.isAudioEnabled&&(0,s.jsx)("div",{className:"w-6 h-6 bg-red-500 rounded-full flex items-center justify-center",children:(0,s.jsx)(K.Z,{className:"w-3 h-3 text-white"})}),!e.isVideoEnabled&&(0,s.jsx)("div",{className:"w-6 h-6 bg-red-500 rounded-full flex items-center justify-center",children:(0,s.jsx)($.Z,{className:"w-3 h-3 text-white"})}),e.isScreenSharing&&(0,s.jsx)("div",{className:"w-6 h-6 bg-blue-500 rounded-full flex items-center justify-center",children:(0,s.jsx)(X.Z,{className:"w-3 h-3 text-white"})})]})]})}),e.isSpeaking&&(0,s.jsx)("div",{className:"absolute top-3 right-3 w-3 h-3 bg-green-500 rounded-full animate-pulse"})]})},e.id)};return c&&u?(0,s.jsxs)(k.Zb,{className:"h-full flex flex-col",children:[(0,s.jsx)(k.Ol,{className:"pb-3 border-b",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)(k.ll,{className:"text-lg flex items-center space-x-2",children:[(0,s.jsx)(ee.Z,{className:"w-5 h-5"}),(0,s.jsx)("span",{children:"Video Call"}),g&&(0,s.jsxs)(G.C,{variant:"secondary",className:"ml-2",children:[m.length," participants"]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(N.z,{variant:"outline",size:"sm",onClick:()=>T(!E),className:E?"bg-blue-50 border-blue-200 text-blue-600":"",children:(0,s.jsx)(et.Z,{className:"w-4 h-4"})}),(0,s.jsx)(N.z,{variant:"outline",size:"sm",onClick:()=>{if(C)document.exitFullscreen&&document.exitFullscreen();else{var e;(null===(e=_.current)||void 0===e?void 0:e.requestFullscreen)&&_.current.requestFullscreen()}S(!C)},children:C?(0,s.jsx)(ea.Z,{className:"w-4 h-4"}):(0,s.jsx)(es.Z,{className:"w-4 h-4"})}),(0,s.jsx)(N.z,{variant:"outline",size:"sm",children:(0,s.jsx)(b.Z,{className:"w-4 h-4"})})]})]})}),(0,s.jsxs)(k.aY,{className:"flex-1 flex flex-col p-0",children:[g?(0,s.jsxs)("div",{className:"flex-1 flex flex-col",children:[(0,s.jsx)("div",{ref:_,className:"flex-1 p-4 grid ".concat((()=>{let e=m.length;return 1===e?"grid-cols-1":2===e||e<=4?"grid-cols-2":e<=9?"grid-cols-3":"grid-cols-4"})()," gap-4 min-h-0"),children:(0,s.jsx)(M.M,{children:m.map((e,t)=>B(e,t))})}),(0,s.jsx)("div",{className:"border-t p-4",children:(0,s.jsxs)("div",{className:"flex items-center justify-center space-x-4",children:[(0,s.jsx)(N.z,{onClick:Y,variant:f?"outline":"default",size:"lg",className:"w-12 h-12 rounded-full ".concat(f?"":"bg-red-600 hover:bg-red-700"),children:f?(0,s.jsx)(en.Z,{className:"w-5 h-5"}):(0,s.jsx)(K.Z,{className:"w-5 h-5"})}),(0,s.jsx)(N.z,{onClick:O,variant:p?"outline":"default",size:"lg",className:"w-12 h-12 rounded-full ".concat(p?"":"bg-red-600 hover:bg-red-700"),children:p?(0,s.jsx)(ee.Z,{className:"w-5 h-5"}):(0,s.jsx)($.Z,{className:"w-5 h-5"})}),(0,s.jsx)(N.z,{onClick:q,variant:j?"default":"outline",size:"lg",className:"w-12 h-12 rounded-full ".concat(j?"bg-blue-600 hover:bg-blue-700":""),children:(0,s.jsx)(X.Z,{className:"w-5 h-5"})}),(0,s.jsx)(N.z,{onClick:()=>{L&&L.getTracks().forEach(e=>e.stop()),R&&R.getTracks().forEach(e=>e.stop()),a&&u&&c&&a.emit("leaveVideoCall",{roomId:u.id,userId:c.id}),I(null),Z(null),x([]),h(!1),w(!1),D(null)},variant:"default",size:"lg",className:"w-12 h-12 rounded-full bg-red-600 hover:bg-red-700",children:(0,s.jsx)(ei.Z,{className:"w-5 h-5"})})]})})]}):(0,s.jsx)("div",{className:"flex-1 flex items-center justify-center p-6",children:(0,s.jsxs)("div",{className:"text-center space-y-6",children:[(0,s.jsx)("div",{className:"w-20 h-20 bg-blue-100 dark:bg-blue-900/20 rounded-full flex items-center justify-center mx-auto",children:(0,s.jsx)(ee.Z,{className:"w-10 h-10 text-blue-600"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100 mb-2",children:"Start Video Call"}),(0,s.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Connect with your team members in real-time"})]}),P&&(0,s.jsx)("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-3",children:(0,s.jsx)("p",{className:"text-red-600 dark:text-red-400 text-sm",children:P})}),(0,s.jsx)("div",{className:"flex items-center justify-center space-x-4",children:(0,s.jsx)(N.z,{onClick:U,disabled:z,className:"bg-blue-600 hover:bg-blue-700 text-white px-6",children:z?(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),(0,s.jsx)("span",{children:"Connecting..."})]}):(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(er.Z,{className:"w-4 h-4"}),(0,s.jsx)("span",{children:"Start Call"})]})})})]})}),R&&(0,s.jsx)("video",{ref:H,autoPlay:!0,playsInline:!0,muted:!0,className:"hidden"})]})]}):(0,s.jsx)(k.Zb,{className:"h-full",children:(0,s.jsx)(k.aY,{className:"flex items-center justify-center h-full",children:(0,s.jsx)("p",{className:"text-gray-500",children:"Join a room to use video calls"})})})}let eo=[{id:"javascript",name:"JavaScript",extension:"js",mimeType:"text/javascript",code:"// Welcome to JavaScript!\n// Write your code below\n\nfunction greet(name) {\n  return `Hello, ${name}!`;\n}\n\n// Example usage\nconsole.log(greet('World'));\n\n// Your code here\nfunction main() {\n  // Add your logic here\n  console.log('Code executed successfully!');\n}\n\nmain();",description:"JavaScript runtime environment",isCompiled:!1,executionTimeout:10,memoryLimit:128},{id:"typescript",name:"TypeScript",extension:"ts",mimeType:"text/typescript",code:"// Welcome to TypeScript!\n// Write your code below\n\ninterface User {\n  name: string;\n  age: number;\n}\n\nfunction greet(user: User): string {\n  return `Hello, ${user.name}! You are ${user.age} years old.`;\n}\n\n// Example usage\nconst user: User = { name: 'World', age: 25 };\nconsole.log(greet(user));\n\n// Your code here\nfunction main(): void {\n  // Add your logic here\n  console.log('Code executed successfully!');\n}\n\nmain();",description:"Typed JavaScript with compilation",isCompiled:!1,executionTimeout:15,memoryLimit:128},{id:"python",name:"Python",extension:"py",mimeType:"text/x-python",code:'# Welcome to Python!\n# Write your code below\n\ndef greet(name):\n    return f"Hello, {name}!"\n\n# Example usage\nprint(greet(\'World\'))\n\n# Your code here\ndef main():\n    # Add your logic here\n    print("Code executed successfully!")\n\nif __name__ == "__main__":\n    main()',description:"Python interpreter",isCompiled:!1,executionTimeout:10,memoryLimit:256},{id:"java",name:"Java",extension:"java",mimeType:"text/x-java-source",code:'// Welcome to Java!\n// Write your code below\n\npublic class Main {\n    public static void main(String[] args) {\n        // Add your logic here\n        System.out.println("Code executed successfully!");\n        \n        // Example method call\n        String result = greet("World");\n        System.out.println(result);\n    }\n    \n    public static String greet(String name) {\n        return "Hello, " + name + "!";\n    }\n}',description:"Java with JVM compilation",isCompiled:!0,executionTimeout:20,memoryLimit:512},{id:"cpp",name:"C++",extension:"cpp",mimeType:"text/x-c++src",code:'// Welcome to C++!\n// Write your code below\n\n#include <iostream>\n#include <string>\n\nusing namespace std;\n\nstring greet(string name) {\n    return "Hello, " + name + "!";\n}\n\nint main() {\n    // Add your logic here\n    cout << "Code executed successfully!" << endl;\n    \n    // Example function call\n    string result = greet("World");\n    cout << result << endl;\n    \n    return 0;\n}',description:"C++ with GCC compilation",isCompiled:!0,executionTimeout:15,memoryLimit:256},{id:"c",name:"C",extension:"c",mimeType:"text/x-csrc",code:'// Welcome to C!\n// Write your code below\n\n#include <stdio.h>\n#include <string.h>\n\nchar* greet(char* name) {\n    static char result[100];\n    sprintf(result, "Hello, %s!", name);\n    return result;\n}\n\nint main() {\n    // Add your logic here\n    printf("Code executed successfully!\\n");\n    \n    // Example function call\n    char* result = greet("World");\n    printf("%s\\n", result);\n    \n    return 0;\n}',description:"C with GCC compilation",isCompiled:!0,executionTimeout:15,memoryLimit:256},{id:"go",name:"Go",extension:"go",mimeType:"text/x-go",code:'// Welcome to Go!\n// Write your code below\n\npackage main\n\nimport "fmt"\n\nfunc greet(name string) string {\n    return fmt.Sprintf("Hello, %s!", name)\n}\n\nfunc main() {\n    // Add your logic here\n    fmt.Println("Code executed successfully!")\n    \n    // Example function call\n    result := greet("World")\n    fmt.Println(result)\n}',description:"Go with compilation",isCompiled:!0,executionTimeout:15,memoryLimit:256},{id:"rust",name:"Rust",extension:"rs",mimeType:"text/x-rust",code:'// Welcome to Rust!\n// Write your code below\n\nfn greet(name: &str) -> String {\n    format!("Hello, {}!", name)\n}\n\nfn main() {\n    // Add your logic here\n    println!("Code executed successfully!");\n    \n    // Example function call\n    let result = greet("World");\n    println!("{}", result);\n}',description:"Rust with compilation",isCompiled:!0,executionTimeout:20,memoryLimit:256},{id:"php",name:"PHP",extension:"php",mimeType:"text/x-php",code:'<?php\n// Welcome to PHP!\n// Write your code below\n\nfunction greet($name) {\n    return "Hello, " . $name . "!";\n}\n\n// Example usage\necho greet(\'World\') . PHP_EOL;\n\n// Your code here\nfunction main() {\n    // Add your logic here\n    echo "Code executed successfully!" . PHP_EOL;\n}\n\nmain();\n?>',description:"PHP interpreter",isCompiled:!1,executionTimeout:10,memoryLimit:128},{id:"html",name:"HTML",extension:"html",mimeType:"text/html",code:'<!DOCTYPE html>\n<html lang="en">\n<head>\n    <meta charset="UTF-8">\n    <meta name="viewport" content="width=device-width, initial-scale=1.0">\n    <title>Welcome to HTML!</title>\n    <style>\n        body {\n            font-family: Arial, sans-serif;\n            margin: 40px;\n            background-color: #f0f0f0;\n        }\n        .container {\n            background: white;\n            padding: 20px;\n            border-radius: 8px;\n            box-shadow: 0 2px 10px rgba(0,0,0,0.1);\n        }\n        h1 {\n            color: #333;\n        }\n        .code-output {\n            background: #f8f9fa;\n            padding: 15px;\n            border-radius: 4px;\n            border-left: 4px solid #007bff;\n        }\n    </style>\n</head>\n<body>\n    <div class="container">\n        <h1>Welcome to HTML!</h1>\n        <p>This is your HTML template. Customize it as needed!</p>\n        \n        <div class="code-output">\n            <strong>Output:</strong> HTML page rendered successfully!\n        </div>\n        \n        <script>\n            // Your JavaScript code here\n            console.log(\'HTML page loaded successfully!\');\n            \n            function greet(name) {\n                return \'Hello, \' + name + \'!\';\n            }\n            \n            // Example usage\n            document.addEventListener(\'DOMContentLoaded\', function() {\n                console.log(greet(\'World\'));\n            });\n        </script>\n    </div>\n</body>\n</html>',description:"HTML with browser rendering",isCompiled:!1,executionTimeout:5,memoryLimit:64},{id:"css",name:"CSS",extension:"css",mimeType:"text/css",code:"/* Welcome to CSS! */\n/* Write your styles below */\n\nbody {\n    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;\n    margin: 0;\n    padding: 20px;\n    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n    min-height: 100vh;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n}\n\n.container {\n    background: white;\n    padding: 30px;\n    border-radius: 15px;\n    box-shadow: 0 10px 30px rgba(0,0,0,0.2);\n    text-align: center;\n    max-width: 500px;\n}\n\nh1 {\n    color: #333;\n    margin-bottom: 20px;\n    font-size: 2.5em;\n}\n\n.message {\n    background: #e8f5e8;\n    color: #2d5a2d;\n    padding: 15px;\n    border-radius: 8px;\n    border-left: 4px solid #4caf50;\n    margin: 20px 0;\n}\n\n/* Your custom styles here */\n.custom-button {\n    background: #007bff;\n    color: white;\n    border: none;\n    padding: 12px 24px;\n    border-radius: 6px;\n    cursor: pointer;\n    font-size: 16px;\n    transition: background 0.3s ease;\n}\n\n.custom-button:hover {\n    background: #0056b3;\n}",description:"CSS styling",isCompiled:!1,executionTimeout:5,memoryLimit:64},{id:"sql",name:"SQL",extension:"sql",mimeType:"text/x-sql",code:"-- Welcome to SQL!\n-- Write your queries below\n\n-- Example table creation\nCREATE TABLE IF NOT EXISTS users (\n    id INTEGER PRIMARY KEY AUTOINCREMENT,\n    name VARCHAR(100) NOT NULL,\n    email VARCHAR(255) UNIQUE NOT NULL,\n    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP\n);\n\n-- Example data insertion\nINSERT INTO users (name, email) VALUES \n    ('John Doe', 'john@example.com'),\n    ('Jane Smith', 'jane@example.com'),\n    ('Bob Johnson', 'bob@example.com');\n\n-- Example SELECT query\nSELECT \n    id,\n    name,\n    email,\n    created_at\nFROM users\nORDER BY created_at DESC;\n\n-- Your SQL queries here\n-- SELECT * FROM users WHERE name LIKE '%John%';",description:"SQL database queries",isCompiled:!1,executionTimeout:30,memoryLimit:128}];function ec(e){return eo.find(t=>t.id===e)}var ed=a(8531),eu=a(6421),em=a(1406),ex=a(2348),eg=a(534);function eh(e){var t,a;let{roomId:n,initialLanguage:c="javascript",initialCode:u="",onCodeChange:m,onLanguageChange:x}=e,{user:g}=(0,i.aC)(),{currentRoom:h}=(0,l.N)(),{socket:p,isConnected:b}=(0,d.s)(),[f,v]=(0,r.useState)(u),[w,k]=(0,r.useState)(c),[S,E]=(0,r.useState)("dark"),[T,L]=(0,r.useState)(!1),[I,R]=(0,r.useState)({execution:!0,chat:!0,video:!0}),[Z,z]=(0,r.useState)("default");(0,r.useEffect)(()=>{if(!f.trim()){let e=ec(w);e&&(v(e.code),null==m||m(e.code))}},[w,f,m]);let A=(0,r.useCallback)(e=>{v(e),null==m||m(e),p&&b&&h&&p.emit("codeChange",{roomId:h.id,code:e,language:w,userId:null==g?void 0:g.id})},[p,b,h,w,null==g?void 0:g.id,m]),P=(0,r.useCallback)(()=>{p&&b&&h&&p.emit("executionStart",{roomId:h.id,userId:null==g?void 0:g.id,language:w})},[p,b,h,null==g?void 0:g.id,w]),M=(0,r.useCallback)(e=>{p&&b&&h&&p.emit("executionComplete",{roomId:h.id,userId:null==g?void 0:g.id,result:e,language:w})},[p,b,h,null==g?void 0:g.id,w]);(0,r.useEffect)(()=>{if(!p||!b||!h)return;let e=e=>{e.userId!==(null==g?void 0:g.id)&&(v(e.code),null==m||m(e.code))},t=e=>{e.userId!==(null==g?void 0:g.id)&&(k(e.language),null==x||x(e.language))},a=e=>{e.userId!==(null==g?void 0:g.id)&&console.log("User ".concat(e.userId," is executing ").concat(e.language," code"))},s=e=>{e.userId!==(null==g?void 0:g.id)&&console.log("User ".concat(e.userId," completed execution:"),e.result)};return p.on("codeChange",e),p.on("languageChange",t),p.on("executionStart",a),p.on("executionComplete",s),()=>{p.off("codeChange",e),p.off("languageChange",t),p.off("executionStart",a),p.off("executionComplete",s)}},[p,b,h,null==g?void 0:g.id,m,x]);let D=(0,r.useCallback)(()=>{document.fullscreenElement?(document.exitFullscreen(),L(!1)):(document.documentElement.requestFullscreen(),L(!0))},[]),W=(0,r.useCallback)(e=>{R(t=>({...t,[e]:!t[e]}))},[]),_=(0,r.useCallback)(e=>{(z(e),"coding"===e)?R({execution:!0,chat:!1,video:!1}):R({execution:!0,chat:!0,video:!0})},[]);return h?(0,s.jsxs)("div",{className:"h-full flex flex-col bg-gray-50 dark:bg-gray-900",children:[(0,s.jsx)(o.E.header,{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 px-4 py-3 shadow-sm",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{duration:.3},children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("div",{className:"flex items-center space-x-4",children:(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-600 to-purple-600 rounded-lg flex items-center justify-center",children:(0,s.jsx)(O.Z,{className:"w-5 h-5 text-white"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-lg font-bold text-gray-900 dark:text-gray-100",children:h.name}),(0,s.jsxs)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[h.isPublic?"Public Room":"Private Room"," • ",(null===(t=h.users)||void 0===t?void 0:t.length)||0," users"]})]})]})}),(0,s.jsx)("div",{className:"flex items-center space-x-2",children:(0,s.jsx)("div",{className:"flex items-center space-x-1 bg-gray-100 dark:bg-gray-700 rounded-lg p-1",children:[{id:"default",label:"Default",icon:ed.Z},{id:"coding",label:"Coding",icon:O.Z},{id:"collaboration",label:"Collaboration",icon:y.Z}].map(e=>(0,s.jsxs)("button",{onClick:()=>_(e.id),className:"px-3 py-1.5 text-xs font-medium rounded-md transition-colors flex items-center space-x-2 ".concat(Z===e.id?"bg-blue-500 text-white shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100"),children:[(0,s.jsx)(e.icon,{className:"w-3 h-3"}),(0,s.jsx)("span",{children:e.label})]},e.id))})}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(N.z,{variant:"outline",size:"sm",onClick:()=>W("execution"),className:I.execution?"bg-blue-50 border-blue-200 text-blue-600":"",title:"Toggle Execution Panel",children:(0,s.jsx)(C.Z,{className:"w-4 h-4"})}),(0,s.jsx)(N.z,{variant:"outline",size:"sm",onClick:()=>W("chat"),className:I.chat?"bg-blue-50 border-blue-200 text-blue-600":"",title:"Toggle Chat Panel",children:(0,s.jsx)(et.Z,{className:"w-4 h-4"})}),(0,s.jsx)(N.z,{variant:"outline",size:"sm",onClick:()=>W("video"),className:I.video?"bg-blue-50 border-blue-200 text-blue-600":"",title:"Toggle Video Panel",children:(0,s.jsx)(ee.Z,{className:"w-4 h-4"})}),(0,s.jsx)("div",{className:"w-px h-6 bg-gray-300 dark:bg-gray-600"}),(0,s.jsx)(N.z,{variant:"outline",size:"sm",onClick:D,title:T?"Exit Fullscreen":"Enter Fullscreen",children:T?(0,s.jsx)(eu.Z,{className:"w-4 h-4"}):(0,s.jsx)(em.Z,{className:"w-4 h-4"})})]})]})}),(0,s.jsx)("div",{className:"flex-1 overflow-hidden",children:(0,s.jsxs)("div",{className:"flex h-full",children:[(0,s.jsxs)("div",{className:"w-3/4 h-full flex flex-col",children:[(0,s.jsx)("div",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 px-4 py-2",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsxs)("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:["Language: ",(null===(a=ec(w))||void 0===a?void 0:a.name)||w]}),(0,s.jsxs)("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:[f.length," characters • ",f.split("\n").length," lines"]})]}),(0,s.jsx)("div",{className:"flex items-center space-x-2",children:(0,s.jsxs)(N.z,{variant:"outline",size:"sm",onClick:()=>E("dark"===S?"light":"dark"),className:"h-8 px-3 text-xs",children:["dark"===S?(0,s.jsx)(ex.Z,{className:"w-4 h-4"}):(0,s.jsx)(eg.Z,{className:"w-4 h-4"}),(0,s.jsx)("span",{className:"ml-1",children:"dark"===S?"Light":"Dark"})]})})]})}),(0,s.jsx)("div",{className:"flex-1",children:(0,s.jsx)(j,{roomId:n,language:w,initialCode:f,onCodeChange:A,theme:S})})]}),(0,s.jsxs)("div",{className:"w-1/4 h-full flex flex-col space-y-4 p-4 bg-gray-50 dark:bg-gray-800 border-l border-gray-200 dark:border-gray-700",children:[I.execution&&(0,s.jsx)(o.E.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{duration:.3},className:"flex-1 min-h-0",children:(0,s.jsx)(H,{code:f,language:w,roomId:n,onExecutionStart:P,onExecutionComplete:M})}),I.chat&&(0,s.jsx)(o.E.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{duration:.3},className:"h-64 min-h-0",children:(0,s.jsx)(Q,{roomId:n})}),I.video&&(0,s.jsx)(o.E.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{duration:.3},className:"h-48 min-h-0",children:(0,s.jsx)(el,{roomId:n})}),!I.execution&&!I.chat&&!I.video&&(0,s.jsx)("div",{className:"flex-1 flex items-center justify-center text-gray-500 dark:text-gray-400",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)(ed.Z,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),(0,s.jsx)("p",{className:"text-sm",children:"All panels are hidden"}),(0,s.jsx)("p",{className:"text-xs",children:"Use the toolbar buttons to show panels"})]})})]})]})})]}):(0,s.jsx)("div",{className:"h-full flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)(O.Z,{className:"w-16 h-16 mx-auto mb-4 text-gray-400"}),(0,s.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Loading collaborative environment..."})]})})}function ep(){let e=(0,n.useParams)(),t=(0,n.useRouter)(),{user:a,isLoading:o}=(0,i.aC)(),{currentRoom:c,joinRoom:d,isLoading:u}=(0,l.N)(),[m,x]=(0,r.useState)(!1),[g,h]=(0,r.useState)(null),[p,b]=(0,r.useState)(""),[y,f]=(0,r.useState)("javascript"),v=e.roomId,j=(0,r.useCallback)(async()=>{if(a&&v)try{x(!0),h(null),await d(v,"",t);let e=ec(y);e&&b(e.code)}catch(e){console.error("Failed to join room:",e),h(e instanceof Error?e.message:"Failed to join room")}finally{x(!1)}},[a,v,d,t,y]);(0,r.useEffect)(()=>{if(!o&&!a){t.push("/");return}a&&v&&!c&&j()},[a,o,v,c,t,j]),(0,r.useEffect)(()=>()=>{b(""),f("javascript")},[]);let N=(0,r.useCallback)(e=>{b(e)},[]),w=(0,r.useCallback)(e=>{f(e)},[]);return o||u?(0,s.jsx)("div",{className:"flex items-center justify-center min-h-screen bg-gray-50 dark:bg-gray-900",children:(0,s.jsxs)("div",{className:"text-center space-y-4",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),(0,s.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Loading collaborative environment..."})]})}):a?g?(0,s.jsx)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center",children:(0,s.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 max-w-md w-full",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold text-red-600 mb-4",children:"Error Joining Room"}),(0,s.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:g}),(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsx)("button",{onClick:j,disabled:m,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50",children:m?"Joining...":"Retry"}),(0,s.jsx)("button",{onClick:()=>t.push("/dashboard"),className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50",children:"Back to Dashboard"})]})]})}):c&&c.id===v?(0,s.jsx)("div",{className:"h-screen",children:(0,s.jsx)(eh,{roomId:c.id,initialLanguage:y,initialCode:p,onCodeChange:N,onLanguageChange:w})}):(0,s.jsx)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center",children:(0,s.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 max-w-md w-full",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Joining Room..."}),(0,s.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"Attempting to join room..."}),(0,s.jsx)("button",{onClick:j,disabled:m,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50",children:m?"Joining...":"Join Room"})]})}):null}},6393:function(e,t,a){"use strict";a.d(t,{C:function(){return i}});var s=a(7821),r=a(8078),n=a(7211);let i=r.forwardRef((e,t)=>{let{className:a,variant:r="default",...i}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium transition-colors",{default:"bg-gray-900 text-white dark:bg-gray-50 dark:text-gray-900",secondary:"bg-gray-100 text-gray-900 dark:bg-gray-800 dark:text-gray-100",success:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-100",warning:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-100",danger:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-100",outline:"border border-gray-300 text-gray-700 dark:border-gray-700 dark:text-gray-300"}[r],a),...i})});i.displayName="Badge"},3842:function(e,t,a){"use strict";a.d(t,{z:function(){return n}});var s=a(7821);a(8078);var r=a(7211);function n(e){let{className:t,variant:a="default",size:n="md",isLoading:i=!1,children:l,disabled:o,...c}=e;return(0,s.jsxs)("button",{className:(0,r.cn)("inline-flex items-center justify-center rounded-md font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none ring-offset-background",{default:"bg-gray-900 text-white hover:bg-gray-800 dark:bg-gray-50 dark:text-gray-900 dark:hover:bg-gray-200",primary:"bg-blue-600 text-white hover:bg-blue-700 focus:ring-blue-500",secondary:"bg-gray-100 text-gray-900 hover:bg-gray-200 dark:bg-gray-800 dark:text-gray-100 dark:hover:bg-gray-700",outline:"border border-gray-300 bg-transparent text-gray-700 hover:bg-gray-50 dark:border-gray-700 dark:text-gray-300 dark:hover:bg-gray-800",ghost:"bg-transparent text-gray-700 hover:bg-gray-100 dark:text-gray-300 dark:hover:bg-gray-800",danger:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500"}[a],{sm:"h-8 px-3 text-sm",md:"h-10 px-4 py-2",lg:"h-12 px-6 text-lg"}[n],t),disabled:o||i,...c,children:[i&&(0,s.jsx)("div",{className:"mr-2 h-4 w-4 animate-spin rounded-full border-2 border-current border-t-transparent"}),l]})}},8006:function(e,t,a){"use strict";a.d(t,{Ol:function(){return l},Zb:function(){return i},aY:function(){return c},ll:function(){return o}});var s=a(7821),r=a(8078),n=a(7211);let i=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("rounded-lg border border-gray-200 bg-white shadow-sm dark:border-gray-800 dark:bg-gray-900",a),...r})});i.displayName="Card";let l=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",a),...r})});l.displayName="CardHeader";let o=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("h3",{ref:t,className:(0,n.cn)("text-lg font-semibold leading-none tracking-tight",a),...r})});o.displayName="CardTitle",r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("p",{ref:t,className:(0,n.cn)("text-sm text-gray-500 dark:text-gray-400",a),...r})}).displayName="CardDescription";let c=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",a),...r})});c.displayName="CardContent";let d=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",a),...r})});d.displayName="CardFooter",d.displayName="CardFooter"},5231:function(e,t,a){"use strict";a.d(t,{I:function(){return i}});var s=a(7821),r=a(8078),n=a(7211);let i=r.forwardRef((e,t)=>{let{className:a,type:r,error:i,...l}=e;return(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)("input",{type:r,className:(0,n.cn)("flex h-10 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm placeholder:text-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:cursor-not-allowed disabled:opacity-50 dark:border-gray-700 dark:bg-gray-800 dark:text-white dark:placeholder:text-gray-500",i&&"border-red-500 focus:ring-red-500",a),ref:t,...l}),i&&(0,s.jsx)("p",{className:"text-sm text-red-600 dark:text-red-400",children:i})]})});i.displayName="Input"},7211:function(e,t,a){"use strict";a.d(t,{cn:function(){return n}});var s=a(2605),r=a(1638);function n(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,r.m6)((0,s.W)(t))}}},function(e){e.O(0,[659,93,660,537,264,597,115,364,744],function(){return e(e.s=6733)}),_N_E=e.O()}]);